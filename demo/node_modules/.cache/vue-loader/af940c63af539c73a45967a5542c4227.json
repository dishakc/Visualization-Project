{"remainingRequest":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/src/views/MapBox.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/src/views/MapBox.vue","mtime":1606670650602},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":1605858454017},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/babel-loader/lib/index.js","mtime":1605858453462},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":1605858454017},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/vue-loader/lib/index.js","mtime":1605858459895}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKaW1wb3J0IG1hcGJveGdsIGZyb20gIm1hcGJveC1nbCI7CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIk1hcEJveCIsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgYWNjZXNzVG9rZW46CiAgICAgICAgInBrLmV5SjFJam9pYldGdVlXNXBaWFJsSWl3aVlTSTZJbU5yWjJsM01HbHFiREF4YlcweWRHOTZZelkwT0hwNFlqWWlmUS5mUXhfZU1KOEtlcVhkLVVJVWMwUmJ3IiwKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBDcmltZUNoYXJ0KCkgewogICAgICBmdW5jdGlvbiBkYXNoYm9hcmQoaWQsIGZEYXRhKSB7CiAgICAgICAgdmFyIGJhckNvbG9yID0gIiNmZGFlNjEiOwogICAgICAgIGZ1bmN0aW9uIHNlZ0NvbG9yKGMpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIEZlbWFsZTogIiMzNTk3OGYiLAogICAgICAgICAgICBNYWxlOiAiI2JmODEyZCIsCiAgICAgICAgICAgIFVua25vd246ICIjNzM3MzczIiwKICAgICAgICAgIH1bY107CiAgICAgICAgICAvLyByZXR1cm4geyBsb3c6ICIjODA3ZGJhIiwgbWlkOiAiI2UwODIxNCIsIGhpZ2g6ICIjNDFhYjVkIiB9W2NdOwogICAgICAgIH0KCiAgICAgICAgLy8gY29tcHV0ZSB0b3RhbCBmb3IgZWFjaCBzdGF0ZS4KICAgICAgICBmRGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICBkLnRvdGFsID0gZC5mcmVxLkZlbWFsZSArIGQuZnJlcS5NYWxlICsgZC5mcmVxLlVua25vd247CiAgICAgICAgfSk7CgogICAgICAgIC8vIGZ1bmN0aW9uIHRvIGhhbmRsZSBoaXN0b2dyYW0uCiAgICAgICAgZnVuY3Rpb24gaGlzdG9HcmFtKGZEKSB7CiAgICAgICAgICBjb25zb2xlLmxvZyhmRCk7CiAgICAgICAgICB2YXIgaEcgPSB7fSwKICAgICAgICAgICAgaEdEaW0gPSB7IHQ6IDYwLCByOiAwLCBiOiA0MCwgbDogMjAgfTsKICAgICAgICAgIChoR0RpbS53ID0gODAwIC0gaEdEaW0ubCAtIGhHRGltLnIpLAogICAgICAgICAgICAoaEdEaW0uaCA9IDUwMCAtIGhHRGltLnQgLSBoR0RpbS5iKTsKCiAgICAgICAgICAvLyB2YXIgYXNwZWN0UmF0aW89ICcxNjo5JzsKICAgICAgICAgIC8vIHZhciB2aWV3Qm94ID0gJzAgMCAnICsgYXNwZWN0UmF0aW8uc3BsaXQoJzonKS5qb2luKCcgJyk7CgogICAgICAgICAgLy9jcmVhdGUgc3ZnIGZvciBoaXN0b2dyYW0uCiAgICAgICAgICB2YXIgaEdzdmcgPSBkMwogICAgICAgICAgICAuc2VsZWN0KGlkKQogICAgICAgICAgICAuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCBoR0RpbS53ICsgaEdEaW0ubCArIGhHRGltLnIpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoR0RpbS5oICsgaEdEaW0udCArIGhHRGltLmIpCiAgICAgICAgICAgIC8vIC5hdHRyKCJwcmVzZXJ2ZUFzcGVjdFJhdGlvIiwgInhNaW5ZTWluIG1lZXQiKQogICAgICAgICAgICAvLyAuYXR0cigidmlld0JveCIsIGAwIDAgMTUwMCA1MDBgKSAvL2AwIDAgMTUwMCA1MDBgCiAgICAgICAgICAgIC8vIC5jbGFzc2VkKCdzdmctY29udGVudCcsIHRydWUpCiAgICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgaEdEaW0ubCArICIsIiArIGhHRGltLnQgKyAiKSIpOwoKICAgICAgICAgIC8vIGNyZWF0ZSBmdW5jdGlvbiBmb3IgeC1heGlzIG1hcHBpbmcuCiAgICAgICAgICB2YXIgeCA9IGQzCiAgICAgICAgICAgIC5zY2FsZUJhbmQoKQogICAgICAgICAgICAucmFuZ2VSb3VuZChbMCwgaEdEaW0ud10pCiAgICAgICAgICAgIC5wYWRkaW5nKDAuMSkKICAgICAgICAgICAgLmRvbWFpbigKICAgICAgICAgICAgICBmRC5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkWzBdOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICk7CgogICAgICAgICAgLy8gQWRkIHgtYXhpcyB0byB0aGUgaGlzdG9ncmFtIHN2Zy4KICAgICAgICAgIGhHc3ZnCiAgICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAieCBheGlzIikKICAgICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJ0cmFuc2xhdGUoMCwiICsgaEdEaW0uaCArICIpIikKICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4KSk7CgogICAgICAgICAgLy8gaEdzdmcKICAgICAgICAgIC8vICAgLmFwcGVuZCgiZyIpCiAgICAgICAgICAvLyAgIC5hdHRyKCJjbGFzcyIsICJ4IGF4aXMiKQogICAgICAgICAgLy8gICAuc2VsZWN0QWxsKCJ0ZXh0IikKICAgICAgICAgIC8vICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAvLyAgIC50ZXh0KCJBZ2UiKQoKICAgICAgICAgIC8vIHggPT4gYCgke3gudG9GaXhlZCgxKX0KICAgICAgICAgIC8vIENyZWF0ZSBmdW5jdGlvbiBmb3IgeS1heGlzIG1hcC4KICAgICAgICAgIHZhciB5ID0gZDMKICAgICAgICAgICAgLnNjYWxlTGluZWFyKCkKICAgICAgICAgICAgLnJhbmdlKFtoR0RpbS5oLCAwXSkKICAgICAgICAgICAgLmRvbWFpbihbCiAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICBkMy5tYXgoZkQsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4gZFsxXTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgXSk7CgogICAgICAgICAgLy8gQ3JlYXRlIGJhcnMgZm9yIGhpc3RvZ3JhbSB0byBjb250YWluIHJlY3RhbmdsZXMgYW5kIGZyZXEgbGFiZWxzLgogICAgICAgICAgdmFyIGJhcnMgPSBoR3N2ZwogICAgICAgICAgICAuc2VsZWN0QWxsKCIuYmFyIikKICAgICAgICAgICAgLmRhdGEoZkQpCiAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAiYmFyIik7CgogICAgICAgICAgLy9jcmVhdGUgdGhlIHJlY3RhbmdsZXMuCiAgICAgICAgICBiYXJzCiAgICAgICAgICAgIC5hcHBlbmQoInJlY3QiKQogICAgICAgICAgICAuYXR0cigieCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHgoZFswXSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4geShkWzFdKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgeC5iYW5kd2lkdGgoKSkKICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhHRGltLmggLSB5KGRbMV0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuYXR0cigiZmlsbCIsIGJhckNvbG9yKQogICAgICAgICAgICAub24oIm1vdXNlb3ZlciIsIG1vdXNlb3ZlcikgLy8gbW91c2VvdmVyIGlzIGRlZmluZWQgYmVsb3cuCiAgICAgICAgICAgIC5vbigibW91c2VvdXQiLCBtb3VzZW91dCk7IC8vIG1vdXNlb3V0IGlzIGRlZmluZWQgYmVsb3cuCgogICAgICAgICAgLy9DcmVhdGUgdGhlIGZyZXF1ZW5jeSBsYWJlbHMgYWJvdmUgdGhlIHJlY3RhbmdsZXMuCiAgICAgICAgICBiYXJzCiAgICAgICAgICAgIC5hcHBlbmQoInRleHQiKQogICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoIiwiKShkWzFdKTsKICAgICAgICAgICAgfSkKICAgICAgICAgICAgLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiB4KGRbMF0pICsgeC5iYW5kd2lkdGgoKSAvIDI7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4geShkWzFdKSAtIDU7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKTsKCiAgICAgICAgICBoR3N2ZwogICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgIC5hdHRyKCJ4IiwgaEdEaW0udyAvIDIpCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgaEdEaW0uaCArIDM1KQogICAgICAgICAgICAuc3R5bGUoInRleHQtYW5jaG9yIiwgIm1pZGRsZSIpCiAgICAgICAgICAgIC50ZXh0KCJBZ2UiKTsKCiAgICAgICAgICBoR3N2ZwogICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmFwcGVuZCgidGV4dCIpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAicm90YXRlKC05MCkiKQogICAgICAgICAgICAuYXR0cigieSIsIDAgLSBoR0RpbS5sKQogICAgICAgICAgICAuYXR0cigieCIsIDAgLSBoR0RpbS5oIC8gMikKICAgICAgICAgICAgLmF0dHIoImR5IiwgIjFlbSIpCiAgICAgICAgICAgIC5zdHlsZSgidGV4dC1hbmNob3IiLCAibWlkZGxlIikKICAgICAgICAgICAgLnRleHQoIkNyaW1lIEZyZXF1ZW5jeSIpOwoKICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlb3ZlcihldmVudCwgZCkgewogICAgICAgICAgICAvLyB1dGlsaXR5IGZ1bmN0aW9uIHRvIGJlIGNhbGxlZCBvbiBtb3VzZW92ZXIuCiAgICAgICAgICAgIC8vIGZpbHRlciBmb3Igc2VsZWN0ZWQgc3RhdGUuCiAgICAgICAgICAgIHZhciBzdCA9IGZEYXRhLmZpbHRlcihmdW5jdGlvbiAocykgewogICAgICAgICAgICAgIHJldHVybiBzLlN0YXRlID09IGRbMF07CiAgICAgICAgICAgIH0pWzBdOwoKICAgICAgICAgICAgdmFyIG5EID0gT2JqZWN0LmtleXMoc3QuZnJlcSkubWFwKGZ1bmN0aW9uIChzKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHsgdHlwZTogcywgZnJlcTogc3QuZnJlcVtzXSB9OwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAgIC8vIGNhbGwgdXBkYXRlIGZ1bmN0aW9ucyBvZiBwaWUtY2hhcnQgYW5kIGxlZ2VuZC4KICAgICAgICAgICAgcEMudXBkYXRlKG5EKTsKICAgICAgICAgICAgbGVnLnVwZGF0ZShuRCk7CiAgICAgICAgICB9CgogICAgICAgICAgZnVuY3Rpb24gbW91c2VvdXQoKSB7CiAgICAgICAgICAgIC8vIHV0aWxpdHkgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIG1vdXNlb3V0LgogICAgICAgICAgICAvLyByZXNldCB0aGUgcGllLWNoYXJ0IGFuZCBsZWdlbmQuCiAgICAgICAgICAgIHBDLnVwZGF0ZSh0Rik7CiAgICAgICAgICAgIGxlZy51cGRhdGUodEYpOwogICAgICAgICAgfQoKICAgICAgICAgIC8vIGNyZWF0ZSBmdW5jdGlvbiB0byB1cGRhdGUgdGhlIGJhcnMuIFRoaXMgd2lsbCBiZSB1c2VkIGJ5IHBpZS1jaGFydC4KICAgICAgICAgIGhHLnVwZGF0ZSA9IGZ1bmN0aW9uIChuRCwgY29sb3IpIHsKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBkb21haW4gb2YgdGhlIHktYXhpcyBtYXAgdG8gcmVmbGVjdCBjaGFuZ2UgaW4gZnJlcXVlbmNpZXMuCiAgICAgICAgICAgIHkuZG9tYWluKFsKICAgICAgICAgICAgICAwLAogICAgICAgICAgICAgIGQzLm1heChuRCwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICAgIHJldHVybiBkWzFdOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICBdKTsKCiAgICAgICAgICAgIC8vIEF0dGFjaCB0aGUgbmV3IGRhdGEgdG8gdGhlIGJhcnMuCiAgICAgICAgICAgIHZhciBiYXJzID0gaEdzdmcuc2VsZWN0QWxsKCIuYmFyIikuZGF0YShuRCk7CgogICAgICAgICAgICAvLyB0cmFuc2l0aW9uIHRoZSBoZWlnaHQgYW5kIGNvbG9yIG9mIHJlY3RhbmdsZXMuCiAgICAgICAgICAgIGJhcnMKICAgICAgICAgICAgICAuc2VsZWN0KCJyZWN0IikKICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMCkKICAgICAgICAgICAgICAuYXR0cigieSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICByZXR1cm4geShkWzFdKTsKICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGhHRGltLmggLSB5KGRbMV0pOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmF0dHIoImZpbGwiLCBjb2xvcik7CgogICAgICAgICAgICAvLyB0cmFuc2l0aW9uIHRoZSBmcmVxdWVuY3kgbGFiZWxzIGxvY2F0aW9uIGFuZCBjaGFuZ2UgdmFsdWUuCiAgICAgICAgICAgIGJhcnMKICAgICAgICAgICAgICAuc2VsZWN0KCJ0ZXh0IikKICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMCkKICAgICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgiLCIpKGRbMV0pOwogICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIHkoZFsxXSkgLSA1OwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgfTsKICAgICAgICAgIHJldHVybiBoRzsKICAgICAgICB9CgogICAgICAgIC8vIGZ1bmN0aW9uIHRvIGhhbmRsZSBwaWVDaGFydC4KICAgICAgICBmdW5jdGlvbiBwaWVDaGFydChwRCkgewogICAgICAgICAgdmFyIHBDID0ge30sCiAgICAgICAgICAgIHBpZURpbSA9IHsgdzogMjUwLCBoOiAyNTAgfTsKICAgICAgICAgIHBpZURpbS5yID0gTWF0aC5taW4ocGllRGltLncsIHBpZURpbS5oKSAvIDI7CiAgICAgICAgICAvLyBjcmVhdGUgc3ZnIGZvciBwaWUgY2hhcnQuCiAgICAgICAgICB2YXIgcGllc3ZnID0gZDMKICAgICAgICAgICAgLnNlbGVjdChpZCkKICAgICAgICAgICAgLmFwcGVuZCgic3ZnIikKICAgICAgICAgICAgLmF0dHIoIndpZHRoIiwgcGllRGltLncpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCBwaWVEaW0uaCkKICAgICAgICAgICAgLy8gLmF0dHIoInZpZXdCb3giLCBgMCAwIDE1MDAgMjUwYCkKICAgICAgICAgICAgLy8gLmF0dHIoInByZXNlcnZlQXNwZWN0UmF0aW8iLCAieE1pbllNaW4gbWVldCIpCiAgICAgICAgICAgIC8vIC5hdHRyKCJ2aWV3Qm94IiwgYDAgMCAxNTAwIDI1MGApIC8vYDAgMCAxNTAwIDUwMGAKICAgICAgICAgICAgLy8gLmNsYXNzZWQoJ3N2Zy1jb250ZW50MScsIHRydWUpCgogICAgICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAgICAgLmF0dHIoCiAgICAgICAgICAgICAgInRyYW5zZm9ybSIsCiAgICAgICAgICAgICAgInRyYW5zbGF0ZSgiICsgcGllRGltLncgLyAyICsgIiwiICsgcGllRGltLmggLyAyICsgIikiCiAgICAgICAgICAgICk7CgogICAgICAgICAgLy8gY3JlYXRlIGZ1bmN0aW9uIHRvIGRyYXcgdGhlIGFyY3Mgb2YgdGhlIHBpZSBzbGljZXMuCiAgICAgICAgICB2YXIgYXJjID0gZDMKICAgICAgICAgICAgLmFyYygpCiAgICAgICAgICAgIC5vdXRlclJhZGl1cyhwaWVEaW0uciAtIDEwKQogICAgICAgICAgICAuaW5uZXJSYWRpdXMoMCk7CgogICAgICAgICAgLy8gY3JlYXRlIGEgZnVuY3Rpb24gdG8gY29tcHV0ZSB0aGUgcGllIHNsaWNlIGFuZ2xlcy4KICAgICAgICAgIHZhciBwaWUgPSBkMwogICAgICAgICAgICAucGllKCkKICAgICAgICAgICAgLnNvcnQobnVsbCkKICAgICAgICAgICAgLnZhbHVlKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQuZnJlcTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgLy8gRHJhdyB0aGUgcGllIHNsaWNlcy4KICAgICAgICAgIHBpZXN2ZwogICAgICAgICAgICAuc2VsZWN0QWxsKCJwYXRoIikKICAgICAgICAgICAgLmRhdGEocGllKHBEKSkKICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgLmFwcGVuZCgicGF0aCIpCiAgICAgICAgICAgIC5hdHRyKCJkIiwgYXJjKQogICAgICAgICAgICAuZWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBkOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuc3R5bGUoImZpbGwiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBzZWdDb2xvcihkLmRhdGEudHlwZSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5vbigibW91c2VvdmVyIiwgbW91c2VvdmVyKQogICAgICAgICAgICAub24oIm1vdXNlb3V0IiwgbW91c2VvdXQpOwoKICAgICAgICAgIC8vIGNyZWF0ZSBmdW5jdGlvbiB0byB1cGRhdGUgcGllLWNoYXJ0LiBUaGlzIHdpbGwgYmUgdXNlZCBieSBoaXN0b2dyYW0uCiAgICAgICAgICBwQy51cGRhdGUgPSBmdW5jdGlvbiAobkQpIHsKICAgICAgICAgICAgcGllc3ZnCiAgICAgICAgICAgICAgLnNlbGVjdEFsbCgicGF0aCIpCiAgICAgICAgICAgICAgLmRhdGEocGllKG5EKSkKICAgICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgICAgLmR1cmF0aW9uKDUwMCkKICAgICAgICAgICAgICAuYXR0clR3ZWVuKCJkIiwgYXJjVHdlZW4pOwogICAgICAgICAgfTsKICAgICAgICAgIC8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gYmUgY2FsbGVkIG9uIG1vdXNlb3ZlciBhIHBpZSBzbGljZS4KICAgICAgICAgIGZ1bmN0aW9uIG1vdXNlb3ZlcihldmVudCwgZCkgewogICAgICAgICAgICAvLyBjYWxsIHRoZSB1cGRhdGUgZnVuY3Rpb24gb2YgaGlzdG9ncmFtIHdpdGggbmV3IGRhdGEuCiAgICAgICAgICAgIGhHLnVwZGF0ZSgKICAgICAgICAgICAgICBmRGF0YS5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHYpOwogICAgICAgICAgICAgICAgcmV0dXJuIFt2LlN0YXRlLCB2LmZyZXFbZC5kYXRhLnR5cGVdXTsKICAgICAgICAgICAgICB9KSwKICAgICAgICAgICAgICBzZWdDb2xvcihkLmRhdGEudHlwZSkKICAgICAgICAgICAgKTsKICAgICAgICAgIH0KICAgICAgICAgIC8vVXRpbGl0eSBmdW5jdGlvbiB0byBiZSBjYWxsZWQgb24gbW91c2VvdXQgYSBwaWUgc2xpY2UuCiAgICAgICAgICBmdW5jdGlvbiBtb3VzZW91dCgpIHsKICAgICAgICAgICAgLy8gY2FsbCB0aGUgdXBkYXRlIGZ1bmN0aW9uIG9mIGhpc3RvZ3JhbSB3aXRoIGFsbCBkYXRhLgogICAgICAgICAgICBoRy51cGRhdGUoCiAgICAgICAgICAgICAgZkRhdGEubWFwKGZ1bmN0aW9uICh2KSB7CiAgICAgICAgICAgICAgICByZXR1cm4gW3YuU3RhdGUsIHYudG90YWxdOwogICAgICAgICAgICAgIH0pLAogICAgICAgICAgICAgIGJhckNvbG9yCiAgICAgICAgICAgICk7CiAgICAgICAgICB9CiAgICAgICAgICAvLyBBbmltYXRpbmcgdGhlIHBpZS1zbGljZSByZXF1aXJpbmcgYSBjdXN0b20gZnVuY3Rpb24gd2hpY2ggc3BlY2lmaWVzCiAgICAgICAgICAvLyBob3cgdGhlIGludGVybWVkaWF0ZSBwYXRocyBzaG91bGQgYmUgZHJhd24uCiAgICAgICAgICBmdW5jdGlvbiBhcmNUd2VlbihhKSB7CiAgICAgICAgICAgIHZhciBpID0gZDMuaW50ZXJwb2xhdGUodGhpcy5fY3VycmVudCwgYSk7CiAgICAgICAgICAgIHRoaXMuX2N1cnJlbnQgPSBpKDApOwogICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICByZXR1cm4gYXJjKGkodCkpOwogICAgICAgICAgICB9OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIHBDOwogICAgICAgIH0KCiAgICAgICAgLy8gZnVuY3Rpb24gdG8gaGFuZGxlIGxlZ2VuZC4KICAgICAgICBmdW5jdGlvbiBsZWdlbmQobEQpIHsKICAgICAgICAgIHZhciBsZWcgPSB7fTsKCiAgICAgICAgICAvLyBjcmVhdGUgdGFibGUgZm9yIGxlZ2VuZC4KICAgICAgICAgIHZhciBsZWdlbmQgPSBkMy5zZWxlY3QoaWQpLmFwcGVuZCgidGFibGUiKS5hdHRyKCJjbGFzcyIsICJsZWdlbmQiKTsKCiAgICAgICAgICAvLyBjcmVhdGUgb25lIHJvdyBwZXIgc2VnbWVudC4KICAgICAgICAgIHZhciB0ciA9IGxlZ2VuZAogICAgICAgICAgICAuYXBwZW5kKCJ0Ym9keSIpCiAgICAgICAgICAgIC5zZWxlY3RBbGwoInRyIikKICAgICAgICAgICAgLmRhdGEobEQpCiAgICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAgIC5hcHBlbmQoInRyIik7CgogICAgICAgICAgLy8gY3JlYXRlIHRoZSBmaXJzdCBjb2x1bW4gZm9yIGVhY2ggc2VnbWVudC4KICAgICAgICAgIHRyLmFwcGVuZCgidGQiKQogICAgICAgICAgICAuYXBwZW5kKCJzdmciKQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCAiMTYiKQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgIjE2IikKICAgICAgICAgICAgLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsICIxNiIpCiAgICAgICAgICAgIC5hdHRyKCJoZWlnaHQiLCAiMTYiKQogICAgICAgICAgICAuYXR0cigiZmlsbCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHNlZ0NvbG9yKGQudHlwZSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgc2Vjb25kIGNvbHVtbiBmb3IgZWFjaCBzZWdtZW50LgogICAgICAgICAgdHIuYXBwZW5kKCJ0ZCIpLnRleHQoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQudHlwZTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIGNyZWF0ZSB0aGUgdGhpcmQgY29sdW1uIGZvciBlYWNoIHNlZ21lbnQuCiAgICAgICAgICB0ci5hcHBlbmQoInRkIikKICAgICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZEZyZXEiKQogICAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBkMy5mb3JtYXQoIiwiKShkLmZyZXEpOwogICAgICAgICAgICB9KTsKCiAgICAgICAgICAvLyBjcmVhdGUgdGhlIGZvdXJ0aCBjb2x1bW4gZm9yIGVhY2ggc2VnbWVudC4KICAgICAgICAgIHRyLmFwcGVuZCgidGQiKQogICAgICAgICAgICAuYXR0cigiY2xhc3MiLCAibGVnZW5kUGVyYyIpCiAgICAgICAgICAgIC50ZXh0KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGdldExlZ2VuZChkLCBsRCk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgIC8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gYmUgdXNlZCB0byB1cGRhdGUgdGhlIGxlZ2VuZC4KICAgICAgICAgIGxlZy51cGRhdGUgPSBmdW5jdGlvbiAobkQpIHsKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBkYXRhIGF0dGFjaGVkIHRvIHRoZSByb3cgZWxlbWVudHMuCiAgICAgICAgICAgIHZhciBsID0gbGVnZW5kLnNlbGVjdCgidGJvZHkiKS5zZWxlY3RBbGwoInRyIikuZGF0YShuRCk7CgogICAgICAgICAgICAvLyB1cGRhdGUgdGhlIGZyZXF1ZW5jaWVzLgogICAgICAgICAgICBsLnNlbGVjdCgiLmxlZ2VuZEZyZXEiKS50ZXh0KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGQzLmZvcm1hdCgiLCIpKGQuZnJlcSk7CiAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgLy8gdXBkYXRlIHRoZSBwZXJjZW50YWdlIGNvbHVtbi4KICAgICAgICAgICAgbC5zZWxlY3QoIi5sZWdlbmRQZXJjIikudGV4dChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgIHJldHVybiBnZXRMZWdlbmQoZCwgbkQpOwogICAgICAgICAgICB9KTsKICAgICAgICAgIH07CgogICAgICAgICAgZnVuY3Rpb24gZ2V0TGVnZW5kKGQsIGFEKSB7CiAgICAgICAgICAgIC8vIFV0aWxpdHkgZnVuY3Rpb24gdG8gY29tcHV0ZSBwZXJjZW50YWdlLgogICAgICAgICAgICByZXR1cm4gZDMuZm9ybWF0KCIuMCUiKSgKICAgICAgICAgICAgICBkLmZyZXEgLwogICAgICAgICAgICAgICAgZDMuc3VtKAogICAgICAgICAgICAgICAgICBhRC5tYXAoZnVuY3Rpb24gKHYpIHsKICAgICAgICAgICAgICAgICAgICByZXR1cm4gdi5mcmVxOwogICAgICAgICAgICAgICAgICB9KQogICAgICAgICAgICAgICAgKQogICAgICAgICAgICApOwogICAgICAgICAgfQoKICAgICAgICAgIHJldHVybiBsZWc7CiAgICAgICAgfQogICAgICAgIC8vIGNhbGN1bGF0ZSB0b3RhbCBmcmVxdWVuY3kgYnkgc2VnbWVudCBmb3IgYWxsIHN0YXRlLgogICAgICAgIC8vIHZhciB0RiA9IFsibG93IiwgIm1pZCIsICJoaWdoIl0KICAgICAgICB2YXIgdEYgPSBbIkZlbWFsZSIsICJNYWxlIiwgIlVua25vd24iXS5tYXAoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIHR5cGU6IGQsCiAgICAgICAgICAgIGZyZXE6IGQzLnN1bSgKICAgICAgICAgICAgICBmRGF0YS5tYXAoZnVuY3Rpb24gKHQpIHsKICAgICAgICAgICAgICAgIHJldHVybiB0LmZyZXFbZF07CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKSwKICAgICAgICAgIH07CiAgICAgICAgfSk7CiAgICAgICAgLy8gY2FsY3VsYXRlIHRvdGFsIGZyZXF1ZW5jeSBieSBzdGF0ZSBmb3IgYWxsIHNlZ21lbnQuCiAgICAgICAgdmFyIHNGID0gZkRhdGEubWFwKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gW2QuU3RhdGUsIGQudG90YWxdOwogICAgICAgIH0pOwoKICAgICAgICB2YXIgaEcgPSBoaXN0b0dyYW0oc0YpLCAvLyBjcmVhdGUgdGhlIGhpc3RvZ3JhbS4KICAgICAgICAgIHBDID0gcGllQ2hhcnQodEYpLCAvLyBjcmVhdGUgdGhlIHBpZS1jaGFydC4KICAgICAgICAgIGxlZyA9IGxlZ2VuZCh0Rik7IC8vIGNyZWF0ZSB0aGUgbGVnZW5kLgogICAgICB9CiAgICAgIC8vIHZhciBmcmVxRGF0YSA9IFsKICAgICAgLy8gICB7IFN0YXRlOiAiQU0iLCBmcmVxOiB7IGxvdzogMTAuOSwgbWlkOiAxMS4zLCBoaWdoOiA4LjEgfSB9LAogICAgICAvLyAgIHsgU3RhdGU6ICJCQSIsIGZyZXE6IHsgbG93OiAxMS40LCBtaWQ6IDEyLjIsIGhpZ2g6IDExLjggfSB9LAogICAgICAvLyAgIHsgU3RhdGU6ICJDRSIsIGZyZXE6IHsgbG93OiA4LjYsIG1pZDogNy43LCBoaWdoOiA3LjEgfSB9LAogICAgICAvLyAgIHsgU3RhdGU6ICJERiIsIGZyZXE6IHsgbG93OiAyMC45LCBtaWQ6IDEzLCBoaWdoOiAxNi4xIH0gfSwKICAgICAgLy8gICB7IFN0YXRlOiAiRVMiLCBmcmVxOiB7IGxvdzogMTAuMywgbWlkOiAxMC45LCBoaWdoOiAxNC41IH0gfSwKICAgICAgLy8gICB7IFN0YXRlOiAiR08iLCBmcmVxOiB7IGxvdzogMTAuNSwgbWlkOiAxMS40LCBoaWdoOiAxMy4zIH0gfSwKICAgICAgLy8gXTsKICAgICAgdmFyIGZyZXFEYXRhID0gWwogICAgICAgIHsKICAgICAgICAgIFN0YXRlOiAiMCAtIDEwIiwKICAgICAgICAgIGZyZXE6IHsKICAgICAgICAgICAgRmVtYWxlOiAxMjAyNCwKICAgICAgICAgICAgTWFsZTogMTAyNzUsCiAgICAgICAgICAgIFVua25vd246IDMwMCwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBTdGF0ZTogIjExIC0gMjAiLAogICAgICAgICAgZnJlcTogewogICAgICAgICAgICBGZW1hbGU6IDkyMDEwLAogICAgICAgICAgICBNYWxlOiA3MDE2NSwKICAgICAgICAgICAgVW5rbm93bjogNTAyNywKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBTdGF0ZTogIjIxIC0gMzAiLAogICAgICAgICAgZnJlcTogewogICAgICAgICAgICBGZW1hbGU6IDI0NTczOCwKICAgICAgICAgICAgTWFsZTogMjA2MTc3LAogICAgICAgICAgICBVbmtub3duOiAyMjIsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgU3RhdGU6ICIzMSAtIDQwIiwKICAgICAgICAgIGZyZXE6IHsKICAgICAgICAgICAgRmVtYWxlOiAxOTE3MzksCiAgICAgICAgICAgIE1hbGU6IDE5MzkzMCwKICAgICAgICAgICAgVW5rbm93bjogMTUyLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIFN0YXRlOiAiNDEgLSA1MCIsCiAgICAgICAgICBmcmVxOiB7CiAgICAgICAgICAgIEZlbWFsZTogMTQ3NzI2LAogICAgICAgICAgICBNYWxlOiAxNjM5MTUsCiAgICAgICAgICAgIFVua25vd246IDEwMSwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBTdGF0ZTogIjUxIC0gNjAiLAogICAgICAgICAgZnJlcTogewogICAgICAgICAgICBGZW1hbGU6IDEwNDUxNywKICAgICAgICAgICAgTWFsZTogMTI3MzczLAogICAgICAgICAgICBVbmtub3duOiA4MCwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBTdGF0ZTogIjYxIC0gNzAiLAogICAgICAgICAgZnJlcTogewogICAgICAgICAgICBGZW1hbGU6IDUxMjkxLAogICAgICAgICAgICBNYWxlOiA2MTU0MCwKICAgICAgICAgICAgVW5rbm93bjogMzMsCiAgICAgICAgICB9LAogICAgICAgIH0sCiAgICAgICAgewogICAgICAgICAgU3RhdGU6ICI3MSAtIDgwIiwKICAgICAgICAgIGZyZXE6IHsKICAgICAgICAgICAgRmVtYWxlOiAyMDkwMSwKICAgICAgICAgICAgTWFsZTogMjEzMzEsCiAgICAgICAgICAgIFVua25vd246IDEyLAogICAgICAgICAgfSwKICAgICAgICB9LAogICAgICAgIHsKICAgICAgICAgIFN0YXRlOiAiODEgLSA5MCIsCiAgICAgICAgICBmcmVxOiB7CiAgICAgICAgICAgIEZlbWFsZTogODU1OCwKICAgICAgICAgICAgTWFsZTogNjc0NSwKICAgICAgICAgICAgVW5rbm93bjogMiwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgICB7CiAgICAgICAgICBTdGF0ZTogIjkxIC0gMTAwIiwKICAgICAgICAgIGZyZXE6IHsKICAgICAgICAgICAgRmVtYWxlOiAxOTQzLAogICAgICAgICAgICBNYWxlOiAxNDc0LAogICAgICAgICAgICBVbmtub3duOiAzOCwKICAgICAgICAgIH0sCiAgICAgICAgfSwKICAgICAgXTsKCiAgICAgIGRhc2hib2FyZCgiI2Rhc2hib2FyZCIsIGZyZXFEYXRhKTsKICAgIH0sCiAgICBiYXJDaGFydChkYXRhKSB7CiAgICAgIHZhciB3aWR0aCA9IDYwMDsKICAgICAgdmFyIGhlaWdodCA9IHdpZHRoOwoKICAgICAgdmFyIHBhY2sgPSAoZGF0YSkgPT4KICAgICAgICBkMy5wYWNrKCkuc2l6ZShbd2lkdGgsIGhlaWdodF0pLnBhZGRpbmcoMykoCiAgICAgICAgICBkMwogICAgICAgICAgICAuaGllcmFyY2h5KGRhdGEpCiAgICAgICAgICAgIC5zdW0oKGQpID0+IGQudmFsdWUpCiAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLnZhbHVlIC0gYS52YWx1ZSkKICAgICAgICApOwogICAgICB2YXIgY29sb3IgPSBkMwogICAgICAgIC5zY2FsZUxpbmVhcigpCiAgICAgICAgLmRvbWFpbihbMCwgNV0pCiAgICAgICAgLy8gLnJhbmdlKFsiaHNsKDE1Miw4MCUsODAlKSIsICJoc2woMjI4LDMwJSw0MCUpIl0pCiAgICAgICAgLy8gLnJhbmdlKFsiI2ZmZjdlYyIsIiM3ZjAwMDAiXSkKICAgICAgICAucmFuZ2UoWyIjZmVlOGM4IiwgIiM3ZjAwMDAiXSkKCiAgICAgICAgLmludGVycG9sYXRlKGQzLmludGVycG9sYXRlSHNsTG9uZyk7CgogICAgICBjb25zdCByb290ID0gcGFjayhkYXRhKTsKICAgICAgbGV0IGZvY3VzID0gcm9vdDsKICAgICAgbGV0IHZpZXc7CgogICAgICB2YXIgc3ZnID0gZDMKICAgICAgICAuc2VsZWN0KCIjY2hhcnQiKQogICAgICAgIC5hdHRyKCJ3aWR0aCIsIDYwMCkKICAgICAgICAuYXR0cigiaGVpZ2h0IiwgNjAwKQogICAgICAgIC5hdHRyKCJ2aWV3Qm94IiwgYC0ke3dpZHRoIC8gMn0gLSR7aGVpZ2h0IC8gMn0gJHt3aWR0aH0gJHtoZWlnaHR9YCkKICAgICAgICAuc3R5bGUoImRpc3BsYXkiLCAiYmxvY2siKQogICAgICAgIC5zdHlsZSgibWFyZ2luIiwgIjAgKzE0cHgiKQogICAgICAgIC8vIC5zdHlsZSgiYmFja2dyb3VuZCIsIGNvbG9yKDApKQogICAgICAgIC5zdHlsZSgiY3Vyc29yIiwgInBvaW50ZXIiKQogICAgICAgIC5vbigiY2xpY2siLCAoZXZlbnQpID0+IHpvb20oZXZlbnQsIHJvb3QpKTsKCiAgICAgIHZhciBub2RlID0gc3ZnCiAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgLnNlbGVjdEFsbCgiY2lyY2xlIikKICAgICAgICAuZGF0YShyb290LmRlc2NlbmRhbnRzKCkuc2xpY2UoMSkpCiAgICAgICAgLmpvaW4oImNpcmNsZSIpCiAgICAgICAgLmF0dHIoImZpbGwiLCAoZCkgPT4gKGQuY2hpbGRyZW4gPyBjb2xvcihkLmRlcHRoKSA6ICJ3aGl0ZSIpKQogICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsIChkKSA9PiAoIWQuY2hpbGRyZW4gPyAibm9uZSIgOiBudWxsKSkKICAgICAgICAub24oIm1vdXNlb3ZlciIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJzdHJva2UiLCAiIzAwMCIpOwogICAgICAgIH0pCiAgICAgICAgLm9uKCJtb3VzZW91dCIsIGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGQzLnNlbGVjdCh0aGlzKS5hdHRyKCJzdHJva2UiLCBudWxsKTsKICAgICAgICB9KQogICAgICAgIC5vbigKICAgICAgICAgICJjbGljayIsCiAgICAgICAgICAoZXZlbnQsIGQpID0+IGZvY3VzICE9PSBkICYmICh6b29tKGV2ZW50LCBkKSwgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCkpCiAgICAgICAgKTsKCiAgICAgIHZhciBsYWJlbCA9IHN2ZwogICAgICAgIC5hcHBlbmQoImciKQogICAgICAgIC5zdHlsZSgiZm9udCIsICIxMHB4IHNhbnMtc2VyaWYiKQogICAgICAgIC5hdHRyKCJwb2ludGVyLWV2ZW50cyIsICJub25lIikKICAgICAgICAuYXR0cigidGV4dC1hbmNob3IiLCAibWlkZGxlIikKICAgICAgICAuc2VsZWN0QWxsKCJ0ZXh0IikKICAgICAgICAuZGF0YShyb290LmRlc2NlbmRhbnRzKCkpCiAgICAgICAgLmpvaW4oInRleHQiKQogICAgICAgIC5zdHlsZSgiZmlsbC1vcGFjaXR5IiwgKGQpID0+IChkLnBhcmVudCA9PT0gcm9vdCA/IDEgOiAwKSkKICAgICAgICAuc3R5bGUoImRpc3BsYXkiLCAoZCkgPT4gKGQucGFyZW50ID09PSByb290ID8gImlubGluZSIgOiAibm9uZSIpKQogICAgICAgIC50ZXh0KChkKSA9PiBkLmRhdGEubmFtZSk7CgogICAgICB6b29tVG8oW3Jvb3QueCwgcm9vdC55LCByb290LnIgKiAyXSk7CgogICAgICBmdW5jdGlvbiB6b29tVG8odikgewogICAgICAgIHZhciBrID0gd2lkdGggLyB2WzJdOwoKICAgICAgICB2aWV3ID0gdjsKICAgICAgICBsYWJlbC5hdHRyKAogICAgICAgICAgInRyYW5zZm9ybSIsCiAgICAgICAgICAoZCkgPT4gYHRyYW5zbGF0ZSgkeyhkLnggLSB2WzBdKSAqIGt9LCR7KGQueSAtIHZbMV0pICoga30pYAogICAgICAgICk7CiAgICAgICAgbm9kZS5hdHRyKAogICAgICAgICAgInRyYW5zZm9ybSIsCiAgICAgICAgICAoZCkgPT4gYHRyYW5zbGF0ZSgkeyhkLnggLSB2WzBdKSAqIGt9LCR7KGQueSAtIHZbMV0pICoga30pYAogICAgICAgICk7CiAgICAgICAgbm9kZS5hdHRyKCJyIiwgKGQpID0+IGQuciAqIGspOwogICAgICB9CgogICAgICBmdW5jdGlvbiB6b29tKGV2ZW50LCBkKSB7CiAgICAgICAgLy8gdmFyIGZvY3VzMCA9IGZvY3VzOwoKICAgICAgICBmb2N1cyA9IGQ7CgogICAgICAgIHZhciB0cmFuc2l0aW9uID0gc3ZnCiAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAuZHVyYXRpb24oZXZlbnQuYWx0S2V5ID8gNzUwMCA6IDc1MCkKICAgICAgICAgIC50d2Vlbigiem9vbSIsIChkKSA9PiB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKGQpOwogICAgICAgICAgICB2YXIgaSA9IGQzLmludGVycG9sYXRlWm9vbSh2aWV3LCBbZm9jdXMueCwgZm9jdXMueSwgZm9jdXMuciAqIDJdKTsKICAgICAgICAgICAgcmV0dXJuICh0KSA9PiB6b29tVG8oaSh0KSk7CiAgICAgICAgICB9KTsKCiAgICAgICAgbGFiZWwKICAgICAgICAgIC5maWx0ZXIoZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgcmV0dXJuIGQucGFyZW50ID09PSBmb2N1cyB8fCB0aGlzLnN0eWxlLmRpc3BsYXkgPT09ICJpbmxpbmUiOwogICAgICAgICAgfSkKICAgICAgICAgIC50cmFuc2l0aW9uKHRyYW5zaXRpb24pCiAgICAgICAgICAuc3R5bGUoImZpbGwtb3BhY2l0eSIsIChkKSA9PiAoZC5wYXJlbnQgPT09IGZvY3VzID8gMSA6IDApKQogICAgICAgICAgLm9uKCJzdGFydCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIGlmIChkLnBhcmVudCA9PT0gZm9jdXMpIHRoaXMuc3R5bGUuZGlzcGxheSA9ICJpbmxpbmUiOwogICAgICAgICAgfSkKICAgICAgICAgIC5vbigiZW5kIiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgaWYgKGQucGFyZW50ICE9PSBmb2N1cykgdGhpcy5zdHlsZS5kaXNwbGF5ID0gIm5vbmUiOwogICAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCiAgICBIZWF0TWFwKCkgewogICAgICBtYXBib3hnbC5hY2Nlc3NUb2tlbiA9IHRoaXMuYWNjZXNzVG9rZW47CiAgICAgIHZhciBtYXAgPSBuZXcgbWFwYm94Z2wuTWFwKHsKICAgICAgICBjb250YWluZXI6ICJtYXAiLAogICAgICAgIHN0eWxlOiAibWFwYm94Oi8vc3R5bGVzL21hcGJveC9kYXJrLXYxMCIsCiAgICAgICAgY2VudGVyOiBbLTExOC4zLCAzNF0sCiAgICAgICAgem9vbTogOSwKICAgICAgICAvLyBtYXhCb3VuZHM6IFsKICAgICAgICAvLyAgICAgWzEwMy42LCAxLjE3MDQ3NTNdLAogICAgICAgIC8vICAgICBbMTA0LjEsIDEuNDc1NDc1M10sCiAgICAgICAgLy8gXSwKICAgICAgfSk7CgogICAgICBtYXAub24oImxvYWQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgLy8gQWRkIGEgZ2VvanNvbiBwb2ludCBzb3VyY2UuCiAgICAgICAgLy8gSGVhdG1hcCBsYXllcnMgYWxzbyB3b3JrIHdpdGggYSB2ZWN0b3IgdGlsZSBzb3VyY2UuCiAgICAgICAgbWFwLmFkZFNvdXJjZSgiZWFydGhxdWFrZXMiLCB7CiAgICAgICAgICB0eXBlOiAiZ2VvanNvbiIsCiAgICAgICAgICBkYXRhOiAiY3JpbWVfbWFwYm94Lmdlb2pzb24iLAogICAgICAgIH0pOwoKICAgICAgICBtYXAuYWRkTGF5ZXIoCiAgICAgICAgICB7CiAgICAgICAgICAgIGlkOiAiZWFydGhxdWFrZXMtaGVhdCIsCiAgICAgICAgICAgIHR5cGU6ICJoZWF0bWFwIiwKICAgICAgICAgICAgc291cmNlOiAiZWFydGhxdWFrZXMiLAogICAgICAgICAgICBtYXh6b29tOiAxMSwKICAgICAgICAgICAgcGFpbnQ6IHsKICAgICAgICAgICAgICAvLyBJbmNyZWFzZSB0aGUgaGVhdG1hcCB3ZWlnaHQgYmFzZWQgb24gZnJlcXVlbmN5IGFuZCBwcm9wZXJ0eSBtYWduaXR1ZGUKICAgICAgICAgICAgICAiaGVhdG1hcC13ZWlnaHQiOiBbCiAgICAgICAgICAgICAgICAiaW50ZXJwb2xhdGUiLAogICAgICAgICAgICAgICAgWyJsaW5lYXIiXSwKICAgICAgICAgICAgICAgIFsiZ2V0IiwgIm1hZyJdLAogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAzLAogICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgIC8vIEluY3JlYXNlIHRoZSBoZWF0bWFwIGNvbG9yIHdlaWdodCB3ZWlnaHQgYnkgem9vbSBsZXZlbAogICAgICAgICAgICAgIC8vIGhlYXRtYXAtaW50ZW5zaXR5IGlzIGEgbXVsdGlwbGllciBvbiB0b3Agb2YgaGVhdG1hcC13ZWlnaHQKICAgICAgICAgICAgICAiaGVhdG1hcC1pbnRlbnNpdHkiOiBbCiAgICAgICAgICAgICAgICAiaW50ZXJwb2xhdGUiLAogICAgICAgICAgICAgICAgWyJsaW5lYXIiXSwKICAgICAgICAgICAgICAgIFsiem9vbSJdLAogICAgICAgICAgICAgICAgMCwKICAgICAgICAgICAgICAgIDEsCiAgICAgICAgICAgICAgICAxOCwKICAgICAgICAgICAgICAgIDQsCiAgICAgICAgICAgICAgXSwKICAgICAgICAgICAgICAvLyBDb2xvciByYW1wIGZvciBoZWF0bWFwLiAgRG9tYWluIGlzIDAgKGxvdykgdG8gMSAoaGlnaCkuCiAgICAgICAgICAgICAgLy8gQmVnaW4gY29sb3IgcmFtcCBhdCAwLXN0b3Agd2l0aCBhIDAtdHJhbnNwYXJhbmN5IGNvbG9yCiAgICAgICAgICAgICAgLy8gdG8gY3JlYXRlIGEgYmx1ci1saWtlIGVmZmVjdC4KICAgICAgICAgICAgICAiaGVhdG1hcC1jb2xvciI6IFsKICAgICAgICAgICAgICAgICJpbnRlcnBvbGF0ZSIsCiAgICAgICAgICAgICAgICBbImxpbmVhciJdLAogICAgICAgICAgICAgICAgWyJoZWF0bWFwLWRlbnNpdHkiXSwKICAgICAgICAgICAgICAgIDAsCiAgICAgICAgICAgICAgICAicmdiYSgzMywxMDIsMTcyLDApIiwKICAgICAgICAgICAgICAgIDAuMDUsCiAgICAgICAgICAgICAgICAiI2ZkZDQ5ZSIsCiAgICAgICAgICAgICAgICAwLjEsCiAgICAgICAgICAgICAgICAiI2ZkYmI4NCIsCiAgICAgICAgICAgICAgICAwLjMsCiAgICAgICAgICAgICAgICAiI2ZjOGQ1OSIsCiAgICAgICAgICAgICAgICAwLjYsCiAgICAgICAgICAgICAgICAiI2VmNjU0OCIsCgogICAgICAgICAgICAgICAgMC44LAogICAgICAgICAgICAgICAgIiNkNzMwMWYiLAogICAgICAgICAgICAgICAgMSwKICAgICAgICAgICAgICAgICIjOTkwMDAwIiwKICAgICAgICAgICAgICBdLAoKICAgICAgICAgICAgICAvLyBBZGp1c3QgdGhlIGhlYXRtYXAgcmFkaXVzIGJ5IHpvb20gbGV2ZWwKICAgICAgICAgICAgICAiaGVhdG1hcC1yYWRpdXMiOiBbCiAgICAgICAgICAgICAgICAiaW50ZXJwb2xhdGUiLAogICAgICAgICAgICAgICAgWyJsaW5lYXIiXSwKICAgICAgICAgICAgICAgIFsiem9vbSJdLAogICAgICAgICAgICAgICAgMjAsCiAgICAgICAgICAgICAgICAyMCwKICAgICAgICAgICAgICAgIDgwLAogICAgICAgICAgICAgICAgMTAwLAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgICAgLy8gVHJhbnNpdGlvbiBmcm9tIGhlYXRtYXAgdG8gY2lyY2xlIGxheWVyIGJ5IHpvb20gbGV2ZWwKICAgICAgICAgICAgICAiaGVhdG1hcC1vcGFjaXR5IjogWwogICAgICAgICAgICAgICAgImludGVycG9sYXRlIiwKICAgICAgICAgICAgICAgIFsibGluZWFyIl0sCiAgICAgICAgICAgICAgICBbInpvb20iXSwKICAgICAgICAgICAgICAgIDcsCiAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgICAgMzAsCiAgICAgICAgICAgICAgICAxLAogICAgICAgICAgICAgIF0sCiAgICAgICAgICAgIH0sCiAgICAgICAgICB9LAogICAgICAgICAgIndhdGVyd2F5LWxhYmVsIgogICAgICAgICk7CiAgICAgIH0pOwogICAgfSwKICB9LAogIG1vdW50ZWQ6IGZ1bmN0aW9uICgpIHsKICAgIGNvbnNvbGUubG9nKCJtb3VudGVkIik7CiAgICB0aGlzLkNyaW1lQ2hhcnQoKTsKICAgIGlmICghdGhpcy4kc3RvcmUuc3RhdGUudnVlQ2hhcnREYXRhKSB7CiAgICAgIGQzLmpzb24oImNpcmNsZV9jaGFydF9kYXRhLmpzb24iKS50aGVuKChkYXRhKSA9PiB7CiAgICAgICAgdGhpcy5kYXRhID0gZGF0YTsKICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hhcnREYXRhIHNldCBmcm9tIGZpbGUnKTsKICAgICAgICAvLyBjb25zb2xlLmxvZygnY2hhcnREYXRhIGNvbnRhaW5zJywgdGhpcy5kYXRhLmxlbmd0aCwgJ3Jvd3MnKTsKICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoInZ1ZUNoYXJ0RGF0YSIsIHRoaXMuZGF0YSk7CiAgICAgICAgLy8gY29uc29sZS5sb2codGhpcy5kYXRhKTsKICAgICAgICB0aGlzLmJhckNoYXJ0KHRoaXMuZGF0YSk7CiAgICAgIH0pOwogICAgfSBlbHNlIHsKICAgICAgdGhpcy5kYXRhID0gdGhpcy4kc3RvcmUuc3RhdGUudnVlQ2hhcnREYXRhOwogICAgICAvLyBjb25zb2xlLmxvZygnY2hhcnREYXRhIHNldCBmcm9tIHN0b3JlJyk7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGFydERhdGEgY29udGFpbnMnLCB0aGlzLmRhdGEubGVuZ3RoLCAncm93cycpOwogICAgICB0aGlzLmJhckNoYXJ0KHRoaXMuZGF0YSk7CiAgICB9CiAgICB0aGlzLkhlYXRNYXAoKTsKICB9LAp9Owo="},{"version":3,"sources":["MapBox.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"MapBox.vue","sourceRoot":"src/views","sourcesContent":["<script src=\"https://api.mapbox.com/mapbox-gl-js/v1.12.0/mapbox-gl.js\"></script>\n<template>\n  <div class=\"MapBox\">\n    <div class=\"jumbotron\">\n      <p style=\"font-size: 110%\">\n        <b>\n          On this page, we have focused on analyzing the crime data. From the\n          crime data, we aim to understand the relationship between the\n          different attributes such as neighborhoods, victim demographic and the\n          crime frequency. On this page, the users can interact with the\n          visualizations to better infer the patterns between crime frequency\n          and victim demographic in different neighborhoods in Los Angeles.\n        </b>\n      </p>\n      <br />\n      <h4>Crime Frequency by Age and Gender</h4>\n      <p>\n        The first chart indicates the frequency of crime taking place by age and\n        gender. Through this we can understand which gender is hit worse in\n        every age group.\n      </p>\n      <p>\n        * Hover over the pie chart for specific gender distribution information\n      </p>\n      <p>* Hover over the bars for specific age distribution information</p>\n      <div id=\"dashboard\"></div>\n      <br /><br />\n      <!-- <br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br> -->\n      <h4>Crime by Neighborhood and Victim's Race</h4>\n      <p>\n        This zoomable circle packing shows the crime by neighborhood and\n        victimâ€™s race. Through this we can determine the race that is affected\n        most in every neighborhood.\n      </p>\n      <p>* Click on any Neighborhood for analysis by Victim's Race</p>\n      <div>\n        <center>\n          <svg width=\"400\" height=\"300\" id=\"chart\"></svg>\n        </center>\n      </div>\n      <br /><br />\n      <h4>Heat Map Indicating Crime Frequency for LA County</h4>\n      <p>\n        This chart shows the intensity of crime taking place in all the\n        neighborhoods of LA. This gives us an overview of safe and unsafe\n        neighborhoods relative to each other.\n      </p>\n      <p>* For specific information, zoom over the map</p>\n      <meta\n        name=\"viewport\"\n        content=\"initial-scale=1,maximum-scale=1,user-scalable=no\"\n      />\n      <br />\n      <div class=\"mapbox_container\">\n        <div id=\"map\"></div>\n      </div>\n      <br />\n    </div>\n  </div>\n</template>\n<script>\nimport * as d3 from \"d3\";\nimport mapboxgl from \"mapbox-gl\";\n\nexport default {\n  name: \"MapBox\",\n  data: function () {\n    return {\n      accessToken:\n        \"pk.eyJ1IjoibWFuYW5pZXRlIiwiYSI6ImNrZ2l3MGlqbDAxbW0ydG96YzY0OHp4YjYifQ.fQx_eMJ8KeqXd-UIUc0Rbw\",\n    };\n  },\n  methods: {\n    CrimeChart() {\n      function dashboard(id, fData) {\n        var barColor = \"#fdae61\";\n        function segColor(c) {\n          return {\n            Female: \"#35978f\",\n            Male: \"#bf812d\",\n            Unknown: \"#737373\",\n          }[c];\n          // return { low: \"#807dba\", mid: \"#e08214\", high: \"#41ab5d\" }[c];\n        }\n\n        // compute total for each state.\n        fData.forEach(function (d) {\n          d.total = d.freq.Female + d.freq.Male + d.freq.Unknown;\n        });\n\n        // function to handle histogram.\n        function histoGram(fD) {\n          console.log(fD);\n          var hG = {},\n            hGDim = { t: 60, r: 0, b: 40, l: 20 };\n          (hGDim.w = 800 - hGDim.l - hGDim.r),\n            (hGDim.h = 500 - hGDim.t - hGDim.b);\n\n          // var aspectRatio= '16:9';\n          // var viewBox = '0 0 ' + aspectRatio.split(':').join(' ');\n\n          //create svg for histogram.\n          var hGsvg = d3\n            .select(id)\n            .append(\"svg\")\n            .attr(\"width\", hGDim.w + hGDim.l + hGDim.r)\n            .attr(\"height\", hGDim.h + hGDim.t + hGDim.b)\n            // .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n            // .attr(\"viewBox\", `0 0 1500 500`) //`0 0 1500 500`\n            // .classed('svg-content', true)\n            .append(\"g\")\n            .attr(\"transform\", \"translate(\" + hGDim.l + \",\" + hGDim.t + \")\");\n\n          // create function for x-axis mapping.\n          var x = d3\n            .scaleBand()\n            .rangeRound([0, hGDim.w])\n            .padding(0.1)\n            .domain(\n              fD.map(function (d) {\n                return d[0];\n              })\n            );\n\n          // Add x-axis to the histogram svg.\n          hGsvg\n            .append(\"g\")\n            .attr(\"class\", \"x axis\")\n            .attr(\"transform\", \"translate(0,\" + hGDim.h + \")\")\n            .call(d3.axisBottom(x));\n\n          // hGsvg\n          //   .append(\"g\")\n          //   .attr(\"class\", \"x axis\")\n          //   .selectAll(\"text\")\n          //   .append(\"text\")\n          //   .text(\"Age\")\n\n          // x => `(${x.toFixed(1)}\n          // Create function for y-axis map.\n          var y = d3\n            .scaleLinear()\n            .range([hGDim.h, 0])\n            .domain([\n              0,\n              d3.max(fD, function (d) {\n                return d[1];\n              }),\n            ]);\n\n          // Create bars for histogram to contain rectangles and freq labels.\n          var bars = hGsvg\n            .selectAll(\".bar\")\n            .data(fD)\n            .enter()\n            .append(\"g\")\n            .attr(\"class\", \"bar\");\n\n          //create the rectangles.\n          bars\n            .append(\"rect\")\n            .attr(\"x\", function (d) {\n              return x(d[0]);\n            })\n            .attr(\"y\", function (d) {\n              return y(d[1]);\n            })\n            .attr(\"width\", x.bandwidth())\n            .attr(\"height\", function (d) {\n              return hGDim.h - y(d[1]);\n            })\n            .attr(\"fill\", barColor)\n            .on(\"mouseover\", mouseover) // mouseover is defined below.\n            .on(\"mouseout\", mouseout); // mouseout is defined below.\n\n          //Create the frequency labels above the rectangles.\n          bars\n            .append(\"text\")\n            .text(function (d) {\n              return d3.format(\",\")(d[1]);\n            })\n            .attr(\"x\", function (d) {\n              return x(d[0]) + x.bandwidth() / 2;\n            })\n            .attr(\"y\", function (d) {\n              return y(d[1]) - 5;\n            })\n            .attr(\"text-anchor\", \"middle\");\n\n          hGsvg\n            .append(\"g\")\n            .append(\"text\")\n            .attr(\"x\", hGDim.w / 2)\n            .attr(\"y\", hGDim.h + 35)\n            .style(\"text-anchor\", \"middle\")\n            .text(\"Age\");\n\n          hGsvg\n            .append(\"g\")\n            .append(\"text\")\n            .attr(\"transform\", \"rotate(-90)\")\n            .attr(\"y\", 0 - hGDim.l)\n            .attr(\"x\", 0 - hGDim.h / 2)\n            .attr(\"dy\", \"1em\")\n            .style(\"text-anchor\", \"middle\")\n            .text(\"Crime Frequency\");\n\n          function mouseover(event, d) {\n            // utility function to be called on mouseover.\n            // filter for selected state.\n            var st = fData.filter(function (s) {\n              return s.State == d[0];\n            })[0];\n\n            var nD = Object.keys(st.freq).map(function (s) {\n              return { type: s, freq: st.freq[s] };\n            });\n\n            // call update functions of pie-chart and legend.\n            pC.update(nD);\n            leg.update(nD);\n          }\n\n          function mouseout() {\n            // utility function to be called on mouseout.\n            // reset the pie-chart and legend.\n            pC.update(tF);\n            leg.update(tF);\n          }\n\n          // create function to update the bars. This will be used by pie-chart.\n          hG.update = function (nD, color) {\n            // update the domain of the y-axis map to reflect change in frequencies.\n            y.domain([\n              0,\n              d3.max(nD, function (d) {\n                return d[1];\n              }),\n            ]);\n\n            // Attach the new data to the bars.\n            var bars = hGsvg.selectAll(\".bar\").data(nD);\n\n            // transition the height and color of rectangles.\n            bars\n              .select(\"rect\")\n              .transition()\n              .duration(500)\n              .attr(\"y\", function (d) {\n                return y(d[1]);\n              })\n              .attr(\"height\", function (d) {\n                return hGDim.h - y(d[1]);\n              })\n              .attr(\"fill\", color);\n\n            // transition the frequency labels location and change value.\n            bars\n              .select(\"text\")\n              .transition()\n              .duration(500)\n              .text(function (d) {\n                return d3.format(\",\")(d[1]);\n              })\n              .attr(\"y\", function (d) {\n                return y(d[1]) - 5;\n              });\n          };\n          return hG;\n        }\n\n        // function to handle pieChart.\n        function pieChart(pD) {\n          var pC = {},\n            pieDim = { w: 250, h: 250 };\n          pieDim.r = Math.min(pieDim.w, pieDim.h) / 2;\n          // create svg for pie chart.\n          var piesvg = d3\n            .select(id)\n            .append(\"svg\")\n            .attr(\"width\", pieDim.w)\n            .attr(\"height\", pieDim.h)\n            // .attr(\"viewBox\", `0 0 1500 250`)\n            // .attr(\"preserveAspectRatio\", \"xMinYMin meet\")\n            // .attr(\"viewBox\", `0 0 1500 250`) //`0 0 1500 500`\n            // .classed('svg-content1', true)\n\n            .append(\"g\")\n            .attr(\n              \"transform\",\n              \"translate(\" + pieDim.w / 2 + \",\" + pieDim.h / 2 + \")\"\n            );\n\n          // create function to draw the arcs of the pie slices.\n          var arc = d3\n            .arc()\n            .outerRadius(pieDim.r - 10)\n            .innerRadius(0);\n\n          // create a function to compute the pie slice angles.\n          var pie = d3\n            .pie()\n            .sort(null)\n            .value(function (d) {\n              return d.freq;\n            });\n\n          // Draw the pie slices.\n          piesvg\n            .selectAll(\"path\")\n            .data(pie(pD))\n            .enter()\n            .append(\"path\")\n            .attr(\"d\", arc)\n            .each(function (d) {\n              this._current = d;\n            })\n            .style(\"fill\", function (d) {\n              return segColor(d.data.type);\n            })\n            .on(\"mouseover\", mouseover)\n            .on(\"mouseout\", mouseout);\n\n          // create function to update pie-chart. This will be used by histogram.\n          pC.update = function (nD) {\n            piesvg\n              .selectAll(\"path\")\n              .data(pie(nD))\n              .transition()\n              .duration(500)\n              .attrTween(\"d\", arcTween);\n          };\n          // Utility function to be called on mouseover a pie slice.\n          function mouseover(event, d) {\n            // call the update function of histogram with new data.\n            hG.update(\n              fData.map(function (v) {\n                console.log(v);\n                return [v.State, v.freq[d.data.type]];\n              }),\n              segColor(d.data.type)\n            );\n          }\n          //Utility function to be called on mouseout a pie slice.\n          function mouseout() {\n            // call the update function of histogram with all data.\n            hG.update(\n              fData.map(function (v) {\n                return [v.State, v.total];\n              }),\n              barColor\n            );\n          }\n          // Animating the pie-slice requiring a custom function which specifies\n          // how the intermediate paths should be drawn.\n          function arcTween(a) {\n            var i = d3.interpolate(this._current, a);\n            this._current = i(0);\n            return function (t) {\n              return arc(i(t));\n            };\n          }\n          return pC;\n        }\n\n        // function to handle legend.\n        function legend(lD) {\n          var leg = {};\n\n          // create table for legend.\n          var legend = d3.select(id).append(\"table\").attr(\"class\", \"legend\");\n\n          // create one row per segment.\n          var tr = legend\n            .append(\"tbody\")\n            .selectAll(\"tr\")\n            .data(lD)\n            .enter()\n            .append(\"tr\");\n\n          // create the first column for each segment.\n          tr.append(\"td\")\n            .append(\"svg\")\n            .attr(\"width\", \"16\")\n            .attr(\"height\", \"16\")\n            .append(\"rect\")\n            .attr(\"width\", \"16\")\n            .attr(\"height\", \"16\")\n            .attr(\"fill\", function (d) {\n              return segColor(d.type);\n            });\n\n          // create the second column for each segment.\n          tr.append(\"td\").text(function (d) {\n            return d.type;\n          });\n\n          // create the third column for each segment.\n          tr.append(\"td\")\n            .attr(\"class\", \"legendFreq\")\n            .text(function (d) {\n              return d3.format(\",\")(d.freq);\n            });\n\n          // create the fourth column for each segment.\n          tr.append(\"td\")\n            .attr(\"class\", \"legendPerc\")\n            .text(function (d) {\n              return getLegend(d, lD);\n            });\n\n          // Utility function to be used to update the legend.\n          leg.update = function (nD) {\n            // update the data attached to the row elements.\n            var l = legend.select(\"tbody\").selectAll(\"tr\").data(nD);\n\n            // update the frequencies.\n            l.select(\".legendFreq\").text(function (d) {\n              return d3.format(\",\")(d.freq);\n            });\n\n            // update the percentage column.\n            l.select(\".legendPerc\").text(function (d) {\n              return getLegend(d, nD);\n            });\n          };\n\n          function getLegend(d, aD) {\n            // Utility function to compute percentage.\n            return d3.format(\".0%\")(\n              d.freq /\n                d3.sum(\n                  aD.map(function (v) {\n                    return v.freq;\n                  })\n                )\n            );\n          }\n\n          return leg;\n        }\n        // calculate total frequency by segment for all state.\n        // var tF = [\"low\", \"mid\", \"high\"]\n        var tF = [\"Female\", \"Male\", \"Unknown\"].map(function (d) {\n          return {\n            type: d,\n            freq: d3.sum(\n              fData.map(function (t) {\n                return t.freq[d];\n              })\n            ),\n          };\n        });\n        // calculate total frequency by state for all segment.\n        var sF = fData.map(function (d) {\n          return [d.State, d.total];\n        });\n\n        var hG = histoGram(sF), // create the histogram.\n          pC = pieChart(tF), // create the pie-chart.\n          leg = legend(tF); // create the legend.\n      }\n      // var freqData = [\n      //   { State: \"AM\", freq: { low: 10.9, mid: 11.3, high: 8.1 } },\n      //   { State: \"BA\", freq: { low: 11.4, mid: 12.2, high: 11.8 } },\n      //   { State: \"CE\", freq: { low: 8.6, mid: 7.7, high: 7.1 } },\n      //   { State: \"DF\", freq: { low: 20.9, mid: 13, high: 16.1 } },\n      //   { State: \"ES\", freq: { low: 10.3, mid: 10.9, high: 14.5 } },\n      //   { State: \"GO\", freq: { low: 10.5, mid: 11.4, high: 13.3 } },\n      // ];\n      var freqData = [\n        {\n          State: \"0 - 10\",\n          freq: {\n            Female: 12024,\n            Male: 10275,\n            Unknown: 300,\n          },\n        },\n        {\n          State: \"11 - 20\",\n          freq: {\n            Female: 92010,\n            Male: 70165,\n            Unknown: 5027,\n          },\n        },\n        {\n          State: \"21 - 30\",\n          freq: {\n            Female: 245738,\n            Male: 206177,\n            Unknown: 222,\n          },\n        },\n        {\n          State: \"31 - 40\",\n          freq: {\n            Female: 191739,\n            Male: 193930,\n            Unknown: 152,\n          },\n        },\n        {\n          State: \"41 - 50\",\n          freq: {\n            Female: 147726,\n            Male: 163915,\n            Unknown: 101,\n          },\n        },\n        {\n          State: \"51 - 60\",\n          freq: {\n            Female: 104517,\n            Male: 127373,\n            Unknown: 80,\n          },\n        },\n        {\n          State: \"61 - 70\",\n          freq: {\n            Female: 51291,\n            Male: 61540,\n            Unknown: 33,\n          },\n        },\n        {\n          State: \"71 - 80\",\n          freq: {\n            Female: 20901,\n            Male: 21331,\n            Unknown: 12,\n          },\n        },\n        {\n          State: \"81 - 90\",\n          freq: {\n            Female: 8558,\n            Male: 6745,\n            Unknown: 2,\n          },\n        },\n        {\n          State: \"91 - 100\",\n          freq: {\n            Female: 1943,\n            Male: 1474,\n            Unknown: 38,\n          },\n        },\n      ];\n\n      dashboard(\"#dashboard\", freqData);\n    },\n    barChart(data) {\n      var width = 600;\n      var height = width;\n\n      var pack = (data) =>\n        d3.pack().size([width, height]).padding(3)(\n          d3\n            .hierarchy(data)\n            .sum((d) => d.value)\n            .sort((a, b) => b.value - a.value)\n        );\n      var color = d3\n        .scaleLinear()\n        .domain([0, 5])\n        // .range([\"hsl(152,80%,80%)\", \"hsl(228,30%,40%)\"])\n        // .range([\"#fff7ec\",\"#7f0000\"])\n        .range([\"#fee8c8\", \"#7f0000\"])\n\n        .interpolate(d3.interpolateHslLong);\n\n      const root = pack(data);\n      let focus = root;\n      let view;\n\n      var svg = d3\n        .select(\"#chart\")\n        .attr(\"width\", 600)\n        .attr(\"height\", 600)\n        .attr(\"viewBox\", `-${width / 2} -${height / 2} ${width} ${height}`)\n        .style(\"display\", \"block\")\n        .style(\"margin\", \"0 +14px\")\n        // .style(\"background\", color(0))\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (event) => zoom(event, root));\n\n      var node = svg\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(root.descendants().slice(1))\n        .join(\"circle\")\n        .attr(\"fill\", (d) => (d.children ? color(d.depth) : \"white\"))\n        .attr(\"pointer-events\", (d) => (!d.children ? \"none\" : null))\n        .on(\"mouseover\", function () {\n          d3.select(this).attr(\"stroke\", \"#000\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).attr(\"stroke\", null);\n        })\n        .on(\n          \"click\",\n          (event, d) => focus !== d && (zoom(event, d), event.stopPropagation())\n        );\n\n      var label = svg\n        .append(\"g\")\n        .style(\"font\", \"10px sans-serif\")\n        .attr(\"pointer-events\", \"none\")\n        .attr(\"text-anchor\", \"middle\")\n        .selectAll(\"text\")\n        .data(root.descendants())\n        .join(\"text\")\n        .style(\"fill-opacity\", (d) => (d.parent === root ? 1 : 0))\n        .style(\"display\", (d) => (d.parent === root ? \"inline\" : \"none\"))\n        .text((d) => d.data.name);\n\n      zoomTo([root.x, root.y, root.r * 2]);\n\n      function zoomTo(v) {\n        var k = width / v[2];\n\n        view = v;\n        label.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\"r\", (d) => d.r * k);\n      }\n\n      function zoom(event, d) {\n        // var focus0 = focus;\n\n        focus = d;\n\n        var transition = svg\n          .transition()\n          .duration(event.altKey ? 7500 : 750)\n          .tween(\"zoom\", (d) => {\n            console.log(d);\n            var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);\n            return (t) => zoomTo(i(t));\n          });\n\n        label\n          .filter(function (d) {\n            return d.parent === focus || this.style.display === \"inline\";\n          })\n          .transition(transition)\n          .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n          .on(\"start\", function (d) {\n            if (d.parent === focus) this.style.display = \"inline\";\n          })\n          .on(\"end\", function (d) {\n            if (d.parent !== focus) this.style.display = \"none\";\n          });\n      }\n    },\n    HeatMap() {\n      mapboxgl.accessToken = this.accessToken;\n      var map = new mapboxgl.Map({\n        container: \"map\",\n        style: \"mapbox://styles/mapbox/dark-v10\",\n        center: [-118.3, 34],\n        zoom: 9,\n        // maxBounds: [\n        //     [103.6, 1.1704753],\n        //     [104.1, 1.4754753],\n        // ],\n      });\n\n      map.on(\"load\", function () {\n        // Add a geojson point source.\n        // Heatmap layers also work with a vector tile source.\n        map.addSource(\"earthquakes\", {\n          type: \"geojson\",\n          data: \"crime_mapbox.geojson\",\n        });\n\n        map.addLayer(\n          {\n            id: \"earthquakes-heat\",\n            type: \"heatmap\",\n            source: \"earthquakes\",\n            maxzoom: 11,\n            paint: {\n              // Increase the heatmap weight based on frequency and property magnitude\n              \"heatmap-weight\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"get\", \"mag\"],\n                0,\n                0,\n                3,\n                1,\n              ],\n              // Increase the heatmap color weight weight by zoom level\n              // heatmap-intensity is a multiplier on top of heatmap-weight\n              \"heatmap-intensity\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"zoom\"],\n                0,\n                1,\n                18,\n                4,\n              ],\n              // Color ramp for heatmap.  Domain is 0 (low) to 1 (high).\n              // Begin color ramp at 0-stop with a 0-transparancy color\n              // to create a blur-like effect.\n              \"heatmap-color\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"heatmap-density\"],\n                0,\n                \"rgba(33,102,172,0)\",\n                0.05,\n                \"#fdd49e\",\n                0.1,\n                \"#fdbb84\",\n                0.3,\n                \"#fc8d59\",\n                0.6,\n                \"#ef6548\",\n\n                0.8,\n                \"#d7301f\",\n                1,\n                \"#990000\",\n              ],\n\n              // Adjust the heatmap radius by zoom level\n              \"heatmap-radius\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"zoom\"],\n                20,\n                20,\n                80,\n                100,\n              ],\n              // Transition from heatmap to circle layer by zoom level\n              \"heatmap-opacity\": [\n                \"interpolate\",\n                [\"linear\"],\n                [\"zoom\"],\n                7,\n                1,\n                30,\n                1,\n              ],\n            },\n          },\n          \"waterway-label\"\n        );\n      });\n    },\n  },\n  mounted: function () {\n    console.log(\"mounted\");\n    this.CrimeChart();\n    if (!this.$store.state.vueChartData) {\n      d3.json(\"circle_chart_data.json\").then((data) => {\n        this.data = data;\n        // console.log('chartData set from file');\n        // console.log('chartData contains', this.data.length, 'rows');\n        this.$store.commit(\"vueChartData\", this.data);\n        // console.log(this.data);\n        this.barChart(this.data);\n      });\n    } else {\n      this.data = this.$store.state.vueChartData;\n      // console.log('chartData set from store');\n      // console.log('chartData contains', this.data.length, 'rows');\n      this.barChart(this.data);\n    }\n    this.HeatMap();\n  },\n};\n</script>\n\n<!-- \"scoped\" attribute limits CSS to this component only -->\n<style scoped>\n/* Crime Chart*/\n/* >>> body {\n  width: 1060px;\n  margin: 50px auto;\n} */\n>>> path {\n  stroke: #fff;\n}\n>>> path:hover {\n  opacity: 0.2;\n}\n>>> rect:hover {\n  /* fill: #fcc885; */\n  opacity: 0.5;\n}\n>>> .axis {\n  font: 10px sans-serif;\n}\n>>> .legend tr {\n  border-bottom: 1px solid grey;\n}\n>>> .legend tr:first-child {\n  border-top: 1px solid grey;\n}\n\n>>> .axis path,\n>>> .axis line {\n  fill: none;\n  stroke: #000;\n  shape-rendering: crispEdges;\n}\n\n>>> .x.axis path {\n  display: none;\n}\n>>> .legend {\n  margin-bottom: 76px;\n  display: inline-block;\n  border-collapse: collapse;\n  border-spacing: 0px;\n}\n>>> .legend td {\n  padding: 4px 5px;\n  vertical-align: bottom;\n}\n>>> .legendFreq,\n.legendPerc {\n  align: right;\n  width: 50px;\n}\n/* >>> .svg-content {\n    display: inline-block;\n    position: absolute;\n    top: 50px;\n    left: 50px;\n}\n>>> .svg-content1 {\n    display: inline-block;\n    position: absolute;\n    top: 150px;\n    left: 900px;\n}\n>>> .svg-content3 {\n    display: inline-block;\n    position: absolute;\n    top: 150px;\n    left: 900px; \n}*/\n/* Circle packing*/\n\n>>> text.label {\n  /* need to add >>> to gets passed to d3 because vue creates new mapping */\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  font-size: 12px;\n  fill: black;\n}\n\n>>> text.value {\n  font-family: \"Courier New\", Courier, monospace;\n  font-weight: bolder;\n  font-size: 12px;\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  fill: #eee;\n}\n\n>>> rect.bar {\n  text-align: right; /* pull value text to the end of the bar */\n  vertical-align: middle; /* align value text with middle of the bar */\n  fill: #7abcff;\n  height: 20px; /* bar height, this can stay fixed */\n}\n\n.title {\n  margin-bottom: 0px;\n  font-size: 12px;\n}\n/* Map Box */\n/* >>> body {\n  margin: 0;\n  padding: 0;\n} */\n>>> .mapbox_container {\n  position: relative;\n  height: 600px;\n  width: 1300px;\n  display: inline-block;\n}\n>>> #map {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  width: 100%;\n}\n\n>>> .mapboxgl-ctrl-attrib {\n  display: none;\n}\n</style>\n"]}]}