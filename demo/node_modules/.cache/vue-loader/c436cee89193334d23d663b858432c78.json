{"remainingRequest":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/src/views/CombinedChart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/src/views/CombinedChart.vue","mtime":1606717047710},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiQ29tYmluZWRDaGFydCIsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnREYXRhOiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIENvbWJpbmVkQ2hhcnQoKSB7CiAgICAgIHZhciB3aWR0aCA9IDUwMDsKICAgICAgdmFyIGhlaWdodCA9IDYwMDsKICAgICAgdmFyIHByb2plY3Rpb24gPSBkMwogICAgICAgIC5nZW9NZXJjYXRvcigpCiAgICAgICAgLnNjYWxlKDE1MDAwKQogICAgICAgIC8vIC5zY2FsZSg0MDAwMCkKICAgICAgICAvLyBDZW50ZXIgdGhlIE1hcCBpbiBMQQogICAgICAgIC5jZW50ZXIoWy0xMTguMjQ1LCAzNC4wNV0pCiAgICAgICAgLnRyYW5zbGF0ZShbd2lkdGggLyAyLCBoZWlnaHQgLyAyXSk7CiAgICAgIC8vIHZhciBwcm9qZWN0aW9uID0gZDMuZ2VvQWxiZXJzVXNhKCkKICAgICAgLy8gICAgIC50cmFuc2xhdGUoW3dpZHRoIC8gMiwgaGVpZ2h0IC8gMl0pCiAgICAgIC8vICAgICAuc2NhbGUoWzUwMDBdKTsKCiAgICAgIC8vIHZhciB0b29sdGlwID0gZDMuc2VsZWN0KCJib2R5IikuYXBwZW5kKCJkaXYiKS5hdHRyKCJjbGFzcyIsICJ0b29sVGlwIik7CiAgICAgIHZhciB0b29sdGlwID0gZDMKICAgICAgICAuc2VsZWN0KCIjbWFwLWxlZnQiKQogICAgICAgIC5hcHBlbmQoImRpdiIpCiAgICAgICAgLmF0dHIoImNsYXNzIiwgInRvb2xUaXAiKTsKICAgICAgdmFyIHRvb2x0aXBfYmFyID0gZDMKICAgICAgICAuc2VsZWN0KCIjbWFwLXJpZ2h0IikKICAgICAgICAuYXBwZW5kKCJkaXYiKQogICAgICAgIC5hdHRyKCJjbGFzcyIsICJ0b29sVGlwIik7CiAgICAgIC8vIHZhciB0b29sdGlwX2JhciA9IGQzLnNlbGVjdCgiYm9keSIpLmFwcGVuZCgiZGl2IikuYXR0cigiY2xhc3MiLCAidG9vbFRpcCIpOwoKICAgICAgdmFyIHBhdGggPSBkMy5nZW9QYXRoKCkucHJvamVjdGlvbihwcm9qZWN0aW9uKTsKICAgICAgdmFyIHN2ZzEgPSBkMwogICAgICAgIC5zZWxlY3QoImJvZHkiKQogICAgICAgIC5zZWxlY3QoImRpdiNtYXAtbGVmdCIpCiAgICAgICAgLmFwcGVuZCgic3ZnIikKICAgICAgICAvLyAuYXR0cigidmlld0JveCIsICIwIDAgNTAwIDYwMCIpOwogICAgICAgIC5hdHRyKCJ3aWR0aCIsIHdpZHRoKQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCBoZWlnaHQpOwogICAgICB2YXIgY29sb3I7CiAgICAgIC8vIG11bHRpcGxlIGFzeW5jIHRhc2tzCgogICAgICB2YXIgZmlsZXMgPSBbCiAgICAgICAgImxhLWNvdW50eS5nZW9qc29uIiwKICAgICAgICAiYXJlYV9kYXRhLmpzb24iLAogICAgICAgICJvdmVyYWxsX2RhdGEuanNvbiIsCiAgICAgICAgImJhcl9kYXRhLmpzb24iLAogICAgICAgICJiYXJfb3ZlcmFsbC5qc29uIiwKICAgICAgXTsKICAgICAgdmFyIHByb21pc2VzID0gW107CgogICAgICBmaWxlcy5mb3JFYWNoKGZ1bmN0aW9uICh1cmwpIHsKICAgICAgICBwcm9taXNlcy5wdXNoKGQzLmpzb24odXJsKSk7CiAgICAgIH0pOwogICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbiAodmFsdWVzKSB7CiAgICAgICAgdmFyIGdlb2pzb24gPSB2YWx1ZXNbMF07CiAgICAgICAgdmFyIGFyZWFkYXRhID0gdmFsdWVzWzFdOwogICAgICAgIHZhciBvdmVyYWxsID0gdmFsdWVzWzJdOwogICAgICAgIHZhciBiYXJfZGF0YSA9IHZhbHVlc1szXTsKICAgICAgICB2YXIgYmFyX292ZXJhbGwgPSB2YWx1ZXNbNF07CiAgICAgICAgb3ZlcmFsbF9kYXRhID0gb3ZlcmFsbDsKICAgICAgICBiYXJfb3ZlcmFsbF9kYXRhID0gYmFyX292ZXJhbGw7CiAgICAgICAgYXJlYV9kYXRhID0gZDMuZ3JvdXAoYXJlYWRhdGEsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICByZXR1cm4gZFsiQXJlYSBOYW1lIl07CiAgICAgICAgfSk7CiAgICAgICAgYXJlYV9kYXRhID0gT2JqZWN0LmZyb21FbnRyaWVzKGFyZWFfZGF0YSk7CiAgICAgICAgLy8gLm9iamVjdChhcmVhZGF0YSk7CiAgICAgICAgLy8gZDMKICAgICAgICAvLyAubmVzdCgpCiAgICAgICAgLy8gLmtleShmdW5jdGlvbiAoZCkgewogICAgICAgIC8vICAgcmV0dXJuIGRbIkFyZWEgTmFtZSJdOwogICAgICAgIC8vIH0pCiAgICAgICAgLy8gLm9iamVjdChhcmVhZGF0YSk7CiAgICAgICAgYmFyX2FyZWFfZGF0YSA9IGJhcl9kYXRhOwogICAgICAgIHZhciBqc29uX2ZlYXR1cmVzID0gZGF0YVByZXAoZ2VvanNvbiwgYXJlYWRhdGEpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKGpzb25fZmVhdHVyZXMpOwogICAgICAgIC8vIHZhciBqc29uX2ZlYXR1cmVzMSA9IGRhdGFQcmVwMShnZW9qc29uLCBiYXJfZGF0YSk7CiAgICAgICAgLy8gY29sID0gWyIjNjcwMDFmIiwiI2IyMTgyYiIsIiNkNjYwNGQiLCIjZjRhNTgyIiwiI2ZkZGJjNyIsIiNmN2Y3ZjciLCIjZDFlNWYwIiwiIzkyYzVkZSIsIiM0MzkzYzMiLCIjMjE2NmFjIiwiIzA1MzA2MSJdCiAgICAgICAgdmFyIGNvbCA9IFsKICAgICAgICAgICIjZmZmZmNjIiwKICAgICAgICAgICIjZmZlZGEwIiwKICAgICAgICAgICIjZmVkOTc2IiwKICAgICAgICAgICIjZmViMjRjIiwKICAgICAgICAgICIjZmQ4ZDNjIiwKICAgICAgICAgICIjZmM0ZTJhIiwKICAgICAgICAgICIjZTMxYTFjIiwKICAgICAgICAgICIjYmQwMDI2IiwKICAgICAgICAgICIjODAwMDI2IiwKICAgICAgICBdOwogICAgICAgIGNvbG9yID0gZDMuc2NhbGVRdWFudGl6ZSgpLnJhbmdlKGNvbCk7CiAgICAgICAgLy8gLnJhbmdlKGQzLnNjaGVtZVJlZHNbOV0pOwogICAgICAgIHN2ZzEKICAgICAgICAgIC5zZWxlY3RBbGwoInBhdGgiKQogICAgICAgICAgLmRhdGEoanNvbl9mZWF0dXJlcykKICAgICAgICAgIC5lbnRlcigpCiAgICAgICAgICAuYXBwZW5kKCJwYXRoIikKICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJtYXAiKQogICAgICAgICAgLmF0dHIoImQiLCBwYXRoKQogICAgICAgICAgLm9uKCJjbGljayIsIGZ1bmN0aW9uIChlLCBkKSB7CiAgICAgICAgICAgIGRpc3BhdGNoLmNhbGwoImFyZWFjaGFuZ2UiLCB0aGlzLCBkKTsKICAgICAgICAgICAgLy8gZGlzcGF0Y2guY2FsbCgiYXJlYWNoYW5nZSIsIHRoaXMsIGQpOwogICAgICAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgic2VsZWN0ZWQiLCB0cnVlKTsKICAgICAgICAgIH0pOwogICAgICAgIC8vIHJpZ2h0IHBhcnQKICAgICAgICAvLyBsaW5lIGNoYXJ0CiAgICAgICAgLy8gaW5pdExpbmUoKTsKICAgICAgICAvLyBBZGRpbmcgbGVnZW5kCiAgICAgICAgdmFyIGxfY29sb3IgPSBkMy5zY2FsZVF1YW50aXplKFswLCAyMzMyXSwgY29sKTsKICAgICAgICB2YXIgbGVnZW5kUmVjdFNpemUgPSAxODsKICAgICAgICB2YXIgbGVnZW5kU3BhY2luZyA9IDQ7CiAgICAgICAgdmFyIGtleXMgPSBbCiAgICAgICAgICAiJDAgLSAkMjkxLjUiLAogICAgICAgICAgIiQyOTEuNiAtICQ1ODMiLAogICAgICAgICAgIiQ1ODQgLSAkODc0LjUiLAogICAgICAgICAgIiQ4NzQuNiAtICQxMTY2IiwKICAgICAgICAgICIkMTE2NyAtICQxNDU3LjUiLAogICAgICAgICAgIiQxNDU3LjYgLSAkMTc0OSIsCiAgICAgICAgICAiJDE3NTAgLSAkMjA0MC41IiwKICAgICAgICAgICIkMjA0MC42IC0gJDIzMzIiLAogICAgICAgIF07CiAgICAgICAgLy8gdmFyIGtleXMgPSBbIjElIC0gMTAlIiwgIjExJSAtIDIwJSIsICIyMSUgLSAzMCUiLCAiMzElIC0gNDAlIiwgIjQxJSAtIDUwJSIsICI1MSUgLSA2MCUiLCAiNjElIC0gNzAlIiwgIjcxJSAtIDgwJSIsICI4MSUgLSA5MCUiLCAiOTElIC0gMTAwJSJdOwogICAgICAgIHZhciBsZWdlbmQgPSBzdmcxCiAgICAgICAgICAuc2VsZWN0QWxsKCIubGVnZW5kIikKICAgICAgICAgIC5kYXRhKFsyOTEuNSwgNTgzLCA4NzQuNSwgMTE2NiwgMTQ1Ny41LCAxNzQ5LCAyMDQwLjUsIDIzMzJdKQogICAgICAgICAgLmVudGVyKCkKICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgLmF0dHIoImNsYXNzIiwgImxlZ2VuZCIpCiAgICAgICAgICAuYXR0cigiZmlsbC1vcGFjaXR5IiwgMC43KQogICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsIGZ1bmN0aW9uIChkLCBpKSB7CiAgICAgICAgICAgIHZhciBoZWlnaHQgPSBsZWdlbmRSZWN0U2l6ZSArIGxlZ2VuZFNwYWNpbmc7CiAgICAgICAgICAgIHZhciBob3J6ID0gNSAqIGxlZ2VuZFJlY3RTaXplICsgMjUwOwogICAgICAgICAgICB2YXIgdmVydCA9IGkgKiBoZWlnaHQgKyAzODA7CiAgICAgICAgICAgIHJldHVybiAidHJhbnNsYXRlKCIgKyBob3J6ICsgIiwiICsgdmVydCArICIpIjsKICAgICAgICAgIH0pOwoKICAgICAgICBsZWdlbmQKICAgICAgICAgIC5hcHBlbmQoInJlY3QiKQogICAgICAgICAgLmF0dHIoIndpZHRoIiwgbGVnZW5kUmVjdFNpemUpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgbGVnZW5kUmVjdFNpemUpCiAgICAgICAgICAuc3R5bGUoImZpbGwiLCBsX2NvbG9yKQogICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCBsX2NvbG9yKTsKCiAgICAgICAgbGVnZW5kCiAgICAgICAgICAuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgIC5hdHRyKCJ4IiwgbGVnZW5kUmVjdFNpemUgKyBsZWdlbmRTcGFjaW5nKQogICAgICAgICAgLmF0dHIoInkiLCBsZWdlbmRSZWN0U2l6ZSAtIGxlZ2VuZFNwYWNpbmcpCiAgICAgICAgICAudGV4dChmdW5jdGlvbiAoZCwgaSkgewogICAgICAgICAgICByZXR1cm4ga2V5c1tpXTsKICAgICAgICAgIH0pOwoKICAgICAgICBkaXNwYXRjaC5jYWxsKCJsb2FkIiwgdGhpcyk7CiAgICAgICAgZGlzcGF0Y2guY2FsbCgic3RhdGVjaGFuZ2UiLCB0aGlzLCBzZWxlY3RlZF95ZWFyKTsKICAgICAgfSk7CgogICAgICAvLyB2YXIgcXVldWUgPSBkMy5xdWV1ZSgpOwoKICAgICAgLy8gcXVldWUuZGVmZXIoZDMuanNvbiwgImxhcGQtZGl2aXNpb25zLmdlb2pzb24iKQogICAgICAvLyBxdWV1ZS5kZWZlcihkMy5qc29uLCAiZGF0YSBwcm9jZXNzaW5nL2RhdGFCeUFyZWFWMi5qc29uIikKICAgICAgLy8gcXVldWUuZGVmZXIoZDMuanNvbiwgImRhdGEgcHJvY2Vzc2luZy9kYXRhT3ZlcmFsbC5qc29uIikKCiAgICAgIC8vIHF1ZXVlLmRlZmVyKGQzLmpzb24sICJsYS1jb3VudHkuZ2VvanNvbiIpOwogICAgICAvLyBxdWV1ZS5kZWZlcihkMy5qc29uLCAiZGF0YSBwcm9jZXNzaW5nL2FyZWFfZGF0YS5qc29uIik7CiAgICAgIC8vIHF1ZXVlLmRlZmVyKGQzLmpzb24sICJkYXRhIHByb2Nlc3Npbmcvb3ZlcmFsbF9kYXRhLmpzb24iKTsKICAgICAgLy8gcXVldWUuZGVmZXIoZDMuanNvbiwgImRhdGEgcHJvY2Vzc2luZy9iYXJfZGF0YS5qc29uIik7CiAgICAgIC8vIHF1ZXVlLmRlZmVyKGQzLmpzb24sICJkYXRhIHByb2Nlc3NpbmcvYmFyX292ZXJhbGwuanNvbiIpOwoKICAgICAgLy8gcXVldWUuYXdhaXQocmVhZHkpOwoKICAgICAgLy8gdmFyIHNlbGVjdF95ZWFycyA9IFsnQWxsJywgJzIwMTcnLCAnMjAxNicsICcyMDE1JywgJzIwMTQnLCAnMjAxMycsICcyMDEyJywgJzIwMTEnLCAnMjAxMCddOwogICAgICAvLyB2YXIgc2VsZWN0X3llYXJzID0gWyJBbGwiXTsKCiAgICAgIC8vIGN1cnJlbnQgc2VsZWN0aW9uIG9uIHllYXIgYW5kIGFyZWEsIGFsbCB0aW1lcyBhbmQgYWxsIGFyZWFzIGJ5IGRlZmF1bHQKICAgICAgdmFyIHNlbGVjdGVkX3llYXIgPSAiQWxsIjsKICAgICAgdmFyIHNlbGVjdGVkX2FyZWEgPSBudWxsOwogICAgICB2YXIgb3ZlcmFsbF9kYXRhOwogICAgICB2YXIgYXJlYV9kYXRhOwogICAgICB2YXIgYmFyX292ZXJhbGxfZGF0YTsKICAgICAgLy8gdmFyIGJhcl9kYXRhOwogICAgICAvLyB2YXIgYXJlYV9uYW1lOwogICAgICB2YXIgYmFyX2FyZWFfZGF0YTsKICAgICAgLy8gZGlzcGF0Y2gKICAgICAgdmFyIGRpc3BhdGNoID0gZDMuZGlzcGF0Y2goImxvYWQiLCAic3RhdGVjaGFuZ2UiLCAiYXJlYWNoYW5nZSIpOwoKICAgICAgZGlzcGF0Y2gub24oImxvYWQucmVzZXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIGJ1dHRvbiA9IGQzCiAgICAgICAgICAuc2VsZWN0KCJib2R5IikKICAgICAgICAgIC5zZWxlY3QoImRpdiNzZWxlY3QteWVhciIpCiAgICAgICAgICAuYXBwZW5kKCJidXR0b24iKQogICAgICAgICAgLmF0dHIoImNsYXNzIiwgImJ0biBidG4tc2Vjb25kYXJ5IikKICAgICAgICAgIC5hdHRyKCJ0eXBlIiwgImJ1dHRvbiIpCiAgICAgICAgICAuYXR0cigiZGlzYWJsZWQiLCAiZGlzYWJsZWQiKQogICAgICAgICAgLy8gLmF0dHIoImRpc2FibGVkIiwgbnVsbCkKICAgICAgICAgIC5vbigiY2xpY2siLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIGRpc3BhdGNoLmNhbGwoImFyZWFjaGFuZ2UiLCB0aGlzLCBudWxsKTsKICAgICAgICAgIH0pOwogICAgICAgIGJ1dHRvbi50ZXh0KCJSRVNFVCIpOwoKICAgICAgICBkaXNwYXRjaC5vbigiYXJlYWNoYW5nZS5yZXNldCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICBpZiAoIWQpIHsKICAgICAgICAgICAgYnV0dG9uLmF0dHIoImRpc2FibGVkIiwgImRpc2FibGVkIik7CiAgICAgICAgICAgIC8vIGJ1dHRvbi5hdHRyKCJkaXNhYmxlZCIsIG51bGwpOwogICAgICAgICAgICBidXR0b24udGV4dCgiUkVTRVQiKTsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGJ1dHRvbi5hdHRyKCJkaXNhYmxlZCIsIG51bGwpOwogICAgICAgICAgICBidXR0b24udGV4dCgiUkVTRVQiKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBkaXNwYXRjaC5vbigibG9hZC5tYXAiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIHBhdGhzID0gc3ZnMS5zZWxlY3RBbGwoInBhdGgiKTsKICAgICAgICB2YXIgcGF0aHNfZGF0YSA9IHBhdGhzLmRhdGEoKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXRoc19kYXRhKTsKICAgICAgICBwYXRocy5vbigibW91c2VvdXQiLCBmdW5jdGlvbiAoKSB7CiAgICAgICAgICB0b29sdGlwLnN0eWxlKCJkaXNwbGF5IiwgIm5vbmUiKTsKICAgICAgICB9KTsKICAgICAgICAvLyBjb25zb2xlLmxvZyhwYXRoc19kYXRhKTsKCiAgICAgICAgLy8gZm9yICh2YXIgaiA9IDA7IGogPCBwYXRoc19kYXRhLmxlbmd0aDsgaisrKSB7CiAgICAgICAgLy8gICBwYXRoc19kYXRhW2pdLnByb3BlcnRpZXMuYnlZZWFyID0gT2JqZWN0LmZyb21FbnRyaWVzKHBhdGhzX2RhdGFbal0ucHJvcGVydGllcy5ieVllYXIpOwoKICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHBhdGhzX2RhdGFbal0ucHJvcGVydGllcy5ieVllYXIpOwogICAgICAgIC8vIH0KCiAgICAgICAgZGlzcGF0Y2gub24oInN0YXRlY2hhbmdlLm1hcCIsIGZ1bmN0aW9uICh5KSB7CiAgICAgICAgICBjb2xvci5kb21haW4oWwogICAgICAgICAgICBNYXRoLmZsb29yKAogICAgICAgICAgICAgIGQzLm1pbihwYXRoc19kYXRhLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvcGVydGllcy5ieVllYXJbeV1bMF1bImNvdW50Il07CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKSwKICAgICAgICAgICAgTWF0aC5jZWlsKAogICAgICAgICAgICAgIGQzLm1heChwYXRoc19kYXRhLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICAgICAgcmV0dXJuIGQucHJvcGVydGllcy5ieVllYXJbeV1bMF1bImNvdW50Il07CiAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKSwKICAgICAgICAgIF0pOwogICAgICAgICAgcGF0aHMKICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAuZHVyYXRpb24oODAwKQogICAgICAgICAgICAuYXR0cigiZmlsbCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yKGQucHJvcGVydGllcy5ieVllYXJbeV1bMF1bImNvdW50Il0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIHBhdGhzLm9uKCJtb3VzZW1vdmUiLCBmdW5jdGlvbiAoZXZlbnQsIGQpIHsKICAgICAgICAgICAgLy9ldmVudC5wYWdlWAogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygiaW5zaWRlIG1vdXNlbW92ZSIsZCkKICAgICAgICAgICAgLy8gY29uc3RbeF9wb2ludCwgeV9wb2ludF0gPSBkMy5wb2ludGVyKGQpOwogICAgICAgICAgICB0b29sdGlwLnN0eWxlKCJsZWZ0IiwgZXZlbnQucGFnZVggLSAyMzAgKyAicHgiKTsKICAgICAgICAgICAgdG9vbHRpcC5zdHlsZSgidG9wIiwgZXZlbnQucGFnZVkgLSA2NTAgKyAicHgiKTsKICAgICAgICAgICAgdG9vbHRpcC5zdHlsZSgiZGlzcGxheSIsICJpbmxpbmUtYmxvY2siKTsKICAgICAgICAgICAgdG9vbHRpcC5odG1sKAogICAgICAgICAgICAgICI8Yj4iICsKICAgICAgICAgICAgICAgIGQucHJvcGVydGllcy5uYW1lICsKICAgICAgICAgICAgICAgICI8L2I+PGJyPiNBdmcgUmVudDogJCIgKwogICAgICAgICAgICAgICAgZC5wcm9wZXJ0aWVzLmJ5WWVhclt5XVswXVsiY291bnQiXQogICAgICAgICAgICApOwogICAgICAgICAgICAvLyB2YXIgYXJlYV9uYW1lID0gZC5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICB9KTsKICAgICAgICB9KTsKICAgICAgfSk7CgogICAgICBkaXNwYXRjaC5vbigibG9hZC5saW5lIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB3ID0gNTAwLAogICAgICAgICAgaCA9IDIwMDsKICAgICAgICB2YXIgbWFyZ2luID0geyB0b3A6IDEwLCByaWdodDogMjAsIGJvdHRvbTogMzAsIGxlZnQ6IDUwIH0sCiAgICAgICAgICB3aWR0aCA9IHcgLSBtYXJnaW4ubGVmdCAtIG1hcmdpbi5yaWdodCwKICAgICAgICAgIGhlaWdodCA9IGggLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsKICAgICAgICB2YXIgc3ZnID0gZDMKICAgICAgICAgIC5zZWxlY3QoImJvZHkiKQogICAgICAgICAgLnNlbGVjdCgiZGl2I21hcC1yaWdodCIpCiAgICAgICAgICAuc2VsZWN0KCJkaXYjbWFwLWxpbmUiKQogICAgICAgICAgLmFwcGVuZCgic3ZnIikKICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHcpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaCk7CiAgICAgICAgdmFyIGcgPSBzdmcKICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgLmF0dHIoCiAgICAgICAgICAgICJ0cmFuc2Zvcm0iLAogICAgICAgICAgICAidHJhbnNsYXRlKCIgKyBtYXJnaW4ubGVmdCArICIsIiArIG1hcmdpbi50b3AgKyAiKSIKICAgICAgICAgICk7CiAgICAgICAgLy8gdmFyIGdfdGVtcCA9IHN2ZwogICAgICAgIC8vICAgLmFwcGVuZCgiZyIpCiAgICAgICAgLy8gICAuYXR0cigKICAgICAgICAvLyAgICAgInRyYW5zZm9ybSIsCiAgICAgICAgLy8gICAgICJ0cmFuc2xhdGUoIiArIG1hcmdpbi5sZWZ0ICsgIiwiICsgbWFyZ2luLnRvcCArICIpIgogICAgICAgIC8vICAgKTsKICAgICAgICBnLmFwcGVuZCgiZyIpCiAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgwLCIgKyBoZWlnaHQgKyAiKSIpCiAgICAgICAgICAuYXR0cigiY2xhc3MiLCAieGF4aXMiKTsKCiAgICAgICAgdmFyIHlnID0gZy5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJ5YXhpcyIpOwoKICAgICAgICB5Zy5hcHBlbmQoInRleHQiKQogICAgICAgICAgLmF0dHIoImZpbGwiLCAiIzAwMCIpCiAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInJvdGF0ZSgtOTApIikKICAgICAgICAgIC5hdHRyKCJ5IiwgNikKICAgICAgICAgIC5hdHRyKCJkeSIsICIwLjcxZW0iKQogICAgICAgICAgLmF0dHIoInRleHQtYW5jaG9yIiwgImVuZCIpCiAgICAgICAgICAudGV4dCgiI1JlbnQgUHJpY2UiKTsKCiAgICAgICAgeWcuYXBwZW5kKCJ0ZXh0IikKICAgICAgICAgIC5hdHRyKCJmaWxsIiwgIiMwMDAiKQogICAgICAgICAgLmF0dHIoInRyYW5zZm9ybSIsICJyb3RhdGUoOTApIikKICAgICAgICAgIC5hdHRyKCJ4IiwgNTApCiAgICAgICAgICAuYXR0cigieSIsIC13aWR0aCArIDIpCiAgICAgICAgICAuYXR0cigiZHkiLCAiMC43MWVtIikKICAgICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJlbmQiKQogICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAib3JhbmdlIikKICAgICAgICAgIC50ZXh0KCJTYWZldHkgU2NvcmUiKTsKCiAgICAgICAgZy5hcHBlbmQoInBhdGgiKQogICAgICAgICAgLmF0dHIoImNsYXNzIiwgInBhdGgiKQogICAgICAgICAgLmF0dHIoImZpbGwiLCAibm9uZSIpCiAgICAgICAgICAuYXR0cigic3Ryb2tlIiwgIiAjODAwMDI2IikKICAgICAgICAgIC5hdHRyKCJzdHJva2UtbGluZWpvaW4iLCAicm91bmQiKQogICAgICAgICAgLmF0dHIoInN0cm9rZS1saW5lY2FwIiwgInJvdW5kIikKICAgICAgICAgIC5hdHRyKCJzdHJva2Utd2lkdGgiLCAxLjUpOwogICAgICAgIC8vIGcuYXBwZW5kKCJnIikKICAgICAgICAvLyAgIC5hdHRyKCJmaWxsIiwgInN0ZWVsYmx1ZSIpCiAgICAgICAgLy8gICAuYXR0cigiZmlsbC1vcGFjaXR5IiwgMC44KQogICAgICAgIC8vIC5zZWxlY3RBbGwoInJlY3QiKQogICAgICAgIC8vIC5kYXRhKCJwYXRoIikKICAgICAgICAvLyAuam9pbigicmVjdCIpCiAgICAgICAgLy8gICAuYXR0cigieCIsIGQgPT4geChkLnllYXIpKQogICAgICAgIC8vICAgLmF0dHIoIndpZHRoIiwgeC5iYW5kd2lkdGgoKSkKICAgICAgICAvLyAgIC5hdHRyKCJ5IiwgZCA9PiB5MShkLnNhbGVzKSkKICAgICAgICAvLyAgIC5hdHRyKCJoZWlnaHQiLCBkID0+IHkxKDApIC0geTEoZC5zYWxlcykpCiAgICAgICAgdmFyIGN1cnJlbnRfZGF0YXNldDsKICAgICAgICBpZiAoc2VsZWN0ZWRfYXJlYSA9PSBudWxsKSB7CiAgICAgICAgICBjdXJyZW50X2RhdGFzZXQgPSBvdmVyYWxsX2RhdGE7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIGN1cnJlbnRfZGF0YXNldCA9IGFyZWFfZGF0YVtzZWxlY3RlZF9hcmVhXVswXTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGN1cnJlbnRfZGF0YXNldCk7CiAgICAgICAgfQogICAgICAgIGRpc3BhdGNoLm9uKCJzdGF0ZWNoYW5nZS5saW5lIiwgZnVuY3Rpb24gKHkpIHsKICAgICAgICAgIGlmICh5ID09ICJBbGwiKSB7CiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3TGluZSk7CiAgICAgICAgICAgIGRyYXdMaW5lKGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG1vbnRoX2ZpbHRlcmVkID0gT2JqZWN0LmtleXMoCiAgICAgICAgICAgICAgY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXQogICAgICAgICAgICApLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGtleS5pbmNsdWRlcyh5KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB0aW1lX3N1YnNldCA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vbnRoX2ZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdGltZV9zdWJzZXRbbW9udGhfZmlsdGVyZWRbaV1dID0KICAgICAgICAgICAgICAgIGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl1bbW9udGhfZmlsdGVyZWRbaV1dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3TGluZSk7CiAgICAgICAgICAgIGRyYXdMaW5lKHRpbWVfc3Vic2V0KTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICBkaXNwYXRjaC5vbigiYXJlYWNoYW5nZS5saW5lIiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICAgIHZhciBhcmVhOwogICAgICAgICAgaWYgKCFkYXRhKSB7CiAgICAgICAgICAgIGN1cnJlbnRfZGF0YXNldCA9IG92ZXJhbGxfZGF0YTsKICAgICAgICAgICAgLy8gY29uc29sZS5sb2coY3VycmVudF9kYXRhc2V0KQogICAgICAgICAgICBpZiAoc2VsZWN0ZWRfeWVhciA9PSAiQWxsIikgewogICAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3TGluZSk7CiAgICAgICAgICAgICAgZHJhd0xpbmUoY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIG1vbnRoX2ZpbHRlcmVkID0gT2JqZWN0LmtleXMoCiAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdCiAgICAgICAgICAgICAgKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtleS5pbmNsdWRlcyhzZWxlY3RlZF95ZWFyKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgdGltZV9zdWJzZXQgPSB7fTsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vbnRoX2ZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0aW1lX3N1YnNldFttb250aF9maWx0ZXJlZFtpXV0gPQogICAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdW21vbnRoX2ZpbHRlcmVkW2ldXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGRyYXdMaW5lKTsKICAgICAgICAgICAgICBkcmF3TGluZSh0aW1lX3N1YnNldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGFyZWEgPSBkYXRhLnByb3BlcnRpZXMubmFtZTsKICAgICAgICAgICAgY3VycmVudF9kYXRhc2V0ID0gYXJlYV9kYXRhW2FyZWFdWzBdOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWRfeWVhciA9PSAiQWxsIikgewogICAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3TGluZSk7CiAgICAgICAgICAgICAgZHJhd0xpbmUoY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgbW9udGhfZmlsdGVyZWQgPSBPYmplY3Qua2V5cygKICAgICAgICAgICAgICAgIGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl0KICAgICAgICAgICAgICApLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgICByZXR1cm4ga2V5LmluY2x1ZGVzKHNlbGVjdGVkX3llYXIpOwogICAgICAgICAgICAgIH0pOwogICAgICAgICAgICAgIHRpbWVfc3Vic2V0ID0ge307CiAgICAgICAgICAgICAgZm9yIChpID0gMDsgaSA8IG1vbnRoX2ZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0aW1lX3N1YnNldFttb250aF9maWx0ZXJlZFtpXV0gPQogICAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdW21vbnRoX2ZpbHRlcmVkW2ldXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGRyYXdMaW5lKTsKICAgICAgICAgICAgICBkcmF3TGluZSh0aW1lX3N1YnNldCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKCiAgICAgICAgZnVuY3Rpb24gZHJhd0xpbmUoZGF0YSkgewogICAgICAgICAgLy8gY3VzdG9taXplZCBtdWx0aSB0aW1lIGZvcm1hdHMKICAgICAgICAgIC8vIHZhciBmb3JtYXRNaWxsaXNlY29uZCA9IGQzLnRpbWVGb3JtYXQoIi4lTCIpLAogICAgICAgICAgLy8gICBmb3JtYXRTZWNvbmQgPSBkMy50aW1lRm9ybWF0KCI6JVMiKSwKICAgICAgICAgIC8vICAgZm9ybWF0TWludXRlID0gZDMudGltZUZvcm1hdCgiJUk6JU0iKSwKICAgICAgICAgIC8vICAgZm9ybWF0SG91ciA9IGQzLnRpbWVGb3JtYXQoIiVJICVwIiksCiAgICAgICAgICAvLyAgIGZvcm1hdERheSA9IGQzLnRpbWVGb3JtYXQoIiVhICVkIiksCiAgICAgICAgICAvLyAgIGZvcm1hdFdlZWsgPSBkMy50aW1lRm9ybWF0KCIlYiAlZCIpLAogICAgICAgICAgLy8gICBmb3JtYXRNb250aCA9IGQzLnRpbWVGb3JtYXQoIiViIiksCiAgICAgICAgICAvLyAgIGZvcm1hdFllYXIgPSBkMy50aW1lRm9ybWF0KCIlWSIpOwoKICAgICAgICAgIC8vIGZ1bmN0aW9uIG11bHRpRm9ybWF0KGRhdGUpIHsKICAgICAgICAgIC8vICAgcmV0dXJuIChkMy50aW1lU2Vjb25kKGRhdGUpIDwgZGF0ZQogICAgICAgICAgLy8gICAgID8gZm9ybWF0TWlsbGlzZWNvbmQKICAgICAgICAgIC8vICAgICA6IGQzLnRpbWVNaW51dGUoZGF0ZSkgPCBkYXRlCiAgICAgICAgICAvLyAgICAgPyBmb3JtYXRTZWNvbmQKICAgICAgICAgIC8vICAgICA6IGQzLnRpbWVIb3VyKGRhdGUpIDwgZGF0ZQogICAgICAgICAgLy8gICAgID8gZm9ybWF0TWludXRlCiAgICAgICAgICAvLyAgICAgOiBkMy50aW1lRGF5KGRhdGUpIDwgZGF0ZQogICAgICAgICAgLy8gICAgID8gZm9ybWF0SG91cgogICAgICAgICAgLy8gICAgIDogZDMudGltZU1vbnRoKGRhdGUpIDwgZGF0ZQogICAgICAgICAgLy8gICAgID8gZDMudGltZVdlZWsoZGF0ZSkgPCBkYXRlCiAgICAgICAgICAvLyAgICAgICA/IGZvcm1hdERheQogICAgICAgICAgLy8gICAgICAgOiBmb3JtYXRXZWVrCiAgICAgICAgICAvLyAgICAgOiBkMy50aW1lWWVhcihkYXRlKSA8IGRhdGUKICAgICAgICAgIC8vICAgICA/IGZvcm1hdE1vbnRoCiAgICAgICAgICAvLyAgICAgOiBmb3JtYXRZZWFyKShkYXRlKTsKICAgICAgICAgIC8vIH0KICAgICAgICAgIC8vIG11bHRpRm9ybWF0KCkKICAgICAgICAgIC8vIGlmICgiMTAvMjAxNyIgaW4gZGF0YSkgewogICAgICAgICAgLy8gICAgIGRlbGV0ZSBkYXRhWyIxMC8yMDE3Il07CiAgICAgICAgICAvLyB9CgogICAgICAgICAgLy8gdmFyIHBhcnNlVGltZSA9IGQzLnRpbWVQYXJzZSgiJW0vJVkiKTsKICAgICAgICAgIC8vIHZhciBwYXJzZVRpbWUgPSBkMy50aW1lUGFyc2UoIiVZIik7CiAgICAgICAgICAvLyBkYXRhID0gT2JqZWN0LmVudHJpZXMoZGF0YSk7IC8vIFt7a2V5Oi4uLCB2YWx1ZTouLn1dCiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIC8vIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoZW50cnkpIHsKICAgICAgICAgIC8vICAgZW50cnlbImtleSJdID0gcGFyc2VUaW1lKGVudHJ5WyJrZXkiXSk7CiAgICAgICAgICAvLyB9KTsKCiAgICAgICAgICAvLyBkYXRhID0gT2JqZWN0LmtleXMoZGF0YSkuc29ydCgpOwoKICAgICAgICAgIC8vIHZhciB4ID0gZDMuc2NhbGVUaW1lKCkKICAgICAgICAgIC8vICAgICAuZG9tYWluKGQzLmV4dGVudChkYXRhLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsna2V5J107IH0pKQogICAgICAgICAgLy8gICAgIC5yYW5nZVJvdW5kKFswLCB3aWR0aF0pOwogICAgICAgICAgLy8gY29uc29sZS5sb2coT2JqZWN0LmtleXMoZGF0YSkpOwoKICAgICAgICAgIHZhciBuZXdfZGF0YSA9IHt9OwogICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YSk7CiAgICAgICAgICBkYXRhID0gT2JqZWN0LmVudHJpZXMoZGF0YSk7CiAgICAgICAgICBkYXRhLmZvckVhY2goZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgZFswXSA9IGRbMF0uc2xpY2UoMyk7CiAgICAgICAgICAgIG5ld19kYXRhW2RbMF1dID0gZFsxXTsKICAgICAgICAgIH0pOwogICAgICAgICAgLy8gY29uc29sZS5sb2coZGF0YTEpOwogICAgICAgICAgLy8gY29uc29sZS5sb2cobmV3X2RhdGEpOwoKICAgICAgICAgIGRhdGEgPSBuZXdfZGF0YTsKCiAgICAgICAgICB2YXIgeCA9IGQzCiAgICAgICAgICAgIC5zY2FsZUJhbmQoKQogICAgICAgICAgICAucGFkZGluZygwLjEpCiAgICAgICAgICAgIC5kb21haW4oT2JqZWN0LmtleXMoZGF0YSkpCiAgICAgICAgICAgIC5yYW5nZVJvdW5kKFswLCB3aWR0aF0pOwoKICAgICAgICAgIHZhciB5MSA9IGQzCiAgICAgICAgICAgIC5zY2FsZUxpbmVhcigpCiAgICAgICAgICAgIC5kb21haW4oZDMuZXh0ZW50KE9iamVjdC52YWx1ZXMoZGF0YSkpKQogICAgICAgICAgICAucmFuZ2VSb3VuZChbaGVpZ2h0LCAwXSkKICAgICAgICAgICAgLm5pY2UoKTsKCiAgICAgICAgICAvLyB2YXIgeTIgPSBkMy5zY2FsZUxpbmVhcigpCiAgICAgICAgICAvLyAgICAgLmRvbWFpbihkMy5leHRlbnQoZGF0YSwgZnVuY3Rpb24gKGQpIHsgcmV0dXJuIGRbJ3ZhbHVlJ107IH0pKQogICAgICAgICAgLy8gICAgIC5yYW5nZVJvdW5kKFtoZWlnaHQsIDBdKQogICAgICAgICAgLy8gICAgIC5uaWNlKCk7CgogICAgICAgICAgZy5zZWxlY3QoImcueGF4aXMiKS50cmFuc2l0aW9uKCkuZHVyYXRpb24oNDAwKS5jYWxsKGQzLmF4aXNCb3R0b20oeCkpOwoKICAgICAgICAgIGcuc2VsZWN0KCJnLnlheGlzIikKICAgICAgICAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgICAuZHVyYXRpb24oNDAwKQogICAgICAgICAgICAuY2FsbChkMy5heGlzTGVmdCh5MSkudGlja0Zvcm1hdChkMy5mb3JtYXQoIiQiKSkpOwoKICAgICAgICAgIHlnLnNlbGVjdEFsbCgidGV4dCIpCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiM4MDAwMjYiKQogICAgICAgICAgICAuYXR0cigic3Ryb2tlLXdpZHRoIiwgMC4yKTsKCiAgICAgICAgICBkYXRhID0gT2JqZWN0LmVudHJpZXMoZGF0YSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhKTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHRlbXBfbGlzdCk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhPYmplY3QuZW50cmllcyhkYXRhKSk7CiAgICAgICAgICBnLnNlbGVjdCgicGF0aC5wYXRoIikKICAgICAgICAgICAgLmRhdGEoW2RhdGFdKQogICAgICAgICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAgIC5kdXJhdGlvbig0MDApCiAgICAgICAgICAgIC5zdHlsZSgic3Ryb2tlIiwgIiM4MDAwMjYiKQogICAgICAgICAgICAuYXR0cigKICAgICAgICAgICAgICAiZCIsCiAgICAgICAgICAgICAgZDMKICAgICAgICAgICAgICAgIC5saW5lKCkKICAgICAgICAgICAgICAgIC54KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHgoZFswXSkrMzApOwogICAgICAgICAgICAgICAgICByZXR1cm4geChkWzBdKSArIDMwOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICAgIC55KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKHkxKGRbMV0pKTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHkxKGRbMV0pOwogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgKTsKICAgICAgICB9CiAgICAgIH0pOwoKICAgICAgZGlzcGF0Y2gub24oImxvYWQuYmFyIiwgZnVuY3Rpb24gKCkgewogICAgICAgIHZhciB3ID0gNTUwLAogICAgICAgICAgaCA9IDIwMDsKICAgICAgICAvLyB2YXIgdGhlRGF0YSA9IHVuZGVmaW5lZDsKCiAgICAgICAgdmFyIG1hcmdpbiA9IHsgdG9wOiAxMCwgcmlnaHQ6IDIwLCBib3R0b206IDMwLCBsZWZ0OiAxMDAsIGV4dHJhOiA1MCB9OwogICAgICAgIC8vIHdpZHRoID0gdyAtIG1hcmdpbi5sZWZ0IC0gbWFyZ2luLnJpZ2h0LAogICAgICAgIC8vIGhlaWdodCA9IGggLSBtYXJnaW4udG9wIC0gbWFyZ2luLmJvdHRvbTsKCiAgICAgICAgdmFyIHgyID0gZDMuc2NhbGVCYW5kKCkucGFkZGluZygwLjEpOwogICAgICAgIHZhciB5MiA9IGQzLnNjYWxlTGluZWFyKCk7CgogICAgICAgIHZhciBzdmcyID0gZDMKICAgICAgICAgIC5zZWxlY3QoImJvZHkiKQogICAgICAgICAgLnNlbGVjdCgiZGl2I21hcC1yaWdodCIpCiAgICAgICAgICAuc2VsZWN0KCJkaXYjbWFwLWxpbmUiKQogICAgICAgICAgLnNlbGVjdCgic3ZnIikKICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHcpCiAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgaCk7CgogICAgICAgIHZhciBnMiA9IHN2ZzIKICAgICAgICAgIC5hcHBlbmQoImciKQogICAgICAgICAgLmF0dHIoCiAgICAgICAgICAgICJ0cmFuc2Zvcm0iLAogICAgICAgICAgICAidHJhbnNsYXRlKCIgKyBtYXJnaW4uZXh0cmEgKyAiLCIgKyBtYXJnaW4udG9wICsgIikiCiAgICAgICAgICApOwoKICAgICAgICBnMi5hcHBlbmQoImciKS5hdHRyKCJjbGFzcyIsICJheGlzIGF4aXMtLXgiKTsKCiAgICAgICAgZzIuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAiYXhpcyBheGlzLS15Iik7CgogICAgICAgIHZhciBjdXJyZW50X2RhdGFzZXQ7CiAgICAgICAgaWYgKHNlbGVjdGVkX2FyZWEgPT0gbnVsbCkgewogICAgICAgICAgY3VycmVudF9kYXRhc2V0ID0gYmFyX292ZXJhbGxfZGF0YTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY3VycmVudF9kYXRhc2V0ID0gYmFyX2FyZWFfZGF0YVtzZWxlY3RlZF9hcmVhXVswXTsKICAgICAgICB9CgogICAgICAgIGRpc3BhdGNoLm9uKCJzdGF0ZWNoYW5nZS5iYXIiLCBmdW5jdGlvbiAoeSkgewogICAgICAgICAgaWYgKHkgPT0gIkFsbCIpIHsKICAgICAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGRyYXdCYXIpOwogICAgICAgICAgICBkcmF3QmFyKGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIG1vbnRoX2ZpbHRlcmVkID0gT2JqZWN0LmtleXMoCiAgICAgICAgICAgICAgY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXQogICAgICAgICAgICApLmZpbHRlcihmdW5jdGlvbiAoa2V5KSB7CiAgICAgICAgICAgICAgcmV0dXJuIGtleS5pbmNsdWRlcyh5KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIHZhciB0aW1lX3N1YnNldCA9IHt9OwogICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vbnRoX2ZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgdGltZV9zdWJzZXRbbW9udGhfZmlsdGVyZWRbaV1dID0KICAgICAgICAgICAgICAgIGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl1bbW9udGhfZmlsdGVyZWRbaV1dOwogICAgICAgICAgICB9CiAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3QmFyKTsKICAgICAgICAgICAgZHJhd0Jhcih0aW1lX3N1YnNldCk7CiAgICAgICAgICB9CiAgICAgICAgfSk7CiAgICAgICAgZGlzcGF0Y2gub24oImFyZWFjaGFuZ2UuYmFyIiwgZnVuY3Rpb24gKGRhdGExKSB7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZygiYXJlYWNoYW5nZV9iYXIiLGRhdGExKQogICAgICAgICAgdmFyIGFyZWE7CiAgICAgICAgICBpZiAoIWRhdGExKSB7CiAgICAgICAgICAgIGN1cnJlbnRfZGF0YXNldCA9IGJhcl9vdmVyYWxsX2RhdGE7CiAgICAgICAgICAgIGlmIChzZWxlY3RlZF95ZWFyID09ICJBbGwiKSB7CiAgICAgICAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGRyYXdCYXIpOwogICAgICAgICAgICAgIGRyYXdCYXIoY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXSk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgdmFyIG1vbnRoX2ZpbHRlcmVkID0gT2JqZWN0LmtleXMoCiAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdCiAgICAgICAgICAgICAgKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtleS5pbmNsdWRlcyhzZWxlY3RlZF95ZWFyKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB2YXIgdGltZV9zdWJzZXQgPSB7fTsKICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG1vbnRoX2ZpbHRlcmVkLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICAgICAgICB0aW1lX3N1YnNldFttb250aF9maWx0ZXJlZFtpXV0gPQogICAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdW21vbnRoX2ZpbHRlcmVkW2ldXTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgLy8gd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoInJlc2l6ZSIsIGRyYXdCYXIpOwogICAgICAgICAgICAgIGRyYXdCYXIodGltZV9zdWJzZXQpOwogICAgICAgICAgICB9CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAvLyB0aGlzLl9fZGF0YV9fLnByb3BlcnRpZXMubmFtZQogICAgICAgICAgICBhcmVhID0gZGF0YTEucHJvcGVydGllcy5uYW1lOwogICAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYmFyX2FyZWFfZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgIGlmIChiYXJfYXJlYV9kYXRhW2ldWyJBcmVhIE5hbWUiXSA9PSBhcmVhKSB7CiAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXQgPSBiYXJfYXJlYV9kYXRhW2ldOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhjdXJyZW50X2RhdGFzZXQpOwogICAgICAgICAgICAvLyBjdXJyZW50X2RhdGFzZXQgPSBiYXJfYXJlYV9kYXRhW2FyZWFdWzBdOwogICAgICAgICAgICBpZiAoc2VsZWN0ZWRfeWVhciA9PSAiQWxsIikgewogICAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3QmFyKTsKICAgICAgICAgICAgICBkcmF3QmFyKGN1cnJlbnRfZGF0YXNldFsiQ291bnRCeU1vbnRoIl0pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIG1vbnRoX2ZpbHRlcmVkID0gT2JqZWN0LmtleXMoCiAgICAgICAgICAgICAgICBjdXJyZW50X2RhdGFzZXRbIkNvdW50QnlNb250aCJdCiAgICAgICAgICAgICAgKS5maWx0ZXIoZnVuY3Rpb24gKGtleSkgewogICAgICAgICAgICAgICAgcmV0dXJuIGtleS5pbmNsdWRlcyhzZWxlY3RlZF95ZWFyKTsKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICB0aW1lX3N1YnNldCA9IHt9OwogICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBtb250aF9maWx0ZXJlZC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgdGltZV9zdWJzZXRbbW9udGhfZmlsdGVyZWRbaV1dID0KICAgICAgICAgICAgICAgICAgY3VycmVudF9kYXRhc2V0WyJDb3VudEJ5TW9udGgiXVttb250aF9maWx0ZXJlZFtpXV07CiAgICAgICAgICAgICAgfQogICAgICAgICAgICAgIC8vIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCJyZXNpemUiLCBkcmF3QmFyKTsKICAgICAgICAgICAgICBkcmF3QmFyKHRpbWVfc3Vic2V0KTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0pOwoKICAgICAgICBmdW5jdGlvbiBkcmF3QmFyKGRhdGExKSB7CiAgICAgICAgICB2YXIgYm91bmRzID0gc3ZnMi5ub2RlKCkuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCksCiAgICAgICAgICAgIHdpZHRoID0gYm91bmRzLndpZHRoIC0gbWFyZ2luLmxlZnQgLSBtYXJnaW4ucmlnaHQsCiAgICAgICAgICAgIGhlaWdodDEgPSBib3VuZHMuaGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207CiAgICAgICAgICAvLyBoZWlnaHQgPSBib3VuZHMuaGVpZ2h0IC0gbWFyZ2luLnRvcCAtIG1hcmdpbi5ib3R0b207CgogICAgICAgICAgLy8gY29uc29sZS5sb2coaGVpZ2h0MSk7CiAgICAgICAgICB2YXIgbmV3X2RhdGEgPSB7fTsKICAgICAgICAgIC8vIGNvbnNvbGUubG9nKGRhdGExKTsKICAgICAgICAgIGRhdGExID0gT2JqZWN0LmVudHJpZXMoZGF0YTEpOwogICAgICAgICAgZGF0YTEuZm9yRWFjaChmdW5jdGlvbiAoZCkgewogICAgICAgICAgICBkWzBdID0gZFswXS5zbGljZSgzKTsKICAgICAgICAgICAgbmV3X2RhdGFbZFswXV0gPSBkWzFdOwogICAgICAgICAgfSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkYXRhMSk7CiAgICAgICAgICAvLyBjb25zb2xlLmxvZyhuZXdfZGF0YSk7CgogICAgICAgICAgZGF0YTEgPSBuZXdfZGF0YTsKCiAgICAgICAgICB4Mi5yYW5nZVJvdW5kKFswLCB3aWR0aF0pOwogICAgICAgICAgeTIucmFuZ2VSb3VuZChbaGVpZ2h0MSwgMF0pOwoKICAgICAgICAgIHgyLmRvbWFpbihPYmplY3Qua2V5cyhkYXRhMSkpOwogICAgICAgICAgeTIuZG9tYWluKFswLCBkMy5tYXgoT2JqZWN0LnZhbHVlcyhkYXRhMSkpXSk7CgogICAgICAgICAgZzIuc2VsZWN0KCIuYXhpcy0teCIpCiAgICAgICAgICAgIC5hdHRyKCJ0cmFuc2Zvcm0iLCAidHJhbnNsYXRlKDAsIiArIGhlaWdodCArICIpIikKICAgICAgICAgICAgLmNhbGwoZDMuYXhpc0JvdHRvbSh4MikpOwoKICAgICAgICAgIGcyLnNlbGVjdCgiLmF4aXMtLXkiKQogICAgICAgICAgICAuYXR0cigidHJhbnNmb3JtIiwgInRyYW5zbGF0ZSgiICsgd2lkdGggKyAiLDApIikKICAgICAgICAgICAgLmNhbGwoZDMuYXhpc1JpZ2h0KHkyKS50aWNrRm9ybWF0KGQzLmZvcm1hdCgiZCIpKSk7CgogICAgICAgICAgZzIuc2VsZWN0QWxsKCJ0ZXh0IikKICAgICAgICAgICAgLnN0eWxlKCJzdHJva2UiLCAib3JhbmdlIikKICAgICAgICAgICAgLmF0dHIoInN0cm9rZS13aWR0aCIsIDAuMik7CgogICAgICAgICAgZGF0YTEgPSBPYmplY3QuZW50cmllcyhkYXRhMSk7CiAgICAgICAgICB2YXIgYmFycyA9IGcyLnNlbGVjdEFsbCgiLmJhciIpLmRhdGEoZGF0YTEpOwogICAgICAgICAgLy8gLmVudGVyKCkuYXBwZW5kKCJnIikuYXR0cigiY2xhc3MiLCAiYmFyIik7CgogICAgICAgICAgLy8gRU5URVIKICAgICAgICAgIGJhcnMKICAgICAgICAgICAgLmVudGVyKCkKICAgICAgICAgICAgLmFwcGVuZCgicmVjdCIpCiAgICAgICAgICAgIC5hdHRyKCJjbGFzcyIsICJiYXIiKQogICAgICAgICAgICAuYXR0cigieCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHgyKGRbMF0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuYXR0cigieSIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHkyKGRbMV0pOwogICAgICAgICAgICB9KQogICAgICAgICAgICAuYXR0cigid2lkdGgiLCB4Mi5iYW5kd2lkdGgoKSkKICAgICAgICAgICAgLmF0dHIoImhlaWdodCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgICAgcmV0dXJuIGhlaWdodDEgLSB5MihkWzFdKTsKICAgICAgICAgICAgfSk7CgogICAgICAgICAgLy8gVVBEQVRFCiAgICAgICAgICBiYXJzCiAgICAgICAgICAgIC5hdHRyKCJ4IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4geDIoZFswXSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJ5IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4geTIoZFsxXSk7CiAgICAgICAgICAgIH0pCiAgICAgICAgICAgIC5hdHRyKCJ3aWR0aCIsIHgyLmJhbmR3aWR0aCgpKQogICAgICAgICAgICAuYXR0cigiaGVpZ2h0IiwgZnVuY3Rpb24gKGQpIHsKICAgICAgICAgICAgICByZXR1cm4gaGVpZ2h0MSAtIHkyKGRbMV0pOwogICAgICAgICAgICB9KTsKICAgICAgICAgIC8vIGJhcnMKICAgICAgICAgIC8vICAgLnJlbW92ZSgpCiAgICAgICAgICAvLyAgIC5zZWxlY3RBbGwoIi5iYXIiKQogICAgICAgICAgLy8gICAuZGF0YShkYXRhMSkKICAgICAgICAgIC8vICAgLnNlbGVjdCgicmVjdCIpCiAgICAgICAgICAvLyAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgIC8vICAgLmF0dHIoIngiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGRbMF0pOwogICAgICAgICAgLy8gICAgIHJldHVybiB4MihkWzBdKTsKICAgICAgICAgIC8vICAgfSkKICAgICAgICAgIC8vICAgLmF0dHIoInkiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgLy8gICAgIC8vIGNvbnNvbGUubG9nKGRbMV0pOwogICAgICAgICAgLy8gICAgIHJldHVybiB5MihkWzFdKTsKICAgICAgICAgIC8vICAgfSkKICAgICAgICAgIC8vICAgLmF0dHIoIndpZHRoIiwgeDIuYmFuZHdpZHRoKCkpCiAgICAgICAgICAvLyAgIC5hdHRyKCJoZWlnaHQiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgLy8gICAgIGNvbnNvbGUubG9nKGRbMV0pOwogICAgICAgICAgLy8gICAgIHJldHVybiBoZWlnaHQxIC0geTIoZFsxXSk7CiAgICAgICAgICAvLyAgIH0pOwoKICAgICAgICAgIGJhcnMub24oIm1vdXNlbW92ZSIsIGZ1bmN0aW9uIChldmVudCwgZCkgewogICAgICAgICAgICAvLyBjb25zdFt4X3BvaW50LCB5X3BvaW50XSA9IGQzLnBvaW50ZXIoZCk7CiAgICAgICAgICAgIHRvb2x0aXBfYmFyLnN0eWxlKCJsZWZ0IiwgZXZlbnQucGFnZVggLSA4MTAgKyAicHgiKTsKICAgICAgICAgICAgdG9vbHRpcF9iYXIuc3R5bGUoInRvcCIsIGV2ZW50LnBhZ2VZIC0gNTUwICsgInB4Iik7CiAgICAgICAgICAgIHRvb2x0aXBfYmFyLnN0eWxlKCJkaXNwbGF5IiwgImlubGluZS1ibG9jayIpOwogICAgICAgICAgICB0b29sdGlwX2Jhci5odG1sKAogICAgICAgICAgICAgICI8Yj5ZZWFyOiAiICsgZFswXSArICI8L2I+PGJyPlNhZmV0eSBTY29yZTogIiArIGRbMV0KICAgICAgICAgICAgKTsKICAgICAgICAgIH0pOwoKICAgICAgICAgIGJhcnMub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgICB0b29sdGlwX2Jhci5zdHlsZSgiZGlzcGxheSIsICJub25lIik7CiAgICAgICAgICB9KTsKICAgICAgICAgIC8vIEVYSVQKICAgICAgICAgIGJhcnMuZXhpdCgpLnJlbW92ZSgpOwoKICAgICAgICAgIC8vIGRpc3BhdGNoLm9uKCJhcmVhY2hhbmdlLmFyZWFuYW1lIiwgZnVuY3Rpb24gKGFyZWFfbmFtZSkgewogICAgICAgICAgLy8gICAgICBkMy5zZWxlY3QoJ2JvZHknKQogICAgICAgICAgLy8gICAgICAgICAuc2VsZWN0KCdkaXYjbWFwLXJpZ2h0JykKICAgICAgICAgIC8vICAgICAgICAgLnNlbGVjdCgiZGl2I21hcC1saW5lIikKICAgICAgICAgIC8vICAgICAgICAgLnNlbGVjdCgiI2FyZWFfbmFtZSIpCiAgICAgICAgICAvLyAgICAgICAgIC50ZXh0KGFyZWFfbmFtZSk7CiAgICAgICAgICAvLyB9CgogICAgICAgICAgLy8gdmFyIHggPSBkMy5zY2FsZVRpbWUoKQogICAgICAgICAgLy8gICAgIC5kb21haW4oZDMuZXh0ZW50KGRhdGEsIGZ1bmN0aW9uIChkKSB7IHJldHVybiBkWydrZXknXTsgfSkpCiAgICAgICAgICAvLyAgICAgLnJhbmdlUm91bmQoWzAsIHdpZHRoXSk7CiAgICAgICAgICAvLyB2YXIgeSA9IGQzLnNjYWxlTGluZWFyKCkKICAgICAgICAgIC8vICAgICAuZG9tYWluKGQzLmV4dGVudChkYXRhLCBmdW5jdGlvbiAoZCkgeyByZXR1cm4gZFsndmFsdWUnXTsgfSkpCiAgICAgICAgICAvLyAgICAgLnJhbmdlUm91bmQoW2hlaWdodCwgMF0pCiAgICAgICAgICAvLyAgICAgLm5pY2UoKTsKICAgICAgICAgIC8vIHZhciBiYXIgPSBkMy5saW5lKCkKICAgICAgICAgIC8vICAgICAueChmdW5jdGlvbiAoZCkgeyByZXR1cm4geChkWydrZXknXSk7IH0pCiAgICAgICAgICAvLyAgICAgLnkoZnVuY3Rpb24gKGQpIHsgcmV0dXJuIHkoZFsndmFsdWUnXSk7IH0pOwogICAgICAgICAgLy8gZzIuc2VsZWN0KCJnLnhheGlzIikKICAgICAgICAgIC8vICAgICAudHJhbnNpdGlvbigpCiAgICAgICAgICAvLyAgICAgLmR1cmF0aW9uKDQwMCkKICAgICAgICAgIC8vICAgICAuY2FsbChkMy5heGlzQm90dG9tKHgpLnRpY2tGb3JtYXQobXVsdGlGb3JtYXQpKTsKICAgICAgICAgIC8vIGcyLnNlbGVjdCgiZy55YXhpcyIpCiAgICAgICAgICAvLyAgICAgLnRyYW5zaXRpb24oKQogICAgICAgICAgLy8gICAgIC5kdXJhdGlvbig0MDApCiAgICAgICAgICAvLyAgICAgLmNhbGwoZDMuYXhpc0xlZnQoeSkudGlja0Zvcm1hdChkMy5mb3JtYXQoIiQiKSkpOwogICAgICAgICAgLy8gZzIuc2VsZWN0KCJwYXRoLnBhdGgiKQogICAgICAgICAgLy8gICAgIC5kYXR1bShkYXRhKQogICAgICAgICAgLy8gICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgIC8vICAgICAuZHVyYXRpb24oNDAwKQogICAgICAgICAgLy8gICAgIC5hdHRyKCJkIiwgbGluZTIpOwogICAgICAgIH0KICAgICAgfSk7CgogICAgICBkaXNwYXRjaC5vbigic3RhdGVjaGFuZ2UudGl0bGUiLCBmdW5jdGlvbiAoeSkgewogICAgICAgIGQzLnNlbGVjdCgiYm9keSIpCiAgICAgICAgICAuc2VsZWN0KCJkaXYjYXJlYSIpCiAgICAgICAgICAuc2VsZWN0KCJzcGFuI2N1cnJlbnQtYXJlYSIpCiAgICAgICAgICAudGV4dCgKICAgICAgICAgICAgKHNlbGVjdGVkX2FyZWEgPT0gbnVsbCA/ICJBbGwgRGl2aXNpb25zIiA6IHNlbGVjdGVkX2FyZWEpICsKICAgICAgICAgICAgICAiIC0gIiArCiAgICAgICAgICAgICAgKHkgPT0gIkFsbCIgPyAiQWxsIFRpbWVzIiA6IHkpCiAgICAgICAgICApOwogICAgICB9KTsKCiAgICAgIGRpc3BhdGNoLm9uKCJhcmVhY2hhbmdlLnRpdGxlIiwgZnVuY3Rpb24gKGRhdGExKSB7CiAgICAgICAgZDMuc2VsZWN0QWxsKCJwYXRoIikuY2xhc3NlZCgic2VsZWN0ZWQiLCBmYWxzZSk7CiAgICAgICAgaWYgKGRhdGExKSB7CiAgICAgICAgICBzZWxlY3RlZF9hcmVhID0gZGF0YTEucHJvcGVydGllcy5uYW1lOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBzZWxlY3RlZF9hcmVhID0gbnVsbDsKICAgICAgICB9CgogICAgICAgIC8vIHRpdGxlIG9uIHNlbGVjdGVkIGFyZWEKICAgICAgICBkMy5zZWxlY3QoImJvZHkiKQogICAgICAgICAgLnNlbGVjdCgiZGl2I21hcC1yaWdodCIpCiAgICAgICAgICAuc2VsZWN0KCJkaXYjYXJlYV9uYW1lIikKICAgICAgICAgIC50ZXh0KHNlbGVjdGVkX2FyZWEgPyBzZWxlY3RlZF9hcmVhIDogIkFsbCBOZWlnaGJvcmhvb2QiKTsKICAgICAgfSk7CgogICAgICAvLyBmdW5jdGlvbiByZWFkeShlcnJvciwgZ2VvanNvbiwgYXJlYWRhdGEsIG92ZXJhbGwsIGJhcl9kYXRhLCBiYXJfb3ZlcmFsbCkgewogICAgICAvLyAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7CiAgICAgIC8vICAgb3ZlcmFsbF9kYXRhID0gb3ZlcmFsbDsKICAgICAgLy8gICBiYXJfb3ZlcmFsbF9kYXRhID0gYmFyX292ZXJhbGw7CiAgICAgIC8vICAgYXJlYV9kYXRhID0gZDMKICAgICAgLy8gICAgIC5ncm91cChmdW5jdGlvbiAoZCkgewogICAgICAvLyAgICAgICByZXR1cm4gZFsiQXJlYSBOYW1lIl07CiAgICAgIC8vICAgICB9KQogICAgICAvLyAgICAgLm9iamVjdChhcmVhZGF0YSk7CiAgICAgIC8vICAgLy8gZDMKICAgICAgLy8gICAvLyAubmVzdCgpCiAgICAgIC8vICAgLy8gLmtleShmdW5jdGlvbiAoZCkgewogICAgICAvLyAgIC8vICAgcmV0dXJuIGRbIkFyZWEgTmFtZSJdOwogICAgICAvLyAgIC8vIH0pCiAgICAgIC8vICAgLy8gLm9iamVjdChhcmVhZGF0YSk7CiAgICAgIC8vICAgYmFyX2FyZWFfZGF0YSA9IGJhcl9kYXRhOwogICAgICAvLyAgIGNvbnNvbGUubG9nKGJhcl9hcmVhX2RhdGEpOwogICAgICAvLyAgIHZhciBqc29uX2ZlYXR1cmVzID0gZGF0YVByZXAoZ2VvanNvbiwgYXJlYWRhdGEpOwogICAgICAvLyAgIC8vIHZhciBqc29uX2ZlYXR1cmVzMSA9IGRhdGFQcmVwMShnZW9qc29uLCBiYXJfZGF0YSk7CiAgICAgIC8vICAgLy8gY29sID0gWyIjNjcwMDFmIiwiI2IyMTgyYiIsIiNkNjYwNGQiLCIjZjRhNTgyIiwiI2ZkZGJjNyIsIiNmN2Y3ZjciLCIjZDFlNWYwIiwiIzkyYzVkZSIsIiM0MzkzYzMiLCIjMjE2NmFjIiwiIzA1MzA2MSJdCiAgICAgIC8vICAgdmFyIGNvbCA9IFsKICAgICAgLy8gICAgICIjZmZmZmNjIiwKICAgICAgLy8gICAgICIjZmZlZGEwIiwKICAgICAgLy8gICAgICIjZmVkOTc2IiwKICAgICAgLy8gICAgICIjZmViMjRjIiwKICAgICAgLy8gICAgICIjZmQ4ZDNjIiwKICAgICAgLy8gICAgICIjZmM0ZTJhIiwKICAgICAgLy8gICAgICIjZTMxYTFjIiwKICAgICAgLy8gICAgICIjYmQwMDI2IiwKICAgICAgLy8gICAgICIjODAwMDI2IiwKICAgICAgLy8gICBdOwogICAgICAvLyAgIGNvbG9yID0gZDMuc2NhbGVRdWFudGl6ZSgpLnJhbmdlKGNvbCk7CiAgICAgIC8vICAgLy8gLnJhbmdlKGQzLnNjaGVtZVJlZHNbOV0pOwogICAgICAvLyAgIHN2ZzEKICAgICAgLy8gICAgIC5zZWxlY3RBbGwoInBhdGgiKQogICAgICAvLyAgICAgLmRhdGEoanNvbl9mZWF0dXJlcykKICAgICAgLy8gICAgIC5lbnRlcigpCiAgICAgIC8vICAgICAuYXBwZW5kKCJwYXRoIikKICAgICAgLy8gICAgIC5hdHRyKCJjbGFzcyIsICJtYXAiKQogICAgICAvLyAgICAgLmF0dHIoImQiLCBwYXRoKQogICAgICAvLyAgICAgLm9uKCJjbGljayIsIGZ1bmN0aW9uIChkKSB7CiAgICAgIC8vICAgICAgIGRpc3BhdGNoLmNhbGwoImFyZWFjaGFuZ2UiLCB0aGlzLCBkKTsKICAgICAgLy8gICAgICAgLy8gZGlzcGF0Y2guY2FsbCgiYXJlYWNoYW5nZSIsIHRoaXMsIGQpOwogICAgICAvLyAgICAgICBkMy5zZWxlY3QodGhpcykuY2xhc3NlZCgic2VsZWN0ZWQiLCB0cnVlKTsKICAgICAgLy8gICAgIH0pOwogICAgICAvLyAgIC8vIHJpZ2h0IHBhcnQKICAgICAgLy8gICAvLyBsaW5lIGNoYXJ0CiAgICAgIC8vICAgLy8gaW5pdExpbmUoKTsKCiAgICAgIC8vICAgZGlzcGF0Y2guY2FsbCgibG9hZCIsIHRoaXMpOwogICAgICAvLyAgIGRpc3BhdGNoLmNhbGwoInN0YXRlY2hhbmdlIiwgdGhpcywgc2VsZWN0ZWRfeWVhcik7CiAgICAgIC8vIH0KCiAgICAgIGZ1bmN0aW9uIGRhdGFQcmVwKGdlb2pzb24sIGFyZWFkYXRhKSB7CiAgICAgICAgdmFyIGpzb25fZmVhdHVyZXMgPSBnZW9qc29uLmZlYXR1cmVzOwogICAgICAgIHZhciBjcmltZV9jb3VudCA9IG5ldyBNYXAoKTsKICAgICAgICB2YXIgeWVhcl9hcmVhX2NvdW50ID0gW107CiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhcmVhZGF0YS5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHRvdGFsX2NvdW50ID0gYXJlYWRhdGFbaV1bImNvdW50Il07CiAgICAgICAgICB2YXIgeWVhcnMgPSBPYmplY3Qua2V5cyhhcmVhZGF0YVtpXVsiYnlZZWFyIl0pOwogICAgICAgICAgdmFyIGFyZWEgPSBhcmVhZGF0YVtpXVsiQXJlYSBOYW1lIl07CiAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IHllYXJzLmxlbmd0aDsgaisrKSB7CiAgICAgICAgICAgIHZhciBjb3VudCA9IGFyZWFkYXRhW2ldWyJieVllYXIiXVt5ZWFyc1tqXV1bImNvdW50Il07CiAgICAgICAgICAgIHllYXJfYXJlYV9jb3VudC5wdXNoKHsKICAgICAgICAgICAgICB5ZWFyOiB5ZWFyc1tqXSwKICAgICAgICAgICAgICAiQXJlYSBOYW1lIjogYXJlYSwKICAgICAgICAgICAgICBjb3VudDogY291bnQsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgfQogICAgICAgICAgeWVhcl9hcmVhX2NvdW50LnB1c2goewogICAgICAgICAgICB5ZWFyOiAiQWxsIiwKICAgICAgICAgICAgIkFyZWEgTmFtZSI6IGFyZWEsCiAgICAgICAgICAgIGNvdW50OiB0b3RhbF9jb3VudCwKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgICB2YXIgbmVzdGVkX2RhdGEgPSBkMy5ncm91cCgKICAgICAgICAgIHllYXJfYXJlYV9jb3VudCwKICAgICAgICAgIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiBkWyJBcmVhIE5hbWUiXTsKICAgICAgICAgIH0sCiAgICAgICAgICBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICByZXR1cm4gZFsieWVhciJdOwogICAgICAgICAgfQogICAgICAgICk7CiAgICAgICAgbmVzdGVkX2RhdGEgPSBPYmplY3QuZnJvbUVudHJpZXMobmVzdGVkX2RhdGEpOwogICAgICAgIC8vIC5vYmplY3QoeWVhcl9hcmVhX2NvdW50KTsKICAgICAgICAvLyBkMwogICAgICAgIC8vIC5uZXN0KCkKICAgICAgICAvLyAua2V5KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgLy8gICByZXR1cm4gZFsiQXJlYSBOYW1lIl07CiAgICAgICAgLy8gfSkKICAgICAgICAvLyAua2V5KGZ1bmN0aW9uIChkKSB7CiAgICAgICAgLy8gICByZXR1cm4gZFsieWVhciJdOwogICAgICAgIC8vIH0pCiAgICAgICAgLy8gLm9iamVjdCh5ZWFyX2FyZWFfY291bnQpOwoKICAgICAgICBmb3IgKGkgPSAwOyBpIDwgYXJlYWRhdGEubGVuZ3RoOyBpKyspIHsKICAgICAgICAgIGNyaW1lX2NvdW50LnNldChhcmVhZGF0YVtpXVsiQXJlYSBOYW1lIl0sICthcmVhZGF0YVtpXS5jb3VudCk7CiAgICAgICAgfQogICAgICAgIGZvciAoaSA9IDA7IGkgPCBqc29uX2ZlYXR1cmVzLmxlbmd0aDsgaSsrKSB7CiAgICAgICAgICB2YXIgY3VyX2lkID0ganNvbl9mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzLm5hbWU7CiAgICAgICAgICBpZiAoY3VyX2lkIGluIG5lc3RlZF9kYXRhKSB7CiAgICAgICAgICAgIG5lc3RlZF9kYXRhW2N1cl9pZF0gPSBPYmplY3QuZnJvbUVudHJpZXMobmVzdGVkX2RhdGFbY3VyX2lkXSk7CiAgICAgICAgICAgIGpzb25fZmVhdHVyZXNbaV0ucHJvcGVydGllcy5ieVllYXIgPSBuZXN0ZWRfZGF0YVtjdXJfaWRdOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdmFyIHRlbXAgPSBbXTsKICAgICAgICAgICAgdGVtcC5wdXNoKHsKICAgICAgICAgICAgICB5ZWFyOiAiQWxsIiwKICAgICAgICAgICAgICAiQXJlYSBOYW1lIjoganNvbl9mZWF0dXJlc1tpXS5wcm9wZXJ0aWVzLm5hbWUsCiAgICAgICAgICAgICAgY291bnQ6IDAsCiAgICAgICAgICAgIH0pOwogICAgICAgICAgICB2YXIgdGVtcDIgPSB7IEFsbDogdGVtcCB9OwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0ZW1wMik7CiAgICAgICAgICAgIGpzb25fZmVhdHVyZXNbaV0ucHJvcGVydGllcy5ieVllYXIgPSB0ZW1wMjsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgcmV0dXJuIGpzb25fZmVhdHVyZXM7CiAgICAgIH0KICAgIH0sCiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiAoKSB7CiAgICAvLyBjb25zb2xlLmxvZygibW91bnRlZCIpOwogICAgLy8gY29uc29sZS5sb2coIkNvbWJpbmVkQ2hhcnQgcGFja2luZyIsIGQzLnZlcnNpb24pOwogICAgdGhpcy5Db21iaW5lZENoYXJ0KCk7CiAgfSwKfTsK"},{"version":3,"sources":["CombinedChart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"CombinedChart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"CombinedChart\">\n    <link href=\"css/bootstrap/bootstrap.min.css\" rel=\"stylesheet\" />\n    <div id=\"area\" class=\"jumbotron\">\n      <h4>Correlation between Safety Score Vs Rent price in Los Angeles</h4>\n      <br />\n      <p>\n        To understand the relationship between the rent and crime more\n        cohesively, we decided to introduce a new attribute, called, “Safety\n        Score”. This was calculated to consider that different crime types have\n        different severity levels and hence, should be given higher weightage\n        even if their frequency is low. Therefore, we calculated the crime score\n        first by aligning each crime type to it’s severity. After calculating\n        the crime score, the safety score were calculated using the crime score.\n      </p>\n\n      <h5>Safety Score Calculation</h5>\n      <p>\n        The crime dataset consists of a list of crimes with varying severity.\n        Intuitively, it can be understood that the more serious the crime the\n        higher it impacts the perception of security in a location. Based on\n        <a href=\"https://doi.org/10.1093/police/pax049\" target=\"_blank\"\n          >Comparing Methods for Measuring Crime Harm/Severity</a\n        >, weights are assigned to every crime and an overall value is\n        calculated for each location. Each crime in the crime dataset was\n        compared with the list of Notifiable Offence List Categories and given\n        the Crime Severity Score. The Crime Severity Score (CSS) is the score\n        assigned to a crime based on the mean sentence passed on those who were\n        convicted of the offense. Each score is normalized and the final crime\n        values for each location is calculated using the dot product of the\n        crime weight and the crime frequency matrices. Using these crime scores,\n        the safety scores are calculated by taking their negatives.\n      </p>\n\n      <h5>Final chart</h5>\n      <p>\n        In the cloropleth map on this page, the colors indicate the average rent\n        price for each neighborhood. When hovered over a neighborhood, the\n        average rent over the years in that neighborhood is shown in the\n        tooltip. Through the interactive feature, which allows users to select a\n        specific neighborhood on the map, one can dive deeper into the trends of\n        both safety score and average rent over the years for that specific\n        neighborhood. In general, the user can observe that as the safety score\n        increases, the rent price increases.\n      </p>\n      <div class=\"container\">\n        <div class=\"row\">\n          <div class=\"col-md-6\">\n            <div id=\"select-year\" style=\"text-align: center\"></div>\n            <div id=\"map-left\">\n              <!-- <svg id = \"svg_chart\"></svg> -->\n            </div>\n          </div>\n          <div id=\"map-right\" class=\"col-md-6\">\n            <h4 style=\"text-align: center\">\n              Safety Score Vs Rent price in LA by year\n            </h4>\n            <h6>* Line Chart Represents Rent Price</h6>\n            <h6>* Bar Chart Represents Safety Score</h6>\n            <div class=\"row\" id=\"map-line2\"></div>\n            <div class=\"row\" id=\"map-line\"></div>\n            <div id=\"area_name\"></div>\n            <!-- <svg class=\"row\" id=\"bar_chart\" width=\"100%\" height=\"500px\"></svg> -->\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nexport default {\n  name: \"CombinedChart\",\n  data: function () {\n    return {\n      chartData: null,\n    };\n  },\n  methods: {\n    CombinedChart() {\n      var width = 500;\n      var height = 600;\n      var projection = d3\n        .geoMercator()\n        .scale(15000)\n        // .scale(40000)\n        // Center the Map in LA\n        .center([-118.245, 34.05])\n        .translate([width / 2, height / 2]);\n      // var projection = d3.geoAlbersUsa()\n      //     .translate([width / 2, height / 2])\n      //     .scale([5000]);\n\n      // var tooltip = d3.select(\"body\").append(\"div\").attr(\"class\", \"toolTip\");\n      var tooltip = d3\n        .select(\"#map-left\")\n        .append(\"div\")\n        .attr(\"class\", \"toolTip\");\n      var tooltip_bar = d3\n        .select(\"#map-right\")\n        .append(\"div\")\n        .attr(\"class\", \"toolTip\");\n      // var tooltip_bar = d3.select(\"body\").append(\"div\").attr(\"class\", \"toolTip\");\n\n      var path = d3.geoPath().projection(projection);\n      var svg1 = d3\n        .select(\"body\")\n        .select(\"div#map-left\")\n        .append(\"svg\")\n        // .attr(\"viewBox\", \"0 0 500 600\");\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n      var color;\n      // multiple async tasks\n\n      var files = [\n        \"la-county.geojson\",\n        \"area_data.json\",\n        \"overall_data.json\",\n        \"bar_data.json\",\n        \"bar_overall.json\",\n      ];\n      var promises = [];\n\n      files.forEach(function (url) {\n        promises.push(d3.json(url));\n      });\n      Promise.all(promises).then(function (values) {\n        var geojson = values[0];\n        var areadata = values[1];\n        var overall = values[2];\n        var bar_data = values[3];\n        var bar_overall = values[4];\n        overall_data = overall;\n        bar_overall_data = bar_overall;\n        area_data = d3.group(areadata, function (d) {\n          return d[\"Area Name\"];\n        });\n        area_data = Object.fromEntries(area_data);\n        // .object(areadata);\n        // d3\n        // .nest()\n        // .key(function (d) {\n        //   return d[\"Area Name\"];\n        // })\n        // .object(areadata);\n        bar_area_data = bar_data;\n        var json_features = dataPrep(geojson, areadata);\n        // console.log(json_features);\n        // var json_features1 = dataPrep1(geojson, bar_data);\n        // col = [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"]\n        var col = [\n          \"#ffffcc\",\n          \"#ffeda0\",\n          \"#fed976\",\n          \"#feb24c\",\n          \"#fd8d3c\",\n          \"#fc4e2a\",\n          \"#e31a1c\",\n          \"#bd0026\",\n          \"#800026\",\n        ];\n        color = d3.scaleQuantize().range(col);\n        // .range(d3.schemeReds[9]);\n        svg1\n          .selectAll(\"path\")\n          .data(json_features)\n          .enter()\n          .append(\"path\")\n          .attr(\"class\", \"map\")\n          .attr(\"d\", path)\n          .on(\"click\", function (e, d) {\n            dispatch.call(\"areachange\", this, d);\n            // dispatch.call(\"areachange\", this, d);\n            d3.select(this).classed(\"selected\", true);\n          });\n        // right part\n        // line chart\n        // initLine();\n        // Adding legend\n        var l_color = d3.scaleQuantize([0, 2332], col);\n        var legendRectSize = 18;\n        var legendSpacing = 4;\n        var keys = [\n          \"$0 - $291.5\",\n          \"$291.6 - $583\",\n          \"$584 - $874.5\",\n          \"$874.6 - $1166\",\n          \"$1167 - $1457.5\",\n          \"$1457.6 - $1749\",\n          \"$1750 - $2040.5\",\n          \"$2040.6 - $2332\",\n        ];\n        // var keys = [\"1% - 10%\", \"11% - 20%\", \"21% - 30%\", \"31% - 40%\", \"41% - 50%\", \"51% - 60%\", \"61% - 70%\", \"71% - 80%\", \"81% - 90%\", \"91% - 100%\"];\n        var legend = svg1\n          .selectAll(\".legend\")\n          .data([291.5, 583, 874.5, 1166, 1457.5, 1749, 2040.5, 2332])\n          .enter()\n          .append(\"g\")\n          .attr(\"class\", \"legend\")\n          .attr(\"fill-opacity\", 0.7)\n          .attr(\"transform\", function (d, i) {\n            var height = legendRectSize + legendSpacing;\n            var horz = 5 * legendRectSize + 250;\n            var vert = i * height + 380;\n            return \"translate(\" + horz + \",\" + vert + \")\";\n          });\n\n        legend\n          .append(\"rect\")\n          .attr(\"width\", legendRectSize)\n          .attr(\"height\", legendRectSize)\n          .style(\"fill\", l_color)\n          .style(\"stroke\", l_color);\n\n        legend\n          .append(\"text\")\n          .attr(\"x\", legendRectSize + legendSpacing)\n          .attr(\"y\", legendRectSize - legendSpacing)\n          .text(function (d, i) {\n            return keys[i];\n          });\n\n        dispatch.call(\"load\", this);\n        dispatch.call(\"statechange\", this, selected_year);\n      });\n\n      // var queue = d3.queue();\n\n      // queue.defer(d3.json, \"lapd-divisions.geojson\")\n      // queue.defer(d3.json, \"data processing/dataByAreaV2.json\")\n      // queue.defer(d3.json, \"data processing/dataOverall.json\")\n\n      // queue.defer(d3.json, \"la-county.geojson\");\n      // queue.defer(d3.json, \"data processing/area_data.json\");\n      // queue.defer(d3.json, \"data processing/overall_data.json\");\n      // queue.defer(d3.json, \"data processing/bar_data.json\");\n      // queue.defer(d3.json, \"data processing/bar_overall.json\");\n\n      // queue.await(ready);\n\n      // var select_years = ['All', '2017', '2016', '2015', '2014', '2013', '2012', '2011', '2010'];\n      // var select_years = [\"All\"];\n\n      // current selection on year and area, all times and all areas by default\n      var selected_year = \"All\";\n      var selected_area = null;\n      var overall_data;\n      var area_data;\n      var bar_overall_data;\n      // var bar_data;\n      // var area_name;\n      var bar_area_data;\n      // dispatch\n      var dispatch = d3.dispatch(\"load\", \"statechange\", \"areachange\");\n\n      dispatch.on(\"load.reset\", function () {\n        var button = d3\n          .select(\"body\")\n          .select(\"div#select-year\")\n          .append(\"button\")\n          .attr(\"class\", \"btn btn-secondary\")\n          .attr(\"type\", \"button\")\n          .attr(\"disabled\", \"disabled\")\n          // .attr(\"disabled\", null)\n          .on(\"click\", function () {\n            dispatch.call(\"areachange\", this, null);\n          });\n        button.text(\"RESET\");\n\n        dispatch.on(\"areachange.reset\", function (d) {\n          if (!d) {\n            button.attr(\"disabled\", \"disabled\");\n            // button.attr(\"disabled\", null);\n            button.text(\"RESET\");\n          } else {\n            button.attr(\"disabled\", null);\n            button.text(\"RESET\");\n          }\n        });\n      });\n\n      dispatch.on(\"load.map\", function () {\n        var paths = svg1.selectAll(\"path\");\n        var paths_data = paths.data();\n        // console.log(paths_data);\n        paths.on(\"mouseout\", function () {\n          tooltip.style(\"display\", \"none\");\n        });\n        // console.log(paths_data);\n\n        // for (var j = 0; j < paths_data.length; j++) {\n        //   paths_data[j].properties.byYear = Object.fromEntries(paths_data[j].properties.byYear);\n\n        //   console.log(paths_data[j].properties.byYear);\n        // }\n\n        dispatch.on(\"statechange.map\", function (y) {\n          color.domain([\n            Math.floor(\n              d3.min(paths_data, function (d) {\n                return d.properties.byYear[y][0][\"count\"];\n              })\n            ),\n            Math.ceil(\n              d3.max(paths_data, function (d) {\n                return d.properties.byYear[y][0][\"count\"];\n              })\n            ),\n          ]);\n          paths\n            .transition()\n            .duration(800)\n            .attr(\"fill\", function (d) {\n              return color(d.properties.byYear[y][0][\"count\"]);\n            });\n          paths.on(\"mousemove\", function (event, d) {\n            //event.pageX\n            // console.log(\"inside mousemove\",d)\n            // const[x_point, y_point] = d3.pointer(d);\n            tooltip.style(\"left\", event.pageX - 230 + \"px\");\n            tooltip.style(\"top\", event.pageY - 650 + \"px\");\n            tooltip.style(\"display\", \"inline-block\");\n            tooltip.html(\n              \"<b>\" +\n                d.properties.name +\n                \"</b><br>#Avg Rent: $\" +\n                d.properties.byYear[y][0][\"count\"]\n            );\n            // var area_name = d.properties.name;\n          });\n        });\n      });\n\n      dispatch.on(\"load.line\", function () {\n        var w = 500,\n          h = 200;\n        var margin = { top: 10, right: 20, bottom: 30, left: 50 },\n          width = w - margin.left - margin.right,\n          height = h - margin.top - margin.bottom;\n        var svg = d3\n          .select(\"body\")\n          .select(\"div#map-right\")\n          .select(\"div#map-line\")\n          .append(\"svg\")\n          .attr(\"width\", w)\n          .attr(\"height\", h);\n        var g = svg\n          .append(\"g\")\n          .attr(\n            \"transform\",\n            \"translate(\" + margin.left + \",\" + margin.top + \")\"\n          );\n        // var g_temp = svg\n        //   .append(\"g\")\n        //   .attr(\n        //     \"transform\",\n        //     \"translate(\" + margin.left + \",\" + margin.top + \")\"\n        //   );\n        g.append(\"g\")\n          .attr(\"transform\", \"translate(0,\" + height + \")\")\n          .attr(\"class\", \"xaxis\");\n\n        var yg = g.append(\"g\").attr(\"class\", \"yaxis\");\n\n        yg.append(\"text\")\n          .attr(\"fill\", \"#000\")\n          .attr(\"transform\", \"rotate(-90)\")\n          .attr(\"y\", 6)\n          .attr(\"dy\", \"0.71em\")\n          .attr(\"text-anchor\", \"end\")\n          .text(\"#Rent Price\");\n\n        yg.append(\"text\")\n          .attr(\"fill\", \"#000\")\n          .attr(\"transform\", \"rotate(90)\")\n          .attr(\"x\", 50)\n          .attr(\"y\", -width + 2)\n          .attr(\"dy\", \"0.71em\")\n          .attr(\"text-anchor\", \"end\")\n          .style(\"stroke\", \"orange\")\n          .text(\"Safety Score\");\n\n        g.append(\"path\")\n          .attr(\"class\", \"path\")\n          .attr(\"fill\", \"none\")\n          .attr(\"stroke\", \" #800026\")\n          .attr(\"stroke-linejoin\", \"round\")\n          .attr(\"stroke-linecap\", \"round\")\n          .attr(\"stroke-width\", 1.5);\n        // g.append(\"g\")\n        //   .attr(\"fill\", \"steelblue\")\n        //   .attr(\"fill-opacity\", 0.8)\n        // .selectAll(\"rect\")\n        // .data(\"path\")\n        // .join(\"rect\")\n        //   .attr(\"x\", d => x(d.year))\n        //   .attr(\"width\", x.bandwidth())\n        //   .attr(\"y\", d => y1(d.sales))\n        //   .attr(\"height\", d => y1(0) - y1(d.sales))\n        var current_dataset;\n        if (selected_area == null) {\n          current_dataset = overall_data;\n        } else {\n          current_dataset = area_data[selected_area][0];\n          // console.log(current_dataset);\n        }\n        dispatch.on(\"statechange.line\", function (y) {\n          if (y == \"All\") {\n            // window.addEventListener(\"resize\", drawLine);\n            drawLine(current_dataset[\"CountByMonth\"]);\n          } else {\n            var month_filtered = Object.keys(\n              current_dataset[\"CountByMonth\"]\n            ).filter(function (key) {\n              return key.includes(y);\n            });\n            var time_subset = {};\n            for (var i = 0; i < month_filtered.length; i++) {\n              time_subset[month_filtered[i]] =\n                current_dataset[\"CountByMonth\"][month_filtered[i]];\n            }\n            // window.addEventListener(\"resize\", drawLine);\n            drawLine(time_subset);\n          }\n        });\n        dispatch.on(\"areachange.line\", function (data) {\n          var area;\n          if (!data) {\n            current_dataset = overall_data;\n            // console.log(current_dataset)\n            if (selected_year == \"All\") {\n              // window.addEventListener(\"resize\", drawLine);\n              drawLine(current_dataset[\"CountByMonth\"]);\n            } else {\n              var month_filtered = Object.keys(\n                current_dataset[\"CountByMonth\"]\n              ).filter(function (key) {\n                return key.includes(selected_year);\n              });\n              var time_subset = {};\n              for (var i = 0; i < month_filtered.length; i++) {\n                time_subset[month_filtered[i]] =\n                  current_dataset[\"CountByMonth\"][month_filtered[i]];\n              }\n              // window.addEventListener(\"resize\", drawLine);\n              drawLine(time_subset);\n            }\n          } else {\n            area = data.properties.name;\n            current_dataset = area_data[area][0];\n            if (selected_year == \"All\") {\n              // window.addEventListener(\"resize\", drawLine);\n              drawLine(current_dataset[\"CountByMonth\"]);\n            } else {\n              month_filtered = Object.keys(\n                current_dataset[\"CountByMonth\"]\n              ).filter(function (key) {\n                return key.includes(selected_year);\n              });\n              time_subset = {};\n              for (i = 0; i < month_filtered.length; i++) {\n                time_subset[month_filtered[i]] =\n                  current_dataset[\"CountByMonth\"][month_filtered[i]];\n              }\n              // window.addEventListener(\"resize\", drawLine);\n              drawLine(time_subset);\n            }\n          }\n        });\n\n        function drawLine(data) {\n          // customized multi time formats\n          // var formatMillisecond = d3.timeFormat(\".%L\"),\n          //   formatSecond = d3.timeFormat(\":%S\"),\n          //   formatMinute = d3.timeFormat(\"%I:%M\"),\n          //   formatHour = d3.timeFormat(\"%I %p\"),\n          //   formatDay = d3.timeFormat(\"%a %d\"),\n          //   formatWeek = d3.timeFormat(\"%b %d\"),\n          //   formatMonth = d3.timeFormat(\"%b\"),\n          //   formatYear = d3.timeFormat(\"%Y\");\n\n          // function multiFormat(date) {\n          //   return (d3.timeSecond(date) < date\n          //     ? formatMillisecond\n          //     : d3.timeMinute(date) < date\n          //     ? formatSecond\n          //     : d3.timeHour(date) < date\n          //     ? formatMinute\n          //     : d3.timeDay(date) < date\n          //     ? formatHour\n          //     : d3.timeMonth(date) < date\n          //     ? d3.timeWeek(date) < date\n          //       ? formatDay\n          //       : formatWeek\n          //     : d3.timeYear(date) < date\n          //     ? formatMonth\n          //     : formatYear)(date);\n          // }\n          // multiFormat()\n          // if (\"10/2017\" in data) {\n          //     delete data[\"10/2017\"];\n          // }\n\n          // var parseTime = d3.timeParse(\"%m/%Y\");\n          // var parseTime = d3.timeParse(\"%Y\");\n          // data = Object.entries(data); // [{key:.., value:..}]\n          // console.log(data);\n          // data.forEach(function (entry) {\n          //   entry[\"key\"] = parseTime(entry[\"key\"]);\n          // });\n\n          // data = Object.keys(data).sort();\n\n          // var x = d3.scaleTime()\n          //     .domain(d3.extent(data, function (d) { return d['key']; }))\n          //     .rangeRound([0, width]);\n          // console.log(Object.keys(data));\n\n          var new_data = {};\n          // console.log(data);\n          data = Object.entries(data);\n          data.forEach(function (d) {\n            d[0] = d[0].slice(3);\n            new_data[d[0]] = d[1];\n          });\n          // console.log(data1);\n          // console.log(new_data);\n\n          data = new_data;\n\n          var x = d3\n            .scaleBand()\n            .padding(0.1)\n            .domain(Object.keys(data))\n            .rangeRound([0, width]);\n\n          var y1 = d3\n            .scaleLinear()\n            .domain(d3.extent(Object.values(data)))\n            .rangeRound([height, 0])\n            .nice();\n\n          // var y2 = d3.scaleLinear()\n          //     .domain(d3.extent(data, function (d) { return d['value']; }))\n          //     .rangeRound([height, 0])\n          //     .nice();\n\n          g.select(\"g.xaxis\").transition().duration(400).call(d3.axisBottom(x));\n\n          g.select(\"g.yaxis\")\n            .transition()\n            .duration(400)\n            .call(d3.axisLeft(y1).tickFormat(d3.format(\"$\")));\n\n          yg.selectAll(\"text\")\n            .style(\"stroke\", \"#800026\")\n            .attr(\"stroke-width\", 0.2);\n\n          data = Object.entries(data);\n          // console.log(data);\n          // console.log(temp_list);\n          // console.log(Object.entries(data));\n          g.select(\"path.path\")\n            .data([data])\n            .transition()\n            .duration(400)\n            .style(\"stroke\", \"#800026\")\n            .attr(\n              \"d\",\n              d3\n                .line()\n                .x(function (d) {\n                  // console.log(x(d[0])+30);\n                  return x(d[0]) + 30;\n                })\n                .y(function (d) {\n                  // console.log(y1(d[1]));\n                  return y1(d[1]);\n                })\n            );\n        }\n      });\n\n      dispatch.on(\"load.bar\", function () {\n        var w = 550,\n          h = 200;\n        // var theData = undefined;\n\n        var margin = { top: 10, right: 20, bottom: 30, left: 100, extra: 50 };\n        // width = w - margin.left - margin.right,\n        // height = h - margin.top - margin.bottom;\n\n        var x2 = d3.scaleBand().padding(0.1);\n        var y2 = d3.scaleLinear();\n\n        var svg2 = d3\n          .select(\"body\")\n          .select(\"div#map-right\")\n          .select(\"div#map-line\")\n          .select(\"svg\")\n          .attr(\"width\", w)\n          .attr(\"height\", h);\n\n        var g2 = svg2\n          .append(\"g\")\n          .attr(\n            \"transform\",\n            \"translate(\" + margin.extra + \",\" + margin.top + \")\"\n          );\n\n        g2.append(\"g\").attr(\"class\", \"axis axis--x\");\n\n        g2.append(\"g\").attr(\"class\", \"axis axis--y\");\n\n        var current_dataset;\n        if (selected_area == null) {\n          current_dataset = bar_overall_data;\n        } else {\n          current_dataset = bar_area_data[selected_area][0];\n        }\n\n        dispatch.on(\"statechange.bar\", function (y) {\n          if (y == \"All\") {\n            // window.addEventListener(\"resize\", drawBar);\n            drawBar(current_dataset[\"CountByMonth\"]);\n          } else {\n            var month_filtered = Object.keys(\n              current_dataset[\"CountByMonth\"]\n            ).filter(function (key) {\n              return key.includes(y);\n            });\n            var time_subset = {};\n            for (var i = 0; i < month_filtered.length; i++) {\n              time_subset[month_filtered[i]] =\n                current_dataset[\"CountByMonth\"][month_filtered[i]];\n            }\n            // window.addEventListener(\"resize\", drawBar);\n            drawBar(time_subset);\n          }\n        });\n        dispatch.on(\"areachange.bar\", function (data1) {\n          // console.log(\"areachange_bar\",data1)\n          var area;\n          if (!data1) {\n            current_dataset = bar_overall_data;\n            if (selected_year == \"All\") {\n              // window.addEventListener(\"resize\", drawBar);\n              drawBar(current_dataset[\"CountByMonth\"]);\n            } else {\n              var month_filtered = Object.keys(\n                current_dataset[\"CountByMonth\"]\n              ).filter(function (key) {\n                return key.includes(selected_year);\n              });\n              var time_subset = {};\n              for (var i = 0; i < month_filtered.length; i++) {\n                time_subset[month_filtered[i]] =\n                  current_dataset[\"CountByMonth\"][month_filtered[i]];\n              }\n              // window.addEventListener(\"resize\", drawBar);\n              drawBar(time_subset);\n            }\n          } else {\n            // this.__data__.properties.name\n            area = data1.properties.name;\n            for (i = 0; i < bar_area_data.length; i++) {\n              if (bar_area_data[i][\"Area Name\"] == area) {\n                current_dataset = bar_area_data[i];\n              }\n            }\n            // console.log(current_dataset);\n            // current_dataset = bar_area_data[area][0];\n            if (selected_year == \"All\") {\n              // window.addEventListener(\"resize\", drawBar);\n              drawBar(current_dataset[\"CountByMonth\"]);\n            } else {\n              month_filtered = Object.keys(\n                current_dataset[\"CountByMonth\"]\n              ).filter(function (key) {\n                return key.includes(selected_year);\n              });\n              time_subset = {};\n              for (i = 0; i < month_filtered.length; i++) {\n                time_subset[month_filtered[i]] =\n                  current_dataset[\"CountByMonth\"][month_filtered[i]];\n              }\n              // window.addEventListener(\"resize\", drawBar);\n              drawBar(time_subset);\n            }\n          }\n        });\n\n        function drawBar(data1) {\n          var bounds = svg2.node().getBoundingClientRect(),\n            width = bounds.width - margin.left - margin.right,\n            height1 = bounds.height - margin.top - margin.bottom;\n          // height = bounds.height - margin.top - margin.bottom;\n\n          // console.log(height1);\n          var new_data = {};\n          // console.log(data1);\n          data1 = Object.entries(data1);\n          data1.forEach(function (d) {\n            d[0] = d[0].slice(3);\n            new_data[d[0]] = d[1];\n          });\n          // console.log(data1);\n          // console.log(new_data);\n\n          data1 = new_data;\n\n          x2.rangeRound([0, width]);\n          y2.rangeRound([height1, 0]);\n\n          x2.domain(Object.keys(data1));\n          y2.domain([0, d3.max(Object.values(data1))]);\n\n          g2.select(\".axis--x\")\n            .attr(\"transform\", \"translate(0,\" + height + \")\")\n            .call(d3.axisBottom(x2));\n\n          g2.select(\".axis--y\")\n            .attr(\"transform\", \"translate(\" + width + \",0)\")\n            .call(d3.axisRight(y2).tickFormat(d3.format(\"d\")));\n\n          g2.selectAll(\"text\")\n            .style(\"stroke\", \"orange\")\n            .attr(\"stroke-width\", 0.2);\n\n          data1 = Object.entries(data1);\n          var bars = g2.selectAll(\".bar\").data(data1);\n          // .enter().append(\"g\").attr(\"class\", \"bar\");\n\n          // ENTER\n          bars\n            .enter()\n            .append(\"rect\")\n            .attr(\"class\", \"bar\")\n            .attr(\"x\", function (d) {\n              return x2(d[0]);\n            })\n            .attr(\"y\", function (d) {\n              return y2(d[1]);\n            })\n            .attr(\"width\", x2.bandwidth())\n            .attr(\"height\", function (d) {\n              return height1 - y2(d[1]);\n            });\n\n          // UPDATE\n          bars\n            .attr(\"x\", function (d) {\n              return x2(d[0]);\n            })\n            .attr(\"y\", function (d) {\n              return y2(d[1]);\n            })\n            .attr(\"width\", x2.bandwidth())\n            .attr(\"height\", function (d) {\n              return height1 - y2(d[1]);\n            });\n          // bars\n          //   .remove()\n          //   .selectAll(\".bar\")\n          //   .data(data1)\n          //   .select(\"rect\")\n          //   .transition()\n          //   .attr(\"x\", function (d) {\n          //     console.log(d[0]);\n          //     return x2(d[0]);\n          //   })\n          //   .attr(\"y\", function (d) {\n          //     // console.log(d[1]);\n          //     return y2(d[1]);\n          //   })\n          //   .attr(\"width\", x2.bandwidth())\n          //   .attr(\"height\", function (d) {\n          //     console.log(d[1]);\n          //     return height1 - y2(d[1]);\n          //   });\n\n          bars.on(\"mousemove\", function (event, d) {\n            // const[x_point, y_point] = d3.pointer(d);\n            tooltip_bar.style(\"left\", event.pageX - 810 + \"px\");\n            tooltip_bar.style(\"top\", event.pageY - 550 + \"px\");\n            tooltip_bar.style(\"display\", \"inline-block\");\n            tooltip_bar.html(\n              \"<b>Year: \" + d[0] + \"</b><br>Safety Score: \" + d[1]\n            );\n          });\n\n          bars.on(\"mouseout\", function () {\n            tooltip_bar.style(\"display\", \"none\");\n          });\n          // EXIT\n          bars.exit().remove();\n\n          // dispatch.on(\"areachange.areaname\", function (area_name) {\n          //      d3.select('body')\n          //         .select('div#map-right')\n          //         .select(\"div#map-line\")\n          //         .select(\"#area_name\")\n          //         .text(area_name);\n          // }\n\n          // var x = d3.scaleTime()\n          //     .domain(d3.extent(data, function (d) { return d['key']; }))\n          //     .rangeRound([0, width]);\n          // var y = d3.scaleLinear()\n          //     .domain(d3.extent(data, function (d) { return d['value']; }))\n          //     .rangeRound([height, 0])\n          //     .nice();\n          // var bar = d3.line()\n          //     .x(function (d) { return x(d['key']); })\n          //     .y(function (d) { return y(d['value']); });\n          // g2.select(\"g.xaxis\")\n          //     .transition()\n          //     .duration(400)\n          //     .call(d3.axisBottom(x).tickFormat(multiFormat));\n          // g2.select(\"g.yaxis\")\n          //     .transition()\n          //     .duration(400)\n          //     .call(d3.axisLeft(y).tickFormat(d3.format(\"$\")));\n          // g2.select(\"path.path\")\n          //     .datum(data)\n          //     .transition()\n          //     .duration(400)\n          //     .attr(\"d\", line2);\n        }\n      });\n\n      dispatch.on(\"statechange.title\", function (y) {\n        d3.select(\"body\")\n          .select(\"div#area\")\n          .select(\"span#current-area\")\n          .text(\n            (selected_area == null ? \"All Divisions\" : selected_area) +\n              \" - \" +\n              (y == \"All\" ? \"All Times\" : y)\n          );\n      });\n\n      dispatch.on(\"areachange.title\", function (data1) {\n        d3.selectAll(\"path\").classed(\"selected\", false);\n        if (data1) {\n          selected_area = data1.properties.name;\n        } else {\n          selected_area = null;\n        }\n\n        // title on selected area\n        d3.select(\"body\")\n          .select(\"div#map-right\")\n          .select(\"div#area_name\")\n          .text(selected_area ? selected_area : \"All Neighborhood\");\n      });\n\n      // function ready(error, geojson, areadata, overall, bar_data, bar_overall) {\n      //   if (error) throw error;\n      //   overall_data = overall;\n      //   bar_overall_data = bar_overall;\n      //   area_data = d3\n      //     .group(function (d) {\n      //       return d[\"Area Name\"];\n      //     })\n      //     .object(areadata);\n      //   // d3\n      //   // .nest()\n      //   // .key(function (d) {\n      //   //   return d[\"Area Name\"];\n      //   // })\n      //   // .object(areadata);\n      //   bar_area_data = bar_data;\n      //   console.log(bar_area_data);\n      //   var json_features = dataPrep(geojson, areadata);\n      //   // var json_features1 = dataPrep1(geojson, bar_data);\n      //   // col = [\"#67001f\",\"#b2182b\",\"#d6604d\",\"#f4a582\",\"#fddbc7\",\"#f7f7f7\",\"#d1e5f0\",\"#92c5de\",\"#4393c3\",\"#2166ac\",\"#053061\"]\n      //   var col = [\n      //     \"#ffffcc\",\n      //     \"#ffeda0\",\n      //     \"#fed976\",\n      //     \"#feb24c\",\n      //     \"#fd8d3c\",\n      //     \"#fc4e2a\",\n      //     \"#e31a1c\",\n      //     \"#bd0026\",\n      //     \"#800026\",\n      //   ];\n      //   color = d3.scaleQuantize().range(col);\n      //   // .range(d3.schemeReds[9]);\n      //   svg1\n      //     .selectAll(\"path\")\n      //     .data(json_features)\n      //     .enter()\n      //     .append(\"path\")\n      //     .attr(\"class\", \"map\")\n      //     .attr(\"d\", path)\n      //     .on(\"click\", function (d) {\n      //       dispatch.call(\"areachange\", this, d);\n      //       // dispatch.call(\"areachange\", this, d);\n      //       d3.select(this).classed(\"selected\", true);\n      //     });\n      //   // right part\n      //   // line chart\n      //   // initLine();\n\n      //   dispatch.call(\"load\", this);\n      //   dispatch.call(\"statechange\", this, selected_year);\n      // }\n\n      function dataPrep(geojson, areadata) {\n        var json_features = geojson.features;\n        var crime_count = new Map();\n        var year_area_count = [];\n        for (var i = 0; i < areadata.length; i++) {\n          var total_count = areadata[i][\"count\"];\n          var years = Object.keys(areadata[i][\"byYear\"]);\n          var area = areadata[i][\"Area Name\"];\n          for (var j = 0; j < years.length; j++) {\n            var count = areadata[i][\"byYear\"][years[j]][\"count\"];\n            year_area_count.push({\n              year: years[j],\n              \"Area Name\": area,\n              count: count,\n            });\n          }\n          year_area_count.push({\n            year: \"All\",\n            \"Area Name\": area,\n            count: total_count,\n          });\n        }\n        var nested_data = d3.group(\n          year_area_count,\n          function (d) {\n            return d[\"Area Name\"];\n          },\n          function (d) {\n            return d[\"year\"];\n          }\n        );\n        nested_data = Object.fromEntries(nested_data);\n        // .object(year_area_count);\n        // d3\n        // .nest()\n        // .key(function (d) {\n        //   return d[\"Area Name\"];\n        // })\n        // .key(function (d) {\n        //   return d[\"year\"];\n        // })\n        // .object(year_area_count);\n\n        for (i = 0; i < areadata.length; i++) {\n          crime_count.set(areadata[i][\"Area Name\"], +areadata[i].count);\n        }\n        for (i = 0; i < json_features.length; i++) {\n          var cur_id = json_features[i].properties.name;\n          if (cur_id in nested_data) {\n            nested_data[cur_id] = Object.fromEntries(nested_data[cur_id]);\n            json_features[i].properties.byYear = nested_data[cur_id];\n          } else {\n            var temp = [];\n            temp.push({\n              year: \"All\",\n              \"Area Name\": json_features[i].properties.name,\n              count: 0,\n            });\n            var temp2 = { All: temp };\n            // console.log(temp2);\n            json_features[i].properties.byYear = temp2;\n          }\n        }\n        return json_features;\n      }\n    },\n  },\n  mounted: function () {\n    // console.log(\"mounted\");\n    // console.log(\"CombinedChart packing\", d3.version);\n    this.CombinedChart();\n  },\n};\n</script>\n\n<!-- \"scoped\" attribute limits CSS to this component only -->\n<style scoped>\n>>> path.map {\n  fill-opacity: 0.7;\n  stroke: #fff;\n  stroke-width: 1px;\n}\n\n>>> path.map:hover {\n  fill-opacity: 1;\n  stroke: #000;\n  stroke-width: 1px;\n}\n>>> path.map.selected {\n  fill-opacity: 0.75;\n  fill: #000000;\n}\n\n>>> .toolTip {\n  font-family: \"Helvetica Neue\", Helvetica, Arial, sans-serif;\n  position: absolute;\n  display: none;\n  width: auto;\n  height: auto;\n  background: none repeat scroll 0 0 white;\n  border: 0 none;\n  border-radius: 8px 8px 8px 8px;\n  box-shadow: -3px 3px 15px #888888;\n  color: black;\n  font: 12px sans-serif;\n  padding: 5px;\n  text-align: center;\n}\n>>> .line {\n  fill: none;\n  stroke: steelblue;\n  stroke-width: 4px;\n}\n\n>>> .axisSteelBlue text {\n  fill: steelblue;\n}\n\n>>> .axisRed text {\n  fill: red;\n}\n\n>>> text {\n  font-family: sans-serif;\n}\n\n>>> .area_text {\n  font-family: sans-serif;\n}\n\n>>> .bar {\n  fill: Orange;\n  opacity: 0.4;\n}\n\n>>> .bar:hover {\n  fill: pink;\n}\n\n>>> .axis--x path {\n  display: none;\n}\n\n>>> .rightAxis {\n  fill: #ffffcc;\n}\n\n>>> .leftAxis {\n  color: #800026;\n}\n\n>>> .d3-legend {\n  position: absolute;\n  fill-opacity: 0.7;\n  left: 500px;\n  top: 450px;\n}\n</style>\n"]}]}