{"remainingRequest":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/src/views/D3Chart.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/src/views/D3Chart.vue","mtime":1606699844330},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/posha/Documents/GitHub/DSCI554/project-the-vizards/demo/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCAqIGFzIGQzIGZyb20gImQzIjsKCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiZDNDaGFydCIsCiAgZGF0YTogZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHsKICAgICAgY2hhcnREYXRhOiBudWxsLAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGJhckNoYXJ0KGRhdGEpIHsKICAgICAgdmFyIHdpZHRoID0gNjAwOwogICAgICB2YXIgaGVpZ2h0ID0gd2lkdGg7CgogICAgICB2YXIgcGFjayA9IChkYXRhKSA9PgogICAgICAgIGQzLnBhY2soKS5zaXplKFt3aWR0aCwgaGVpZ2h0XSkucGFkZGluZygzKSgKICAgICAgICAgIGQzCiAgICAgICAgICAgIC5oaWVyYXJjaHkoZGF0YSkKICAgICAgICAgICAgLnN1bSgoZCkgPT4gZC52YWx1ZSkKICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IGIudmFsdWUgLSBhLnZhbHVlKQogICAgICAgICk7CiAgICAgIHZhciBjb2xvciA9IGQzCiAgICAgICAgLnNjYWxlTGluZWFyKCkKICAgICAgICAuZG9tYWluKFswLCA1XSkKICAgICAgICAvLyAucmFuZ2UoWyJoc2woMTUyLDgwJSw4MCUpIiwgImhzbCgyMjgsMzAlLDQwJSkiXSkKICAgICAgICAvLyAucmFuZ2UoWyIjZmZmN2VjIiwiIzdmMDAwMCJdKQogICAgICAgIC5yYW5nZShbIiNmZWU4YzgiLCAiIzdmMDAwMCJdKQoKICAgICAgICAuaW50ZXJwb2xhdGUoZDMuaW50ZXJwb2xhdGVIc2xMb25nKTsKCiAgICAgIGNvbnN0IHJvb3QgPSBwYWNrKGRhdGEpOwogICAgICBsZXQgZm9jdXMgPSByb290OwogICAgICBsZXQgdmlldzsKCiAgICAgIHZhciBzdmcgPSBkMwogICAgICAgIC5zZWxlY3QoIiNjaGFydCIpCiAgICAgICAgLmF0dHIoIndpZHRoIiwgNjAwKQogICAgICAgIC5hdHRyKCJoZWlnaHQiLCA2MDApCiAgICAgICAgLmF0dHIoInZpZXdCb3giLCBgLSR7d2lkdGggLyAyfSAtJHtoZWlnaHQgLyAyfSAke3dpZHRofSAke2hlaWdodH1gKQogICAgICAgIC5zdHlsZSgiZGlzcGxheSIsICJibG9jayIpCiAgICAgICAgLnN0eWxlKCJtYXJnaW4iLCAiMCArMTRweCIpCiAgICAgICAgLnN0eWxlKCJiYWNrZ3JvdW5kIiwgY29sb3IoMCkpCiAgICAgICAgLnN0eWxlKCJjdXJzb3IiLCAicG9pbnRlciIpCiAgICAgICAgLm9uKCJjbGljayIsIChldmVudCkgPT4gem9vbShldmVudCwgcm9vdCkpOwoKICAgICAgdmFyIG5vZGUgPSBzdmcKICAgICAgICAuYXBwZW5kKCJnIikKICAgICAgICAuc2VsZWN0QWxsKCJjaXJjbGUiKQogICAgICAgIC5kYXRhKHJvb3QuZGVzY2VuZGFudHMoKS5zbGljZSgxKSkKICAgICAgICAuam9pbigiY2lyY2xlIikKICAgICAgICAuYXR0cigiZmlsbCIsIChkKSA9PiAoZC5jaGlsZHJlbiA/IGNvbG9yKGQuZGVwdGgpIDogIndoaXRlIikpCiAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnRzIiwgKGQpID0+ICghZC5jaGlsZHJlbiA/ICJub25lIiA6IG51bGwpKQogICAgICAgIC5vbigibW91c2VvdmVyIiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInN0cm9rZSIsICIjMDAwIik7CiAgICAgICAgfSkKICAgICAgICAub24oIm1vdXNlb3V0IiwgZnVuY3Rpb24gKCkgewogICAgICAgICAgZDMuc2VsZWN0KHRoaXMpLmF0dHIoInN0cm9rZSIsIG51bGwpOwogICAgICAgIH0pCiAgICAgICAgLm9uKAogICAgICAgICAgImNsaWNrIiwKICAgICAgICAgIChldmVudCwgZCkgPT4gZm9jdXMgIT09IGQgJiYgKHpvb20oZXZlbnQsIGQpLCBldmVudC5zdG9wUHJvcGFnYXRpb24oKSkKICAgICAgICApOwoKICAgICAgdmFyIGxhYmVsID0gc3ZnCiAgICAgICAgLmFwcGVuZCgiZyIpCiAgICAgICAgLnN0eWxlKCJmb250IiwgIjEwcHggc2Fucy1zZXJpZiIpCiAgICAgICAgLmF0dHIoInBvaW50ZXItZXZlbnRzIiwgIm5vbmUiKQogICAgICAgIC5hdHRyKCJ0ZXh0LWFuY2hvciIsICJtaWRkbGUiKQogICAgICAgIC5zZWxlY3RBbGwoInRleHQiKQogICAgICAgIC5kYXRhKHJvb3QuZGVzY2VuZGFudHMoKSkKICAgICAgICAuam9pbigidGV4dCIpCiAgICAgICAgLnN0eWxlKCJmaWxsLW9wYWNpdHkiLCAoZCkgPT4gKGQucGFyZW50ID09PSByb290ID8gMSA6IDApKQogICAgICAgIC5zdHlsZSgiZGlzcGxheSIsIChkKSA9PiAoZC5wYXJlbnQgPT09IHJvb3QgPyAiaW5saW5lIiA6ICJub25lIikpCiAgICAgICAgLnRleHQoKGQpID0+IGQuZGF0YS5uYW1lKTsKCiAgICAgIHpvb21Ubyhbcm9vdC54LCByb290LnksIHJvb3QuciAqIDJdKTsKCiAgICAgIGZ1bmN0aW9uIHpvb21Ubyh2KSB7CiAgICAgICAgdmFyIGsgPSB3aWR0aCAvIHZbMl07CgogICAgICAgIHZpZXcgPSB2OwogICAgICAgIGxhYmVsLmF0dHIoCiAgICAgICAgICAidHJhbnNmb3JtIiwKICAgICAgICAgIChkKSA9PiBgdHJhbnNsYXRlKCR7KGQueCAtIHZbMF0pICoga30sJHsoZC55IC0gdlsxXSkgKiBrfSlgCiAgICAgICAgKTsKICAgICAgICBub2RlLmF0dHIoCiAgICAgICAgICAidHJhbnNmb3JtIiwKICAgICAgICAgIChkKSA9PiBgdHJhbnNsYXRlKCR7KGQueCAtIHZbMF0pICoga30sJHsoZC55IC0gdlsxXSkgKiBrfSlgCiAgICAgICAgKTsKICAgICAgICBub2RlLmF0dHIoInIiLCAoZCkgPT4gZC5yICogayk7CiAgICAgIH0KCiAgICAgIGZ1bmN0aW9uIHpvb20oZXZlbnQsIGQpIHsKICAgICAgICAvLyB2YXIgZm9jdXMwID0gZm9jdXM7CgogICAgICAgIGZvY3VzID0gZDsKCiAgICAgICAgdmFyIHRyYW5zaXRpb24gPSBzdmcKICAgICAgICAgIC50cmFuc2l0aW9uKCkKICAgICAgICAgIC5kdXJhdGlvbihldmVudC5hbHRLZXkgPyA3NTAwIDogNzUwKQogICAgICAgICAgLnR3ZWVuKCJ6b29tIiwgKCkgPT4gewogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyhkKTsKICAgICAgICAgICAgdmFyIGkgPSBkMy5pbnRlcnBvbGF0ZVpvb20odmlldywgW2ZvY3VzLngsIGZvY3VzLnksIGZvY3VzLnIgKiAyXSk7CiAgICAgICAgICAgIHJldHVybiAodCkgPT4gem9vbVRvKGkodCkpOwogICAgICAgICAgfSk7CgogICAgICAgIGxhYmVsCiAgICAgICAgICAuZmlsdGVyKGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIHJldHVybiBkLnBhcmVudCA9PT0gZm9jdXMgfHwgdGhpcy5zdHlsZS5kaXNwbGF5ID09PSAiaW5saW5lIjsKICAgICAgICAgIH0pCiAgICAgICAgICAudHJhbnNpdGlvbih0cmFuc2l0aW9uKQogICAgICAgICAgLnN0eWxlKCJmaWxsLW9wYWNpdHkiLCAoZCkgPT4gKGQucGFyZW50ID09PSBmb2N1cyA/IDEgOiAwKSkKICAgICAgICAgIC5vbigic3RhcnQiLCBmdW5jdGlvbiAoZCkgewogICAgICAgICAgICBpZiAoZC5wYXJlbnQgPT09IGZvY3VzKSB0aGlzLnN0eWxlLmRpc3BsYXkgPSAiaW5saW5lIjsKICAgICAgICAgIH0pCiAgICAgICAgICAub24oImVuZCIsIGZ1bmN0aW9uIChkKSB7CiAgICAgICAgICAgIGlmIChkLnBhcmVudCAhPT0gZm9jdXMpIHRoaXMuc3R5bGUuZGlzcGxheSA9ICJub25lIjsKICAgICAgICAgIH0pOwogICAgICB9CiAgICB9LAogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gKCkgewogICAgLy8gY29uc29sZS5sb2coIm1vdW50ZWQiKTsKICAgIC8vIGNvbnNvbGUubG9nKCJjaXJjbGUgcGFja2luZyIsIGQzLnZlcnNpb24pOwogICAgaWYgKCF0aGlzLiRzdG9yZS5zdGF0ZS52dWVDaGFydERhdGEpIHsKICAgICAgZDMuanNvbigiY2lyY2xlX2NoYXJ0X2RhdGEuanNvbiIpLnRoZW4oKGRhdGEpID0+IHsKICAgICAgICB0aGlzLmRhdGEgPSBkYXRhOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGFydERhdGEgc2V0IGZyb20gZmlsZScpOwogICAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGFydERhdGEgY29udGFpbnMnLCB0aGlzLmRhdGEubGVuZ3RoLCAncm93cycpOwogICAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgidnVlQ2hhcnREYXRhIiwgdGhpcy5kYXRhKTsKICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmRhdGEpOwogICAgICAgIHRoaXMuYmFyQ2hhcnQodGhpcy5kYXRhKTsKICAgICAgfSk7CiAgICB9IGVsc2UgewogICAgICB0aGlzLmRhdGEgPSB0aGlzLiRzdG9yZS5zdGF0ZS52dWVDaGFydERhdGE7CiAgICAgIC8vIGNvbnNvbGUubG9nKCdjaGFydERhdGEgc2V0IGZyb20gc3RvcmUnKTsKICAgICAgLy8gY29uc29sZS5sb2coJ2NoYXJ0RGF0YSBjb250YWlucycsIHRoaXMuZGF0YS5sZW5ndGgsICdyb3dzJyk7CiAgICAgIHRoaXMuYmFyQ2hhcnQodGhpcy5kYXRhKTsKICAgIH0KICB9LAp9Owo="},{"version":3,"sources":["D3Chart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;AAeA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"D3Chart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"d3Chart\">\n    <div class=\"title\">\n      <br />\n      <h5>Crime by Area and Victim's Race</h5>\n    </div>\n    <div>\n      <center>\n        <svg width=\"400\" height=\"300\" id=\"chart\"></svg>\n      </center>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nexport default {\n  name: \"d3Chart\",\n  data: function () {\n    return {\n      chartData: null,\n    };\n  },\n  methods: {\n    barChart(data) {\n      var width = 600;\n      var height = width;\n\n      var pack = (data) =>\n        d3.pack().size([width, height]).padding(3)(\n          d3\n            .hierarchy(data)\n            .sum((d) => d.value)\n            .sort((a, b) => b.value - a.value)\n        );\n      var color = d3\n        .scaleLinear()\n        .domain([0, 5])\n        // .range([\"hsl(152,80%,80%)\", \"hsl(228,30%,40%)\"])\n        // .range([\"#fff7ec\",\"#7f0000\"])\n        .range([\"#fee8c8\", \"#7f0000\"])\n\n        .interpolate(d3.interpolateHslLong);\n\n      const root = pack(data);\n      let focus = root;\n      let view;\n\n      var svg = d3\n        .select(\"#chart\")\n        .attr(\"width\", 600)\n        .attr(\"height\", 600)\n        .attr(\"viewBox\", `-${width / 2} -${height / 2} ${width} ${height}`)\n        .style(\"display\", \"block\")\n        .style(\"margin\", \"0 +14px\")\n        .style(\"background\", color(0))\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (event) => zoom(event, root));\n\n      var node = svg\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(root.descendants().slice(1))\n        .join(\"circle\")\n        .attr(\"fill\", (d) => (d.children ? color(d.depth) : \"white\"))\n        .attr(\"pointer-events\", (d) => (!d.children ? \"none\" : null))\n        .on(\"mouseover\", function () {\n          d3.select(this).attr(\"stroke\", \"#000\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).attr(\"stroke\", null);\n        })\n        .on(\n          \"click\",\n          (event, d) => focus !== d && (zoom(event, d), event.stopPropagation())\n        );\n\n      var label = svg\n        .append(\"g\")\n        .style(\"font\", \"10px sans-serif\")\n        .attr(\"pointer-events\", \"none\")\n        .attr(\"text-anchor\", \"middle\")\n        .selectAll(\"text\")\n        .data(root.descendants())\n        .join(\"text\")\n        .style(\"fill-opacity\", (d) => (d.parent === root ? 1 : 0))\n        .style(\"display\", (d) => (d.parent === root ? \"inline\" : \"none\"))\n        .text((d) => d.data.name);\n\n      zoomTo([root.x, root.y, root.r * 2]);\n\n      function zoomTo(v) {\n        var k = width / v[2];\n\n        view = v;\n        label.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\"r\", (d) => d.r * k);\n      }\n\n      function zoom(event, d) {\n        // var focus0 = focus;\n\n        focus = d;\n\n        var transition = svg\n          .transition()\n          .duration(event.altKey ? 7500 : 750)\n          .tween(\"zoom\", () => {\n            // console.log(d);\n            var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);\n            return (t) => zoomTo(i(t));\n          });\n\n        label\n          .filter(function (d) {\n            return d.parent === focus || this.style.display === \"inline\";\n          })\n          .transition(transition)\n          .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n          .on(\"start\", function (d) {\n            if (d.parent === focus) this.style.display = \"inline\";\n          })\n          .on(\"end\", function (d) {\n            if (d.parent !== focus) this.style.display = \"none\";\n          });\n      }\n    },\n  },\n  mounted: function () {\n    // console.log(\"mounted\");\n    // console.log(\"circle packing\", d3.version);\n    if (!this.$store.state.vueChartData) {\n      d3.json(\"circle_chart_data.json\").then((data) => {\n        this.data = data;\n        // console.log('chartData set from file');\n        // console.log('chartData contains', this.data.length, 'rows');\n        this.$store.commit(\"vueChartData\", this.data);\n        // console.log(this.data);\n        this.barChart(this.data);\n      });\n    } else {\n      this.data = this.$store.state.vueChartData;\n      // console.log('chartData set from store');\n      // console.log('chartData contains', this.data.length, 'rows');\n      this.barChart(this.data);\n    }\n  },\n};\n</script>\n\n<!-- \"scoped\" attribute limits CSS to this component only -->\n<style scoped>\n>>> text.label {\n  /* need to add >>> to gets passed to d3 because vue creates new mapping */\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  font-size: 12px;\n  fill: black;\n}\n\n>>> text.value {\n  font-family: \"Courier New\", Courier, monospace;\n  font-weight: bolder;\n  font-size: 12px;\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  fill: #eee;\n}\n\n>>> rect.bar {\n  text-align: right; /* pull value text to the end of the bar */\n  vertical-align: middle; /* align value text with middle of the bar */\n  fill: #7abcff;\n  height: 20px; /* bar height, this can stay fixed */\n}\n\n.title {\n  margin-bottom: 0px;\n  font-size: 12px;\n}\n</style>\n"]}]}