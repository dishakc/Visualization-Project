{"remainingRequest":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/src/views/D3Chart.vue?vue&type=style&index=0&id=37a98c05&scoped=true&lang=css&","dependencies":[{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/src/views/D3Chart.vue","mtime":1606697993619},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/css-loader/dist/cjs.js","mtime":1605858454676},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1605858459896},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/postcss-loader/src/index.js","mtime":1605858457480},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/cache-loader/dist/cjs.js","mtime":1605858454017},{"path":"/Users/dishakc/Documents/Data_Visualization/project_DV/project-the-vizards/demo/node_modules/vue-loader/lib/index.js","mtime":1605858459895}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj4+PiB0ZXh0LmxhYmVsIHsKICAvKiBuZWVkIHRvIGFkZCA+Pj4gdG8gZ2V0cyBwYXNzZWQgdG8gZDMgYmVjYXVzZSB2dWUgY3JlYXRlcyBuZXcgbWFwcGluZyAqLwogIHRleHQtYW5jaG9yOiBlbmQ7CiAgLyogYWxpZ25tZW50LWJhc2VsaW5lOiBtaWRkbGU7ICovCiAgZm9udC1zaXplOiAxMnB4OwogIGZpbGw6IGJsYWNrOwp9Cgo+Pj4gdGV4dC52YWx1ZSB7CiAgZm9udC1mYW1pbHk6ICJDb3VyaWVyIE5ldyIsIENvdXJpZXIsIG1vbm9zcGFjZTsKICBmb250LXdlaWdodDogYm9sZGVyOwogIGZvbnQtc2l6ZTogMTJweDsKICB0ZXh0LWFuY2hvcjogZW5kOwogIC8qIGFsaWdubWVudC1iYXNlbGluZTogbWlkZGxlOyAqLwogIGZpbGw6ICNlZWU7Cn0KCj4+PiByZWN0LmJhciB7CiAgdGV4dC1hbGlnbjogcmlnaHQ7IC8qIHB1bGwgdmFsdWUgdGV4dCB0byB0aGUgZW5kIG9mIHRoZSBiYXIgKi8KICB2ZXJ0aWNhbC1hbGlnbjogbWlkZGxlOyAvKiBhbGlnbiB2YWx1ZSB0ZXh0IHdpdGggbWlkZGxlIG9mIHRoZSBiYXIgKi8KICBmaWxsOiAjN2FiY2ZmOwogIGhlaWdodDogMjBweDsgLyogYmFyIGhlaWdodCwgdGhpcyBjYW4gc3RheSBmaXhlZCAqLwp9CgoudGl0bGUgewogIG1hcmdpbi1ib3R0b206IDBweDsKICBmb250LXNpemU6IDEycHg7Cn0K"},{"version":3,"sources":["D3Chart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"D3Chart.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"d3Chart\">\n    <div class=\"title\">\n      <br />\n      <h5>Crime by Area and Victim's Race</h5>\n    </div>\n    <div>\n      <center>\n        <svg width=\"400\" height=\"300\" id=\"chart\"></svg>\n      </center>\n    </div>\n  </div>\n</template>\n\n<script>\nimport * as d3 from \"d3\";\n\nexport default {\n  name: \"d3Chart\",\n  data: function () {\n    return {\n      chartData: null,\n    };\n  },\n  methods: {\n    barChart(data) {\n      var width = 600;\n      var height = width;\n\n      var pack = (data) =>\n        d3.pack().size([width, height]).padding(3)(\n          d3\n            .hierarchy(data)\n            .sum((d) => d.value)\n            .sort((a, b) => b.value - a.value)\n        );\n      var color = d3\n        .scaleLinear()\n        .domain([0, 5])\n        // .range([\"hsl(152,80%,80%)\", \"hsl(228,30%,40%)\"])\n        // .range([\"#fff7ec\",\"#7f0000\"])\n        .range([\"#fee8c8\", \"#7f0000\"])\n\n        .interpolate(d3.interpolateHslLong);\n\n      const root = pack(data);\n      let focus = root;\n      let view;\n\n      var svg = d3\n        .select(\"#chart\")\n        .attr(\"width\", 600)\n        .attr(\"height\", 600)\n        .attr(\"viewBox\", `-${width / 2} -${height / 2} ${width} ${height}`)\n        .style(\"display\", \"block\")\n        .style(\"margin\", \"0 +14px\")\n        .style(\"background\", color(0))\n        .style(\"cursor\", \"pointer\")\n        .on(\"click\", (event) => zoom(event, root));\n\n      var node = svg\n        .append(\"g\")\n        .selectAll(\"circle\")\n        .data(root.descendants().slice(1))\n        .join(\"circle\")\n        .attr(\"fill\", (d) => (d.children ? color(d.depth) : \"white\"))\n        .attr(\"pointer-events\", (d) => (!d.children ? \"none\" : null))\n        .on(\"mouseover\", function () {\n          d3.select(this).attr(\"stroke\", \"#000\");\n        })\n        .on(\"mouseout\", function () {\n          d3.select(this).attr(\"stroke\", null);\n        })\n        .on(\n          \"click\",\n          (event, d) => focus !== d && (zoom(event, d), event.stopPropagation())\n        );\n\n      var label = svg\n        .append(\"g\")\n        .style(\"font\", \"10px sans-serif\")\n        .attr(\"pointer-events\", \"none\")\n        .attr(\"text-anchor\", \"middle\")\n        .selectAll(\"text\")\n        .data(root.descendants())\n        .join(\"text\")\n        .style(\"fill-opacity\", (d) => (d.parent === root ? 1 : 0))\n        .style(\"display\", (d) => (d.parent === root ? \"inline\" : \"none\"))\n        .text((d) => d.data.name);\n\n      zoomTo([root.x, root.y, root.r * 2]);\n\n      function zoomTo(v) {\n        var k = width / v[2];\n\n        view = v;\n        label.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\n          \"transform\",\n          (d) => `translate(${(d.x - v[0]) * k},${(d.y - v[1]) * k})`\n        );\n        node.attr(\"r\", (d) => d.r * k);\n      }\n\n      function zoom(event, d) {\n        // var focus0 = focus;\n\n        focus = d;\n\n        var transition = svg\n          .transition()\n          .duration(event.altKey ? 7500 : 750)\n          .tween(\"zoom\", () => {\n            // console.log(d);\n            var i = d3.interpolateZoom(view, [focus.x, focus.y, focus.r * 2]);\n            return (t) => zoomTo(i(t));\n          });\n\n        label\n          .filter(function (d) {\n            return d.parent === focus || this.style.display === \"inline\";\n          })\n          .transition(transition)\n          .style(\"fill-opacity\", (d) => (d.parent === focus ? 1 : 0))\n          .on(\"start\", function (d) {\n            if (d.parent === focus) this.style.display = \"inline\";\n          })\n          .on(\"end\", function (d) {\n            if (d.parent !== focus) this.style.display = \"none\";\n          });\n      }\n    },\n  },\n  mounted: function () {\n    // console.log(\"mounted\");\n    // console.log(\"circle packing\", d3.version);\n    if (!this.$store.state.vueChartData) {\n      d3.json(\"circle_chart_data.json\").then((data) => {\n        this.data = data;\n        // console.log('chartData set from file');\n        // console.log('chartData contains', this.data.length, 'rows');\n        this.$store.commit(\"vueChartData\", this.data);\n        // console.log(this.data);\n        this.barChart(this.data);\n      });\n    } else {\n      this.data = this.$store.state.vueChartData;\n      // console.log('chartData set from store');\n      // console.log('chartData contains', this.data.length, 'rows');\n      this.barChart(this.data);\n    }\n  },\n};\n</script>\n\n<!-- \"scoped\" attribute limits CSS to this component only -->\n<style scoped>\n>>> text.label {\n  /* need to add >>> to gets passed to d3 because vue creates new mapping */\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  font-size: 12px;\n  fill: black;\n}\n\n>>> text.value {\n  font-family: \"Courier New\", Courier, monospace;\n  font-weight: bolder;\n  font-size: 12px;\n  text-anchor: end;\n  /* alignment-baseline: middle; */\n  fill: #eee;\n}\n\n>>> rect.bar {\n  text-align: right; /* pull value text to the end of the bar */\n  vertical-align: middle; /* align value text with middle of the bar */\n  fill: #7abcff;\n  height: 20px; /* bar height, this can stay fixed */\n}\n\n.title {\n  margin-bottom: 0px;\n  font-size: 12px;\n}\n</style>\n"]}]}